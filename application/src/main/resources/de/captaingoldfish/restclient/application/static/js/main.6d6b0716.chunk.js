(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{104:function(e,t,a){e.exports=a.p+"static/media/logo.06e73328.svg"},109:function(e,t,a){e.exports=a.p+"static/media/certificate.f8e929ae.png"},111:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return R}));var n=a(10),r=a.n(n),s=a(16),i=a(12),o=a(13),c=a(6),l=a(15),u=a(14),d=a(0),m=a.n(d),h=(a(92),a(17)),p=a(36),f=a(11),v=a(5),E=a(24),y=a(3),g=a(168),b=a(25),w=a(20),k=a(87),C=a(169),S=a(167),O=a(18),j=a(21),R=function(t){Object(l.a)(n,t);var a=Object(u.a)(n);function n(e){var t;return Object(i.a)(this,n),(t=a.call(this,e)).state={isMounted:!1,selectedKey:"",currentJwt:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},t.setState=t.setState.bind(Object(c.a)(t)),t.scimClient=new h.a(j.h,t.setState),t.formReference=Object(d.createRef)(),t.onUpdateSuccess=t.onUpdateSuccess.bind(Object(c.a)(t)),t.handleKeySelectionSelection=t.handleKeySelectionSelection.bind(Object(c.a)(t)),t.parseJwt=t.parseJwt.bind(Object(c.a)(t)),t.prettyPrintJwtJson=t.prettyPrintJwtJson.bind(Object(c.a)(t)),t.scimComponentBasics=new p.a({scimClient:t.scimClient,formReference:t.formReference,getOriginalResource:function(){return t.state.jwtBuilder||{id:1}},getCurrentResource:function(){return t.state.jwtBuilder||{id:1}},setCurrentResource:function(e){},setState:t.setState,onUpdateSuccess:t.onUpdateSuccess}),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"handleKeySelectionSelection",value:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedKey:t});case 2:document.getElementById("jwt-parser-key-id").value=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onUpdateSuccess",value:function(e){var t=e;t.header=JSON.stringify(JSON.parse(e.header),void 0,4),this.setState({jwtBuilder:t})}},{key:"getJwtParts",value:function(){return!1===this.state.isMounted?null:(document.getElementById("jwt-to-parse").value||"").split(".")}},{key:"parseJwt",value:function(t){if(!1===this.state.isMounted)return null;var a={};a.parts=t;var n=function(t){return decodeURIComponent(e.from(t,"base64").toString())};if(5===t.length){var r=n(t[0]);return a.header=this.prettyPrintJwtJson(r),a.infoMessages=["JWE must be parsed at backend"],a}if(3!==t.length)return a.warnMessages=["Not a valid JSON Web Token"],a;var s=t[0],i=t[1],o=n(s),c=n(i);return a.header=this.prettyPrintJwtJson(o),a.body=this.prettyPrintJwtJson(c),a}},{key:"prettyPrintJwtJson",value:function(e){try{var t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(a){return e}}},{key:"render",value:function(){var e=this,t=this.getJwtParts(),a=this.parseJwt(t)||{},n=new y.a(t).map((function(e){return 3===e.length})).orElse(!1),r=new y.a(t).map((function(e){return 5===e.length})).orElse(!1),s=new y.a(this.state.jwtBuilder).map((function(e){return e.header})).orElse(a.header),i=new y.a(this.state.jwtBuilder).map((function(e){return e.body})).orElse(a.body),o=this.state.errors||{};return m.a.createElement(m.a.Fragment,null,m.a.createElement(v.a,{variant:"danger",icon:m.a.createElement(O.a,null),messages:o.errorMessages||new y.a(o.detail).map((function(e){return[e]})).orElse([])}),m.a.createElement(f.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference},m.a.createElement(v.a,{icon:m.a.createElement(O.a,null),variant:"danger",messages:(this.state.errorMessages||[]).errors}),m.a.createElement(v.a,{icon:m.a.createElement(S.a,null),variant:"warning",messages:a.warnMessages}),m.a.createElement(v.a,{variant:"info",messages:a.infoMessages}),m.a.createElement(g.a,null,m.a.createElement(b.a,null,m.a.createElement(w.a,{sm:3},m.a.createElement(k.a,null,m.a.createElement(C.a,{id:"jwt-parser-aliases",title:"available keys",onSelect:this.handleKeySelectionSelection},new y.a(this.props.keyInfos).isPresent()&&this.props.keyInfos.map((function(e){return m.a.createElement(k.a.Item,{key:e.alias,eventKey:e.alias},e.alias+" ("+e.keyAlgorithm+"-"+e.keyLength+"-bit)")}))),m.a.createElement("p",null,"selected key:",m.a.createElement("span",{className:"code",style:{marginLeft:"15px",color:"lightgreen"}},this.state.selectedKey))),(!0===r||!0===n)&&m.a.createElement(E.a,{id:"parse-jwt",type:"submit",onClick:function(t){e.setState({jwtBuilder:void 0})}},m.a.createElement(v.q,{show:this.state.isLoading}),!0===n&&m.a.createElement("span",null,"Verify Signature"),!0===r&&m.a.createElement("span",null,"Decrypt")),this.state.jwtBuilder&&n&&m.a.createElement("h5",{style:{color:"lightgreen",marginTop:"50px"}},"Signature valid"),this.state.jwtBuilder&&r&&m.a.createElement("h5",{style:{color:"lightgreen",marginTop:"50px"}},"Successfully decrypted")),m.a.createElement(w.a,{sm:4,className:"form-group"},m.a.createElement(f.a.Control,{id:"jwt-to-parse",name:"jwt",sm:12,as:"textarea",value:this.state.currentJwt,onChange:function(t){return e.setState({currentJwt:t.target.value,jwtBuilder:void 0})}}),m.a.createElement("div",{id:"jwt-input",className:"jwt-overlay"},(a.parts||[]).map((function(e,t){return m.a.createElement("span",{key:"jwt-part-"+t,className:"jwt-part jwt-part-"+(t<=4?t:"over")},t>0&&m.a.createElement("span",{className:"jwt-dot-separator"},".",m.a.createElement("br",null)),e)})))),m.a.createElement(w.a,{sm:5},m.a.createElement(v.l,{id:"jwt-parser-key-id",name:"keyId",readOnly:!0,type:"hidden",value:this.state.selectedKey,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),m.a.createElement(v.l,{id:"jwt-parsed-header",name:"header",className:"jwt-part-0",type:"text",as:"textarea",value:s,onChange:function(){},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),m.a.createElement(v.l,{id:"jwt-parsed-body",name:"body",className:"jwt-part-1",type:"text",as:"textarea",value:i,onChange:function(){},onError:function(t){return e.scimClient.getErrors(e.state,t)}}))))))}}]),n}(m.a.Component)}).call(this,a(103).Buffer)},115:function(e,t,a){e.exports=a(158)},120:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(40),i=a.n(s),o=(a(120),a(121),a(122),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,196)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))}),c=a(10),l=a.n(c),u=a(16),d=a(12),m=a(13),h=a(6),p=a(15),f=a(14),v=a(104),E=a.n(v),y=a(193),g=a(168),b=a(110),w=a(62),k=a(28),C=a(37),S=a(194),O=a(183),j=a(19),R=a(11),x=a(25),I=a(20),P=a(24),T=a(5),D=a(3),N=a(17),M=a(98),A=a(179),U=a(177),L=a(178),B=a(66),F=a.n(B),K=a(180),J=a(18),q=a(174),G=a(114),z=a(192),V=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return!0===this.props.show&&r.a.createElement("div",{id:this.props.id,role:"dialog","aria-modal":"true",tabIndex:"-1",className:"card-modal"},r.a.createElement("div",{className:"card-modal-content"},r.a.createElement("h5",{id:this.props.id+"-header",className:"card-title"},this.props.title),r.a.createElement("p",{id:this.props.id+"-text"},this.props.message),r.a.createElement(P.a,{id:this.props.id+"-button-accept",role:"accept",className:"left",variant:void 0===this.props.variant?"info":this.props.variant,type:"button",onClick:this.props.onSubmit},this.props.submitButtonText),r.a.createElement(P.a,{id:this.props.id+"-button-cancel",role:"cancel",className:"right",variant:"secondary",type:"button",onClick:this.props.onCancel},this.props.cancelButtonText)))}}]),a}(r.a.Component),H=a(175),W=a(176),_=a(163),Q=a(109),X=a.n(Q),Y=a(21),Z=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={loaded:!1},n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a(n.props.scimResourcePath,n.setState),n.deleteEntry=n.deleteEntry.bind(Object(h.a)(n)),n.showModal=n.showModal.bind(Object(h.a)(n)),n.hideModal=n.hideModal.bind(Object(h.a)(n)),n.loadData=n.loadData.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"deleteEntry",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.deleteResource(this.props.alias);case 2:e.sent.success&&void 0!==this.props.onDeleteSuccess&&this.props.onDeleteSuccess(this.props.alias);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showSpinner:!0}),e.next=3,this.scimClient.getResource(this.props.alias);case 3:(t=e.sent).success&&t.resource.then((function(e){var t=e[Y.e];a.setState({loaded:!0,cert:t,certInfo:t.info})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showModal",value:function(){this.setState({showModal:!0})}},{key:"hideModal",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var e=function(e){return r.a.createElement(q.a,Object.assign({id:"button-tooltip"},e),"Certificate")},t=function(e){return r.a.createElement(q.a,Object.assign({id:"button-tooltip"},e),"Private Key and Certificate")};return r.a.createElement(G.a,{id:"alias-card-"+this.props.alias,key:this.props.alias,border:"warning",bg:"dark",className:"alias-card"},r.a.createElement(V,{id:"delete-dialog-"+this.props.alias,show:this.state.showModal,variant:"danger",title:"Delete '"+this.props.alias+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.deleteEntry,cancelButtonText:"cancel",onCancel:this.hideModal}),r.a.createElement(G.a.Header,{id:"alias-name-"+this.props.alias},this.props.alias," ",new D.a(this.props.keyInfo).map((function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"(",r.a.createElement("span",{className:"keyInfo"},a.keyAlgorithm+": "+a.keyLength+"-bit ",a.hasPrivateKey&&r.a.createElement(z.a,{placement:"right",delay:{show:250,hide:400},overlay:t},r.a.createElement(H.a,null)),!a.hasPrivateKey&&r.a.createElement(z.a,{placement:"right",delay:{show:250,hide:400},overlay:e},r.a.createElement(W.a,null))),")")})).orElse(null),r.a.createElement("div",{className:"card-control-icons"},r.a.createElement(T.q,{show:this.state.isLoading}),r.a.createElement(_.a,{id:"delete-icon-"+this.props.alias,onClick:this.showModal}))),r.a.createElement(G.a.Body,null,!1===this.state.loaded&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"load-certificate-icon-container"},r.a.createElement(U.a,{src:X.a,className:"load-certificate-icon",fluid:!0})," ",r.a.createElement("br",null),r.a.createElement(P.a,{id:"load-certificate-data-button-for-"+this.props.alias,className:"card-load-icon",type:"button",onClick:this.loadData},"Load Data"))),!0===this.state.loaded&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a.Subtitle,null,"Issuer"),r.a.createElement(G.a.Text,{id:"issuer-dn-"+this.props.alias},this.state.certInfo.issuerDn),r.a.createElement(G.a.Subtitle,null,"Subject"),r.a.createElement(G.a.Text,{id:"subject-dn-"+this.props.alias},this.state.certInfo.subjectDn),r.a.createElement(G.a.Subtitle,null,"SHA-256 Fingerprint"),r.a.createElement(G.a.Text,{id:"sha-256-"+this.props.alias},this.state.certInfo.sha256Fingerprint),r.a.createElement(G.a.Subtitle,null,"Valid From"),r.a.createElement(G.a.Text,{id:"valid-from-"+this.props.alias},new Date(this.state.certInfo.validFrom).toUTCString()),r.a.createElement(G.a.Subtitle,null,"Valid Until"),r.a.createElement(G.a.Text,{id:"valid-until-"+this.props.alias},new Date(this.state.certInfo.validTo).toUTCString()))))}}]),a}(r.a.Component);function $(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{id:"keystore-certificate-entries"},void 0!==e.certificateAliases&&e.certificateAliases.map((function(t){return r.a.createElement(Z,{key:t,scimResourcePath:e.scimResourcePath,alias:t,onDeleteSuccess:e.onDeleteSuccess})}))))}var ee=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).scimResourcePath="/scim/v2/Keystore",n.state={},n.setAliasSelectionResponse=n.setAliasSelectionResponse.bind(Object(h.a)(n)),n.onAliasSelectionSuccess=n.onAliasSelectionSuccess.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"setAliasSelectionResponse",value:function(e){var t=JSON.parse(JSON.stringify(e));this.setState({aliasSelectionResponse:t})}},{key:"onAliasSelectionSuccess",value:function(e){this.setState({newKeyInfo:{value:e.keyInfos[0]}})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{scimResourcePath:this.scimResourcePath,setAliasSelectionResponse:this.setAliasSelectionResponse}),r.a.createElement(ae,{scimResourcePath:this.scimResourcePath,aliasSelectionResponse:this.state.aliasSelectionResponse,onCreateSuccess:this.onAliasSelectionSuccess}),r.a.createElement(ne,{scimResourcePath:this.scimResourcePath,newKeyInfo:this.state.newKeyInfo}))}}]),a}(r.a.Component),te=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={success:!1,showSpinner:!1},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.upload=r.upload.bind(Object(h.a)(r)),r.handleCreateResponse=r.handleCreateResponse.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.scimClient.getResourceFromFormReference(this.formReference);case 3:return a=e.sent,e.next=6,this.scimClient.createResource(a);case 6:n=e.sent,this.handleCreateResponse(n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateResponse",value:function(e){var t=this;e.success?(e.resource.then((function(e){t.props.setAliasSelectionResponse(e)})),this.setState({success:!0})):this.setState({success:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Keystore Upload"),r.a.createElement(M.a,{id:"uploadForm-alert-success",variant:"success",show:this.state.success},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Keystore was successfully uploaded")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(R.a,{id:"uploadForm",onSubmit:this.upload,ref:this.formReference},r.a.createElement(T.k,{name:"fileUpload.keystoreFile",label:"Keystore File",placeholder:"Select a keystore file",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"fileUpload.keystorePassword",label:"Keystore Password",type:"password",placeholder:"Keystore Password",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"upload",type:"submit"},r.a.createElement(T.q,{show:this.state.isLoading})," Upload")))))}}]),a}(r.a.Component),ae=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={success:!1},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a(e.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.save=r.save.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"save",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.scimClient.getResourceFromFormReference(this.formReference);case 3:return a=e.sent,e.next=6,this.scimClient.createResource(a);case 6:(n=e.sent).success?n.resource.then((function(e){r.props.onCreateSuccess(e),r.setState({newKeyInfo:e.keyInfos[0]})})):this.setState({newKeyInfo:void 0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=new D.a(this.props.aliasSelectionResponse).map((function(e){return e.aliasSelection})).map((function(e){return e.stateId})).orElse(0),a=new D.a(this.props.aliasSelectionResponse).map((function(e){return e.aliasSelection})).map((function(e){return e.aliases})).orElse([]),n=new D.a(this.props.aliasSelectionResponse).map((function(e){return""})).orElse("disabled");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Alias Selection"),r.a.createElement(M.a,{id:"aliasSelectionForm-alert-success",variant:"success",show:new D.a(this.state.newKeyInfo).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Entry with alias '",new D.a(this.state.newKeyInfo).map((function(e){return e.alias})).orElse(""),"' was successfully added")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(R.a,{id:"aliasSelectionForm",onSubmit:this.save,ref:this.formReference,className:n},r.a.createElement(T.l,{name:"aliasSelection.stateId",type:"hidden",value:t,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.o,{name:"aliasSelection.aliases",label:"Alias",options:a,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"aliasSelection.aliasOverride",label:"Alias Override",type:"text",placeholder:"Store under another alias",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"aliasSelection.privateKeyPassword",label:"Private Key Password",type:"password",placeholder:"Optional if password is identical to keystore password",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"save",type:"Save"},r.a.createElement(T.q,{show:this.state.isLoading})," Save")))))}}]),a}(r.a.Component),ne=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={keyInfos:[]},n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a(n.props.scimResourcePath,n.setState),n.onDeleteSuccess=n.onDeleteSuccess.bind(Object(h.a)(n)),n.downloadKeystore=n.downloadKeystore.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.listResources();case 2:(t=e.sent).success&&t.resource.then((function(e){a.setState({keyInfos:new D.a(e.Resources[0]).map((function(e){return e.keyInfos})).orElse([])})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){e.newKeyInfo!==this.props.newKeyInfo&&new D.a(this.props.newKeyInfo).map((function(e){return e.value})).isPresent()&&this.setState({keyInfos:[].concat(Object(j.a)(this.state.keyInfos),[this.props.newKeyInfo.value]),aliasDeleted:void 0})}},{key:"onDeleteSuccess",value:function(e){var t=this.state.keyInfos,a=function(e,t,a){for(var n=0;n<e.length;n+=1)if(e[n][t]===a)return n;return-1}(t,"alias",e);a>-1&&t.splice(a,1),this.setState({aliasDeleted:e,keyInfos:t})}},{key:"downloadKeystore",value:function(e){var t=this;e.preventDefault(),this.setState({downloading:!0}),this.scimClient.getResource("1",Y.i,{attributes:"applicationKeystore"}).then((function(e){t.setState({downloading:!1}),e.success&&e.resource.then((function(e){var t=e.applicationKeystore;Object(D.b)(t,"application-keystore-pw-123456.p12","p12")}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{id:"application-certificate-info-header"},r.a.createElement("p",null,"Application Keystore Infos"),r.a.createElement(A.a,{className:"download-keystore-icon"},r.a.createElement("a",{id:"keystore-download-link",href:"/#",onClick:this.downloadKeystore},r.a.createElement(T.q,{show:this.state.downloading||!1}),r.a.createElement(U.a,{src:F.a,fluid:!0}),r.a.createElement("p",null,"Download")))),r.a.createElement(M.a,{id:"card-list-infos-alert",variant:"info"},r.a.createElement(R.a.Text,null,r.a.createElement(K.a,null),' Application Keystore contains "',new D.a(this.state.keyInfos).map((function(e){return e.length})).orElse(0),'" entries')),r.a.createElement(M.a,{id:"card-list-deletion-success",variant:"success",show:void 0!==this.state.aliasDeleted},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null),' Key entry for alias "',this.state.aliasDeleted,'" was successfully deleted')),r.a.createElement(L.a,{id:"keystore-certificate-entries"},this.state.keyInfos.map((function(t){return r.a.createElement(Z,{key:t.alias,scimResourcePath:e.props.scimResourcePath,alias:t.alias,keyInfo:t,onDeleteSuccess:e.onDeleteSuccess})}))))}}]),a}(r.a.Component),re=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).scimResourcePath="/scim/v2/Truststore",n.state={},n.onMergeSuccess=n.onMergeSuccess.bind(Object(h.a)(n)),n.onUploadSuccess=n.onUploadSuccess.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"onMergeSuccess",value:function(e){this.setState({newAliases:e})}},{key:"onUploadSuccess",value:function(e){this.setState({newAliases:[e]})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{scimResourcePath:this.scimResourcePath,onMergeSuccess:this.onMergeSuccess}),r.a.createElement(ie,{scimResourcePath:this.scimResourcePath,aliasSelectionResponse:this.state.aliasSelectionResponse,onUploadSuccess:this.onUploadSuccess}),r.a.createElement(oe,{scimResourcePath:this.scimResourcePath,newAliases:this.state.newAliases}))}}]),a}(r.a.Component),se=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={success:!1,showSpinner:!1},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.upload=r.upload.bind(Object(h.a)(r)),r.handleCreateResponse=r.handleCreateResponse.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({addedAliases:[],duplicateAliases:[],duplicateCertificates:[]}),e.next=4,this.scimClient.getResourceFromFormReference(this.formReference);case 4:return a=e.sent,e.next=7,this.scimClient.createResource(a);case 7:n=e.sent,this.handleCreateResponse(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateResponse",value:function(e){var t=this;e.success?(e.resource.then((function(e){var a,n,r,s=e.truststoreUploadResponse;new D.a(s).ifPresent((function(e){a=e.aliases,n=new D.a(e.duplicateAliases).do((function(e){return e.sort()})).orElse([]),r=new D.a(e.duplicateCertificateAliases).do((function(e){return e.sort()})).orElse([])})),t.setState({addedAliases:new D.a(a).orElse([]),duplicateAliases:new D.a(n).orElse([]),duplicateCertificates:new D.a(r).orElse([])}),t.props.onMergeSuccess(a)})),this.setState({success:!0})):this.setState({success:!1})}},{key:"render",value:function(){var e=this,t=new D.a(this.state.duplicateAliases).map((function(e){return e.length})).orElse(0),a=new D.a(this.state.duplicateCertificates).map((function(e){return e.length})).orElse(0);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Truststore Upload"),r.a.createElement(M.a,{id:"truststoreUploadForm-alert-success",variant:"success",show:this.state.success},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Truststore was successfully merged")),r.a.createElement(M.a,{id:"upload-form-alert-duplicate-aliases",variant:"warning",show:t>0},r.a.createElement(R.a.Text,null,r.a.createElement(J.a,null)," The following aliases could not be added because the alias is duplicated.",r.a.createElement("br",null),"Number of not added aliases: ",t," ",r.a.createElement("br",null),"[",this.state.duplicateAliases,"]")),r.a.createElement(M.a,{id:"upoad-form-alert-duplicate-certificates",variant:"warning",show:a>0},r.a.createElement(R.a.Text,null,r.a.createElement(J.a,null)," The following aliases could not be added because the certificate is already present: [",this.state.duplicateCertificates,"]")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(R.a,{id:"truststoreUploadForm",onSubmit:this.upload,ref:this.formReference},r.a.createElement(T.k,{name:"truststoreUpload.truststoreFile",label:"Truststore File",placeholder:"Select a truststore file",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"truststoreUpload.truststorePassword",label:"Truststore Password",type:"password",placeholder:"Truststore Password",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"uploadTruststore",type:"submit"},r.a.createElement(T.q,{show:this.state.isLoading})," Upload")))))}}]),a}(r.a.Component),ie=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={success:!1},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a(e.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.upload=r.upload.bind(Object(h.a)(r)),r.handleCreateResponse=r.handleCreateResponse.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({addedAlias:void 0}),e.next=4,this.scimClient.getResourceFromFormReference(this.formReference);case 4:return a=e.sent,e.next=7,this.scimClient.createResource(a);case 7:n=e.sent,this.handleCreateResponse(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateResponse",value:function(e){var t=this;e.success?(e.resource.then((function(e){var a,n=e.certificateUploadResponse;new D.a(n).ifPresent((function(e){a=e.alias})),t.setState({addedAlias:a}),t.props.onUploadSuccess(a)})),this.setState({success:!0})):this.setState({success:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Certificate Upload"),r.a.createElement(M.a,{id:"certificateUploadForm-alert-success",variant:"success",show:new D.a(this.state.addedAlias).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Entry with alias '",this.state.addedAlias,"' was successfully added")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(R.a,{id:"certificateUploadForm",onSubmit:this.upload,ref:this.formReference},r.a.createElement(T.k,{name:"certificateUpload.certificateFile",label:"Certificate File",placeholder:"Select a certificate file",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"certificateUpload.alias",label:"Alias",placeholder:"Certificate Alias",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"uploadCertificate",type:"Save"},r.a.createElement(T.q,{show:this.state.isLoading})," Save")))))}}]),a}(r.a.Component),oe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={aliases:[]},n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a(n.props.scimResourcePath,n.setState),n.onDeleteSuccess=n.onDeleteSuccess.bind(Object(h.a)(n)),n.downloadTruststore=n.downloadTruststore.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.listResources();case 2:(t=e.sent).success&&t.resource.then((function(e){var t=new D.a(e.Resources[0]).map((function(e){return e.aliases})).orElse([]);t.sort(),a.setState({aliases:t})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,a){if(new D.a(this.props.newAliases).isPresent()&&e.newAliases!==this.props.newAliases){var n=this.state.aliases.concat(this.props.newAliases);n.sort(),this.setState({aliases:n,aliasDeleted:void 0})}}},{key:"onDeleteSuccess",value:function(e){var t=this.state.aliases,a=t.indexOf(e);a>-1&&t.splice(a,1),this.setState({aliasDeleted:e,aliases:t})}},{key:"downloadTruststore",value:function(e){var t=this;e.preventDefault(),this.setState({downloading:!0}),this.scimClient.getResource("1",Y.q,{attributes:"applicationTruststore"}).then((function(e){t.setState({downloading:!1}),e.success&&e.resource.then((function(e){var t=e.applicationTruststore;Object(D.b)(t,"application-truststore-pw-123456.jks","jks")}))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{id:"application-certificate-info-header"},r.a.createElement("p",null,"Application Truststore Infos"),r.a.createElement(A.a,{className:"download-keystore-icon"},r.a.createElement("a",{id:"truststore-download-link",href:"/#",onClick:this.downloadTruststore},r.a.createElement(T.q,{show:this.state.downloading||!1}),r.a.createElement(U.a,{src:F.a,fluid:!0}),r.a.createElement("p",null,"Download")))),r.a.createElement(M.a,{id:"card-list-infos-alert",variant:"info"},r.a.createElement(R.a.Text,null,r.a.createElement(K.a,null),' Application Truststore contains "',new D.a(this.state.aliases).map((function(e){return e.length})).orElse(0),'" entries')),r.a.createElement(M.a,{id:"card-list-deletion-success",variant:"success",show:void 0!==this.state.aliasDeleted},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null),' Key entry for alias "',this.state.aliasDeleted,'" was successfully deleted')),r.a.createElement($,{certificateAliases:this.state.aliases,scimResourcePath:this.props.scimResourcePath,onDeleteSuccess:this.onDeleteSuccess}))}}]),a}(r.a.Component),ce=a(182),le=a(181),ue=a(23),de=a(36),me=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={proxyList:[],showSpinner:!1},n.scimResourcePath="/scim/v2/Proxy",n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a(n.scimResourcePath,n.setState),n.addNewProxy=n.addNewProxy.bind(Object(h.a)(n)),n.onUpdateSuccess=n.onUpdateSuccess.bind(Object(h.a)(n)),n.onCreateSuccess=n.onCreateSuccess.bind(Object(h.a)(n)),n.addProxy=n.addProxy.bind(Object(h.a)(n)),n.removeProxy=n.removeProxy.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new D.a(this.state.currentPage*window.MAX_RESULTS+1).filter((function(e){return!isNaN(e)})).orElse(1),a=window.MAX_RESULTS,e.next=4,this.scimClient.listResources({startIndex:t,count:a,sortBy:"id"}).then((function(e){e.resource.then((function(e){var t=new D.a(e.Resources).orElse([]),a=new D.a(n.state.proxyList).orElse([]),r=ue.concat(a,t);n.setState({proxyList:r,errors:{},newProxy:void 0,deletedProxyId:void 0})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNewProxy",value:function(){var e=Object(j.a)(this.state.proxyList);0===e.filter((function(e){return void 0===e.id})).length?(e.unshift({}),this.setState({proxyList:e,newProxy:void 0,deletedProxyId:void 0})):this.setState({errors:{errorMessages:["There is already a new form available in the view."]},newProxy:void 0,deletedProxyId:void 0})}},{key:"onUpdateSuccess",value:function(e){var t=Object(j.a)(this.state.proxyList),a=ue.find(t,(function(t){return t.id===e.id}));ue.merge(a,e),this.setState({proxyList:t,newProxy:void 0,deletedProxyId:void 0})}},{key:"onCreateSuccess",value:function(e){var t=Object(j.a)(this.state.proxyList),a=ue.find(t,(function(e){return void 0===e.id}));ue.merge(a,e),this.setState({proxyList:t,newProxy:a,deletedProxyId:void 0})}},{key:"addProxy",value:function(e){var t=Object(j.a)(this.state.proxyList);t.unshift(e),this.setState({proxyList:t,newProxy:void 0,deletedProxyId:void 0})}},{key:"removeProxy",value:function(e){var t=Object(j.a)(this.state.proxyList).filter((function(t){return t.id!==e}));this.setState({proxyList:t,newProxy:void 0,deletedProxyId:e,errors:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"add-new-resource",onClick:this.addNewProxy},r.a.createElement("span",{className:"add-new-resource"},"Add new Proxy ",r.a.createElement("br",null),r.a.createElement(le.a,null))),r.a.createElement("h2",null,"Proxies"),r.a.createElement(M.a,{id:"save-alert-success",variant:"success",show:new D.a(this.state.newProxy).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Proxy with id '",new D.a(this.state.newProxy).map((function(e){return e.id})).orElse(-1),"' was successfully created")),r.a.createElement(M.a,{id:"card-list-deletion-success",variant:"success",show:new D.a(this.state.deletedProxyId).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null),' Proxy with ID "',this.state.deletedProxyId,'" was successfully deleted')),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(L.a,null,this.state.proxyList.map((function(t){return r.a.createElement(he,{key:new D.a(t.id).orElse("new"),scimResourcePath:e.scimResourcePath,proxy:t,onCreateSuccess:e.onCreateSuccess,onUpdateSuccess:e.onUpdateSuccess,onDeleteSuccess:e.removeProxy})}))))}}]),a}(r.a.Component),he=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={showModal:!1,editMode:new D.a(e.proxy).map((function(e){return e.id})).map((function(e){return!1})).orElse(!0),proxy:JSON.parse(JSON.stringify(e.proxy))},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new de.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.proxy},getCurrentResource:function(){return r.state.proxy},setCurrentResource:function(e){return r.setState({proxy:e})},setState:r.setState,onCreateSuccess:r.props.onCreateSuccess,onUpdateSuccess:r.props.onUpdateSuccess,onDeleteSuccess:r.props.onDeleteSuccess}),r}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(G.a,{id:"proxy-card-"+this.state.proxy.id,key:this.state.proxy.id,border:"warning",bg:"dark",className:"resource-card provider-card"},r.a.createElement(R.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference},r.a.createElement(V,{id:"delete-dialog-"+this.state.proxy.id,show:this.state.showModal,variant:"danger",title:"Delete Proxy with ID '"+this.state.proxy.id+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.scimComponentBasics.deleteResource,cancelButtonText:"cancel",onCancel:function(){return e.scimComponentBasics.setStateValue("showModal",!1)}}),r.a.createElement(M.a,{id:"save-alert-success-"+this.state.proxy.id,variant:"success",show:new D.a(this.state.success).orElse(!1)},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Proxy was successfully updated")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(G.a.Header,{id:"proxy-card-header-"+this.state.proxy.id},r.a.createElement("div",{className:"card-name-header"},void 0!==this.state.proxy.id&&r.a.createElement("h5",null,"Proxy '",this.state.proxy.id,"'")),r.a.createElement(T.b,{resource:this.state.proxy,spinner:r.a.createElement(T.q,{show:this.state.showSpinner}),editMode:this.state.editMode,createResource:this.scimComponentBasics.createResource,updateResource:this.scimComponentBasics.updateResource,resetEditMode:this.scimComponentBasics.resetEditMode,edit:function(){return e.scimComponentBasics.setStateValue("editMode",!0)},showModal:function(){return e.scimComponentBasics.setStateValue("showModal",!0)}}),r.a.createElement(P.a,{id:"upload",type:"submit",hidden:!0})),r.a.createElement(G.a.Body,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{size:"sm",variant:"dark",borderless:!0,striped:!0},r.a.createElement("tbody",null,r.a.createElement(T.r,{header:"Hostname",name:"hostname",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.hostname,placeholder:"The URL to the OpenID Providers discovery endpoint",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.r,{header:"Port",name:"port",type:"number",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.port,placeholder:"The port number of the Proxy",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.r,{header:"Username",name:"username",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.username,placeholder:"The username to authenticate at the proxy",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.r,{header:"Password",name:"password",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.password,placeholder:"The password to authenticate at the Proxy",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.c,{resource:this.state.proxy})))))))}}]),a}(r.a.Component);function pe(){return r.a.createElement(S.a,{defaultActiveKey:"keystore",id:"uncontrolled-tab-example"},r.a.createElement(O.a,{eventKey:"keystore",title:"Application Keystore"},r.a.createElement(ee,null)),r.a.createElement(O.a,{eventKey:"truststore",title:"Application Truststore"},r.a.createElement(re,null)),r.a.createElement(O.a,{eventKey:"proxies",title:"Proxies"},r.a.createElement(me,null)))}var fe=a(184),ve=a(50),Ee=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={errors:{},providerList:[],currentPage:0},n.scimResourcePath="/scim/v2/OpenIdProvider",n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a(n.scimResourcePath,n.setState),n.addNewProvider=n.addNewProvider.bind(Object(h.a)(n)),n.onUpdateSuccess=n.onUpdateSuccess.bind(Object(h.a)(n)),n.onCreateSuccess=n.onCreateSuccess.bind(Object(h.a)(n)),n.removeProvider=n.removeProvider.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.currentPage*this.props.serviceProviderConfig.filter.maxResults+1,a=this.props.serviceProviderConfig.filter.maxResults,e.next=4,this.scimClient.listResources({startIndex:t,count:a,sortBy:"name"}).then((function(e){e.resource.then((function(e){var t=new D.a(e.Resources).orElse([]),a=new D.a(n.state.providerList).orElse([]),r=ue.concat(a,t);n.setState({providerList:r,errors:{}})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNewProvider",value:function(){var e=Object(j.a)(this.state.providerList);0===e.filter((function(e){return void 0===e.id})).length?(e.unshift({}),this.setState({providerList:e,newProvider:void 0,deletedProviderName:void 0})):this.setState({errors:{errorMessages:["There is already a new form available in the view."]},newProvider:void 0,deletedProviderName:void 0})}},{key:"onUpdateSuccess",value:function(e){var t=Object(j.a)(this.state.providerList),a=ue.find(t,(function(t){return t.id===e.id}));ue.merge(a,e),this.setState({providerList:t,newProvider:void 0,deletedProviderName:void 0})}},{key:"onCreateSuccess",value:function(e){var t=Object(j.a)(this.state.providerList),a=ue.find(t,(function(e){return void 0===e.id}));ue.merge(a,e),this.setState({providerList:t,newProvider:a,deletedProviderName:void 0})}},{key:"removeProvider",value:function(e){var t=Object(j.a)(this.state.providerList),a=t.filter((function(t){return t.id===e}))[0];ue.remove(t,(function(t){return t.id===e})),this.setState({providerList:t,newProvider:void 0,deletedProviderName:a.name,errors:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"add-new-resource",onClick:this.addNewProvider},r.a.createElement("span",{className:"add-new-resource"},"Add new Provider ",r.a.createElement("br",null),r.a.createElement(le.a,null))),r.a.createElement("h2",null,r.a.createElement("span",null,"OpenID Provider List")),r.a.createElement(M.a,{id:"save-alert-success",variant:"success",show:new D.a(this.state.newProvider).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Provider with name '",new D.a(this.state.newProvider).map((function(e){return e.name})).orElse("-"),"' was successfully created")),r.a.createElement(M.a,{id:"card-list-deletion-success",variant:"success",show:new D.a(this.state.deletedProviderName).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null),' OpenID Provider "',this.state.deletedProviderName,'" was successfully deleted')),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(L.a,null,this.state.providerList.map((function(t){return r.a.createElement(ye,{key:new D.a(t.id).orElse("new"),scimResourcePath:e.scimResourcePath,provider:t,onCreateSuccess:e.onCreateSuccess,onUpdateSuccess:e.onUpdateSuccess,onDeleteSuccess:e.removeProvider})}))))}}]),a}(r.a.Component),ye=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={showModal:!1,editMode:new D.a(e.provider).map((function(e){return e.id})).map((function(e){return!1})).orElse(!0),provider:JSON.parse(JSON.stringify(e.provider))},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new de.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.provider},getCurrentResource:function(){return r.state.provider},setCurrentResource:function(e){return r.setState({provider:e})},setState:r.setState,onCreateSuccess:r.props.onCreateSuccess,onUpdateSuccess:r.props.onUpdateSuccess,onDeleteSuccess:r.props.onDeleteSuccess}),r}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(G.a,{id:"provider-card-"+this.state.provider.id,key:this.state.provider.id,border:"warning",bg:"dark",className:"resource-card provider-card"},r.a.createElement(b.a,{className:"flex-column"}),r.a.createElement(R.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference},r.a.createElement(V,{id:"delete-dialog-"+this.state.provider.id,show:this.state.showModal,variant:"danger",title:"Delete OpenID Provider with name '"+this.state.provider.name+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.scimComponentBasics.deleteResource,cancelButtonText:"cancel",onCancel:function(){return e.scimComponentBasics.setStateValue("showModal",!1)}}),r.a.createElement(M.a,{id:"save-alert-success",variant:"success",show:new D.a(this.state.success).orElse(!1)},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," OpenID Provider was successfully updated")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(G.a.Header,{id:"provider-card-header-"+this.state.provider.id},r.a.createElement("div",{className:"card-name-header"},!1===this.state.editMode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/openIdProvider/"+this.props.provider.id+"/openIdClients"},r.a.createElement("a",{href:"/#"},r.a.createElement("h5",null,r.a.createElement(fe.a,{style:{color:"bisque",marginRight:"15px"},size:"20px",height:"30px"}),this.state.provider.name)))),!0===this.state.editMode&&r.a.createElement(ve.a,{value:new D.a(this.state.provider.name).orElse(""),type:"text",id:"name-"+this.state.provider.id,name:"name",placeholder:"OpenID Provider identifier",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}})),r.a.createElement(T.b,{resource:this.state.provider,spinner:r.a.createElement(T.q,{show:this.state.showSpinner}),editMode:this.state.editMode,createResource:this.scimComponentBasics.createResource,updateResource:this.scimComponentBasics.updateResource,resetEditMode:this.scimComponentBasics.resetEditMode,edit:function(){return e.scimComponentBasics.setStateValue("editMode",!0)},showModal:function(){return e.scimComponentBasics.setStateValue("showModal",!0)}}),r.a.createElement(P.a,{id:"upload",type:"submit",hidden:!0})),r.a.createElement(G.a.Body,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{size:"sm",variant:"dark",borderless:!0,striped:!0},r.a.createElement("tbody",null,r.a.createElement(T.r,{header:"Discovery Endpoint",name:"discoveryEndpoint",resourceId:this.state.provider.id,editMode:this.state.editMode,resourceValue:this.state.provider.discoveryEndpoint,placeholder:"The URL to the OpenID Providers discovery endpoint",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.c,{resource:this.state.provider})))))))}}]),a}(r.a.Component),ge=(a(92),a(111)),be=a(87),we=a(169),ke=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={jwtBuilder:{},header:{},body:{},addX5Sha256tHeader:!1},r.setState=r.setState.bind(Object(h.a)(r)),r.scimClient=new N.a("/scim/v2/JwtBuilder",r.setState),r.formReference=Object(n.createRef)(),r.onCreateSuccess=r.onCreateSuccess.bind(Object(h.a)(r)),r.handleKeySelectionSelection=r.handleKeySelectionSelection.bind(Object(h.a)(r)),r.handleSignatureAlgorithmSelection=r.handleSignatureAlgorithmSelection.bind(Object(h.a)(r)),r.handleEncryptionAlgorithmSelection=r.handleEncryptionAlgorithmSelection.bind(Object(h.a)(r)),r.handleContentEncryptionAlgorithmSelection=r.handleContentEncryptionAlgorithmSelection.bind(Object(h.a)(r)),r.handleHeaderChange=r.handleHeaderChange.bind(Object(h.a)(r)),r.handleBodyChange=r.handleBodyChange.bind(Object(h.a)(r)),r.addJwtBody=r.addJwtBody.bind(Object(h.a)(r)),r.addDefaultJwtAttributes=r.addDefaultJwtAttributes.bind(Object(h.a)(r)),r.addKeyIdToHeader=r.addKeyIdToHeader.bind(Object(h.a)(r)),r.handleAddSha256Thumbprint=r.handleAddSha256Thumbprint.bind(Object(h.a)(r)),r.scimComponentBasics=new de.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.jwtBuilder},getCurrentResource:function(){return r.state.jwtBuilder},setCurrentResource:function(e){},setState:r.setState,onCreateSuccess:r.onCreateSuccess}),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.addHeader(),this.addDefaultJwtAttributes()}},{key:"componentDidUpdate",value:function(e,t,a){e.jwtInfo!==this.props.jwtInfo&&void 0!==this.props.jwtInfo&&(this.handleSignatureAlgorithmSelection(this.props.jwtInfo.signatureAlgorithms[0]),this.addHeader())}},{key:"onCreateSuccess",value:function(e){document.getElementById("jwt").value=e.jwt,this.setState({header:JSON.parse(e.header)}),this.addHeader()}},{key:"handleKeySelectionSelection",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedKey:t});case 2:document.getElementById("keyId").value=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addKeyIdToHeader",value:function(){var e=this.state.header;e.kid=this.state.selectedKey,this.setState({header:e}),this.addHeader()}},{key:"handleSignatureAlgorithmSelection",value:function(e){var t=this.state.header;t.alg=e,t.enc=void 0,this.setState({header:t}),this.addHeader()}},{key:"handleEncryptionAlgorithmSelection",value:function(e){var t=this.state.header;t.alg=e,t.enc=new D.a(this.state.header.enc).orElse(new D.a(this.state.jwtInfo).map((function(e){return e.encryptionAlgorithms[0]})).orElse("")),this.setState({header:t}),this.addHeader()}},{key:"handleContentEncryptionAlgorithmSelection",value:function(e){var t=this.state.header;t.enc=e,this.setState({header:t}),this.addHeader()}},{key:"handleHeaderChange",value:function(e){try{var t=JSON.parse(e.target.value);this.setState({header:t})}catch(a){}}},{key:"handleBodyChange",value:function(e){try{var t=JSON.parse(e.target.value);this.setState({body:t})}catch(a){}}},{key:"addHeader",value:function(){document.getElementById("jwt-builder-header").value=JSON.stringify(this.state.header,void 0,4)}},{key:"addDefaultJwtAttributes",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={iss:new D.a(this.state.body.iss).orElse(""),aud:new D.a(this.state.body.aud).orElse(""),sub:new D.a(this.state.body.sub).orElse(""),iat:(new Date).getTime(),exp:(new Date).getTime()+86400,jti:new D.a(this.state.body.jti).orElse("")},a=ue.merge(this.state.body,t),e.next=4,this.setState({body:a});case 4:this.addJwtBody();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addJwtBody",value:function(){document.getElementById("jwt-builder-body").value=JSON.stringify(this.state.body,void 0,4)}},{key:"handleAddSha256Thumbprint",value:function(e){var t=e.target.checked;this.setState({addX5Sha256tHeader:t})}},{key:"render",value:function(){var e=this,t=this.state.selectedKey===this.state.header.kid;return r.a.createElement(g.a,null,r.a.createElement(x.a,null,r.a.createElement(I.a,{sm:12},((this.state.errors||{}).errorMessages||[]).length>0&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement("ul",{className:"error-list"},this.state.errors.errorMessages.map((function(e,t){return r.a.createElement(T.g,{key:"error-message-"+t,message:e})})))))),r.a.createElement(x.a,null,r.a.createElement(I.a,null,r.a.createElement(be.a,null,r.a.createElement(we.a,{id:"jwt-builder-aliases",title:"available keys",onSelect:this.handleKeySelectionSelection},new D.a(this.props.keyInfos).isPresent()&&this.props.keyInfos.map((function(e){return r.a.createElement(be.a.Item,{key:e.alias,eventKey:e.alias},e.alias+" ("+e.keyAlgorithm+"-"+e.keyLength+"-bit)")}))),r.a.createElement("p",null,"selected key:",r.a.createElement(z.a,{placement:"top",overlay:r.a.createElement(q.a,null,"Add as 'kid' to JOSE-header")},r.a.createElement("span",{className:"code",style:{marginLeft:"15px",color:t?"lightgreen":"lightcoral",cursor:"pointer"},onClick:this.addKeyIdToHeader},this.state.selectedKey)))),r.a.createElement(be.a,null,r.a.createElement(we.a,{id:"signatureAlgorithms",title:"signature algorithms",onSelect:this.handleSignatureAlgorithmSelection},new D.a(this.props.jwtInfo).map((function(e){return e.signatureAlgorithms})).isPresent()&&this.props.jwtInfo.signatureAlgorithms.map((function(e){return r.a.createElement(be.a.Item,{key:e,eventKey:e},e)})))),r.a.createElement(be.a,null,r.a.createElement(we.a,{id:"keyWrapAlgorithms",title:"key wrap algorithms",onSelect:this.handleEncryptionAlgorithmSelection},new D.a(this.props.jwtInfo).map((function(e){return e.keyWrapAlgorithms})).isPresent()&&this.props.jwtInfo.keyWrapAlgorithms.map((function(e){return r.a.createElement(be.a.Item,{key:e,eventKey:e},e)})))),r.a.createElement(be.a,null,r.a.createElement(we.a,{id:"contentEncryptionAlgorithms",title:"content encryption algorithms",onSelect:this.handleContentEncryptionAlgorithmSelection},new D.a(this.props.jwtInfo).isPresent()&&this.props.jwtInfo.encryptionAlgorithms.map((function(e){return r.a.createElement(be.a.Item,{key:e,eventKey:e},e)})))),r.a.createElement(P.a,{type:"button",className:"functional-button",onClick:this.addDefaultJwtAttributes},"extend by JWT attributes"),r.a.createElement(R.a.Check,{onChange:this.handleAddSha256Thumbprint,className:"jwt sha-256-check",label:"Add SHA-256 thumbprint to header"})),r.a.createElement(I.a,{sm:9},r.a.createElement(g.a,null,r.a.createElement(x.a,null,r.a.createElement(I.a,null,r.a.createElement(R.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference},r.a.createElement(T.l,{name:"keyId",type:"hidden",value:this.state.selectedKey||"",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.j,{name:"addX5Sha256tHeader",type:"hidden",readOnly:!0,checked:this.state.addX5Sha256tHeader,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{id:"jwt-builder-header",name:"header",type:"text",as:"textarea",onChange:this.handleHeaderChange,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{id:"jwt-builder-body",name:"body",type:"text",as:"textarea",onChange:this.handleBodyChange,onError:function(t){return e.scimClient.getErrors(e.state,t)}}))),r.a.createElement(I.a,{sm:5},r.a.createElement(R.a.Control,{id:"jwt",sm:5,as:"textarea",onChange:this.handleBodyChange})))),r.a.createElement(P.a,{id:"create-jwt",type:"button",onClick:this.scimComponentBasics.onSubmit},r.a.createElement(T.q,{show:this.state.isLoading})," Create"))))}}]),a}(r.a.Component),Ce=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a("/scim/v2/JwtBuilder",n.setState),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.scimClient.getResource(null,"/scim/v2/Keystore").then((function(t){t.success&&t.resource.then((function(t){e.setState({keyInfos:t.Resources[0].keyInfos})}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(ft.Consumer,null,(function(t){return t&&r.a.createElement(S.a,{defaultActiveKey:"jwtparser",id:"uncontrolled-tab-example"},r.a.createElement(O.a,{eventKey:"jwtparser",title:"JWT Parser"},r.a.createElement(ge.a,{keyInfos:e.state.keyInfos,jwtInfo:t.jwtInfo})),r.a.createElement(O.a,{eventKey:"jwtbuilder",title:"JWT Builder"},r.a.createElement(ke,{keyInfos:e.state.keyInfos,jwtInfo:t.jwtInfo})))}))}}]),a}(r.a.Component),Se=a(185),Oe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={errors:{},clientList:[],aliases:[],currentPage:0,keyInfos:[],provider:{}},n.scimResourcePath=Y.j,n.setState=n.setState.bind(Object(h.a)(n)),n.scimClient=new N.a(n.scimResourcePath,n.setState),n.addNewClient=n.addNewClient.bind(Object(h.a)(n)),n.onUpdateSuccess=n.onUpdateSuccess.bind(Object(h.a)(n)),n.onCreateSuccess=n.onCreateSuccess.bind(Object(h.a)(n)),n.removeClient=n.removeClient.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.currentPage*this.props.serviceProviderConfig.filter.maxResults+1,a=this.props.serviceProviderConfig.filter.maxResults,n=this.props.match.params.id,r=Y.k,e.next=6,this.scimClient.getResource(n,r).then((function(e){e.success?e.resource.then((function(e){s.setState({provider:e})})):e.resource.then((function(e){s.setState({errors:{errorMessages:[e.detail]}})}))}));case 6:return e.next=8,this.scimClient.listResources({startIndex:t,count:a,sortBy:"clientId",filter:"openIDProviderId eq "+n}).then((function(e){e.resource.then((function(e){var t=new D.a(e.Resources).orElse([]),a=new D.a(s.state.clientList).orElse([]),n=ue.concat(a,t);s.setState({clientList:n,errors:{}})}))}));case 8:this.loadKeystoreInfos();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKeystoreInfos",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/scim/v2/Keystore",this.scimClient.getResource(void 0,"/scim/v2/Keystore").then((function(e){e.success?e.resource.then((function(e){t.setState({keyInfos:new D.a(e).map((function(e){return e.Resources})).map((function(e){return e[0]})).map((function(e){return e.keyInfos})).orElse([])})})):e.resource.then((function(e){t.setState({errors:{errorMessages:[e.detail]}})}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNewClient",value:function(){var e=Object(j.a)(this.state.clientList);0===e.filter((function(e){return void 0===e.id})).length?(e.unshift({}),this.setState({clientList:e,newClient:void 0,deletedClientId:void 0})):this.setState({errors:{errorMessages:["There is already a new form available in the view."]},newClient:void 0,deletedClientId:void 0})}},{key:"onCreateSuccess",value:function(e){var t=Object(j.a)(this.state.clientList),a=ue.find(t,(function(e){return void 0===e.id}));ue.merge(a,e),this.setState({providerList:t,newProvider:a,deletedClientId:void 0})}},{key:"onUpdateSuccess",value:function(e){var t=Object(j.a)(this.state.clientList),a=ue.find(t,(function(t){return t.id===e.id}));ue.merge(a,e),this.setState({clientList:t,newProxy:void 0,deletedClientId:void 0})}},{key:"removeClient",value:function(e){var t=Object(j.a)(this.state.clientList),a=t.filter((function(t){return t.id===e}))[0];ue.remove(t,(function(t){return t.id===e})),this.setState({clientList:t,newClient:void 0,deletedClientId:a.clientId,errors:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/openIdProvider/"},r.a.createElement("a",{href:"/#"},r.a.createElement("h5",{style:{height:"35px",padding:"0",paddingLeft:"10px"}},r.a.createElement(Se.a,{style:{color:"bisque"},height:"35px",size:"25px"}),r.a.createElement("span",{style:{marginLeft:"15px"}},"Back to Provider Overview")))),r.a.createElement("h5",null,"Provider: ",r.a.createElement("span",{style:{color:"lightgray"}},this.state.provider.name)),r.a.createElement("p",{className:"add-new-resource",onClick:this.addNewClient},r.a.createElement("span",{className:"add-new-resource"},"Add new Client ",r.a.createElement("br",null),r.a.createElement(le.a,null))),r.a.createElement("h2",null,r.a.createElement("span",null,"OpenID Client List")),r.a.createElement(M.a,{id:"save-alert-success",variant:"success",show:new D.a(this.state.newClient).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Client with clientId '",new D.a(this.state.newClient).map((function(e){return e.clientId})).orElse("-"),"' was successfully created")),r.a.createElement(M.a,{id:"card-list-deletion-success",variant:"success",show:new D.a(this.state.deletedClientId).isPresent()},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null),' OpenID Client "',this.state.deletedClientId,'" was successfully deleted')),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(L.a,null,this.state.clientList.map((function(t){return r.a.createElement(je,{key:new D.a(t.id).orElse("new"),provider:e.state.provider,scimResourcePath:e.scimResourcePath,client:t,keyInfos:e.state.keyInfos,onCreateSuccess:e.onCreateSuccess,onUpdateSuccess:e.onUpdateSuccess,onDeleteSuccess:e.removeClient})}))))}}]),a}(r.a.Component),je=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={showModal:!1,editMode:new D.a(e.client).map((function(e){return e.id})).map((function(e){return!1})).orElse(!0),authenticationType:e.client.authenticationType,client:JSON.parse(JSON.stringify(e.client))},r.setState=r.setState.bind(Object(h.a)(r)),r.resetEditMode=r.resetEditMode.bind(Object(h.a)(r)),r.scimClient=new N.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new de.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.client},getCurrentResource:function(){return r.state.client},setCurrentResource:function(e){return r.setState({client:e})},setState:r.setState,onCreateSuccess:r.props.onCreateSuccess,onUpdateSuccess:r.props.onUpdateSuccess,onDeleteSuccess:r.props.onDeleteSuccess}),r}return Object(m.a)(a,[{key:"resetEditMode",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scimComponentBasics.resetEditMode(),t=JSON.parse(JSON.stringify(this.props.client)),e.next=4,this.setState({client:t,authenticationType:t.authenticationType});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.keyInfos.forEach((function(e){!0===e.hasPrivateKey&&t.push(e.alias)})),r.a.createElement(G.a,{id:"client-card-"+this.state.client.id,key:this.state.client.id,border:"warning",bg:"dark",className:"resource-card client-card"},r.a.createElement(R.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference},r.a.createElement(V,{id:"delete-dialog-"+this.state.client.id,show:this.state.showModal,variant:"danger",title:"Delete OpenID Client with clientId '"+this.state.client.clientId+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.scimComponentBasics.deleteResource,cancelButtonText:"cancel",onCancel:function(){return e.scimComponentBasics.setStateValue("showModal",!1)}}),r.a.createElement(M.a,{id:"save-alert-success",variant:"success",show:new D.a(this.state.success).orElse(!1)},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," OpenID Client was successfully updated")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(G.a.Header,{id:"client-card-header-"+this.state.client.id},r.a.createElement("div",{className:"card-name-header"},r.a.createElement("div",{className:"card-name-header"},void 0!==this.state.client.clientId&&r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/openIdProvider/"+this.props.provider.id+"/client/"+this.state.client.id},r.a.createElement("a",{href:"/#"},r.a.createElement("h5",null,r.a.createElement(fe.a,{style:{color:"bisque",marginRight:"15px"},size:"20px",height:"30px"}),"Client '",this.state.client.clientId,"'"))))),r.a.createElement(T.b,{resource:this.state.client,spinner:r.a.createElement(T.q,{show:this.state.showSpinner}),editMode:this.state.editMode,createResource:this.scimComponentBasics.createResource,updateResource:this.scimComponentBasics.updateResource,resetEditMode:this.resetEditMode,edit:function(){return e.scimComponentBasics.setStateValue("editMode",!0)},showModal:function(){return e.scimComponentBasics.setStateValue("showModal",!0)}}),r.a.createElement(P.a,{id:"upload",type:"submit",hidden:!0})),r.a.createElement(G.a.Body,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{size:"sm",variant:"dark",borderless:!0,striped:!0},r.a.createElement("tbody",null,r.a.createElement(T.p,{name:"openIdProviderId",type:"number",value:this.props.provider.id,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.r,{header:"Client ID",name:"clientId",resourceId:this.state.client.id,editMode:this.state.editMode,resourceValue:this.state.client.clientId,placeholder:"The identifier for this client at its OpenID Provider",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.e,{header:"Authentication Type",name:"authenticationType",editMode:this.state.editMode,selections:["basic","jwt"],selected:new D.a(this.state.authenticationType).orElse("basic"),onChange:function(t){e.scimComponentBasics.updateInput(t.target.name,t.target.value),e.setState({authenticationType:t.target.value})},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),(void 0===this.state.authenticationType||"basic"===this.state.authenticationType)&&r.a.createElement(T.r,{header:"Client Secret",name:"clientSecret",resourceId:this.state.client.id,editMode:this.state.editMode,resourceValue:this.state.client.clientSecret,placeholder:"The password to access the OpenID Providers token endpoint",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),"jwt"===this.state.authenticationType&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.d,{header:"Signature Key Reference",name:"signingKeyRef",editMode:this.state.editMode,selections:[""].concat(t),selected:this.state.client.signingKeyRef,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(ft.Consumer,null,(function(t){return r.a.createElement(T.d,{header:"JWT Signature Algorithm",name:"signatureAlgorithm",editMode:e.state.editMode,selections:[""].concat(Object(j.a)(t.jwtInfo.signatureAlgorithms)),selected:e.state.client.signatureAlgorithm,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}})})),r.a.createElement(T.r,{header:"Audience",name:"audience",resourceId:this.state.client.audience,editMode:this.state.editMode,resourceValue:this.state.client.audience,placeholder:"audience value that should match the providers issuer-value",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.d,{header:"Decryption Key Reference",name:"decryptionKeyRef",editMode:this.state.editMode,selections:[""].concat(t),selected:this.state.client.decryptionKeyRef,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)}})),r.a.createElement(T.c,{resource:this.state.client})))))))}}]),a}(r.a.Component),Re=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;Object(d.a)(this,a);var s=(r=t.call(this,e)).props.client["urn:ietf:params:scim:schemas:captaingoldfish:2.0:HttpClientSettings"];r.state={success:!1,showSpinner:!1,settings:{},proxies:[],keyInfos:[],originalSetting:JSON.parse(JSON.stringify(s)),httpSettings:s,enableHostnameVerifier:s.useHostnameVerifier},r.setState=r.setState.bind(Object(h.a)(r));return r.scimClient=new N.a("/scim/v2/HttpClientSettings",r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new de.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return new D.a(r.state.originalSetting).orElse({})},getCurrentResource:function(){return r.state.httpSettings},setCurrentResource:function(e){return r.setState({client:e})},setState:r.setState,onCreateSuccess:function(e){return console.error("create must not be called!")},onUpdateSuccess:r.onUpdateSuccess}),r.onUpdateSuccess=r.onUpdateSuccess.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadProxies();case 2:return e.next=4,this.loadKeystoreInfos();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProxies",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/scim/v2/Proxy",e.next=3,new N.a("/scim/v2/Proxy",this.setState).listResources().then((function(e){e.success?e.resource.then((function(e){t.setState({proxies:e.Resources||[]})})):e.resource.then((function(e){t.setState({errors:{errorMessages:[e.detail]}})}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKeystoreInfos",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/scim/v2/Keystore",this.scimClient.getResource(void 0,"/scim/v2/Keystore").then((function(e){e.success?e.resource.then((function(e){t.setState({keyInfos:new D.a(e).map((function(e){return e.Resources})).map((function(e){return e[0]})).map((function(e){return e.keyInfos})).orElse([])})})):e.resource.then((function(e){t.setState({errors:{errorMessages:[e.detail]}})}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUpdateSuccess",value:function(){}},{key:"render",value:function(){var e=this,t=[];this.state.proxies.forEach((function(e){t.push({id:e.id,value:e.hostname+":"+e.port})}));var a=[];return this.state.keyInfos.forEach((function(e){!0===e.hasPrivateKey&&a.push({id:e.alias,value:e.alias+" ("+e.keyAlgorithm+"-"+e.keyLength+")"})})),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Http Client Settings for ",this.props.client.clientId),r.a.createElement(M.a,{id:"uploadForm-alert-success",variant:"success",show:this.state.success},r.a.createElement(R.a.Text,null,r.a.createElement(J.b,null)," Http Client Settings were successfully saved")),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(R.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference},r.a.createElement(T.l,{name:"id",isHidden:!0,type:"string",readOnly:!0,value:this.state.httpSettings.id,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"openIdClientReference",isHidden:!0,type:"number",readOnly:!0,value:new D.a(this.props.client.id).orElse(""),onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"requestTimeout",type:"number",label:"Request Timeout",value:this.state.httpSettings.requestTimeout,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"connectionTimeout",label:"Connection Timeout",type:"number",value:this.state.httpSettings.connectionTimeout,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.l,{name:"socketTimeout",label:"Socket Timeout",type:"number",value:this.state.httpSettings.socketTimeout,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.j,{id:"useHostnameVerifier",name:"useHostnameVerifier",label:"Enable Hostname Verifier",checked:this.state.enableHostnameVerifier,onChange:function(t){return e.setState({enableHostnameVerifier:t.target.checked})},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.m,{name:"proxyReference",label:"Proxy",selections:[""].concat(t),selected:this.state.httpSettings.proxyReference,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(T.m,{name:"tlsClientAuthAliasReference",label:"TLS Client Auth Key Reference",selections:[""].concat(a),selected:this.state.httpSettings.tlsClientAuthAliasReference,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"upload",type:"submit"},r.a.createElement(T.q,{show:this.state.isLoading})," Save")))))}}]),a}(r.a.Component),xe=a(186),Ie=a(22),Pe=a(159),Te=a(165),De=a(166),Ne=a(112),Me=a(96);function Ae(e){return r.a.createElement("div",{className:"grant-type-workflow"},r.a.createElement(Ue,{header:e.header,headerClass:e.headerClass,content:function(){return r.a.createElement(Le,{accessTokenDetails:e.accessTokenDetails})},remove:e.onRemove}))}function Ue(e){var t=Object(n.useState)(!0),a=Object(Ie.a)(t,2),s=a[0],i=a[1],o=new D.a(e.headerClass).map((function(e){return" "+e})).orElse("");return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:"collapse-header"+o,onClick:function(){i(!s)}},!0===s&&r.a.createElement(Te.a,null),!1===s&&r.a.createElement(De.a,null),e.header,void 0!==e.remove&&r.a.createElement(Ne.a,{onClick:e.remove,className:"remove-collapse"})),r.a.createElement(Me.a,{in:s},r.a.createElement(G.a,{className:"workflow-card"},r.a.createElement(G.a.Body,null,e.content()))))}function Le(e){return r.a.createElement("div",{className:"workflow-details"},r.a.createElement(Be,{accessTokenDetails:e.accessTokenDetails}),r.a.createElement(Fe,{accessTokenDetails:e.accessTokenDetails}))}function Be(e){return r.a.createElement(T.f,{header:"Access Token Request Details",variant:"workflow-details",content:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.f,{header:"Request Header",variant:"workflow-details",headerClass:"nested-workflow-details-header",bodyClass:"nested-workflow-details-body",content:function(){return r.a.createElement(Ke,{keyPrefix:"access-token-request-header-row-",nameValueList:(e.accessTokenDetails||{}).requestHeaders||[]})}}),r.a.createElement(T.f,{header:"Request Parameter",variant:"workflow-details",headerClass:"nested-workflow-details-header",bodyClass:"nested-workflow-details-body",content:function(){return r.a.createElement(Ke,{keyPrefix:"access-token-request-header-row-",nameValueList:(e.accessTokenDetails||{}).requestParams||[]})}}))}})}function Fe(e){var t=e.accessTokenDetails||{},a=t.statusCode,n=t.responseHeaders||[],s=t.plainResponse||"",i=(n.filter((function(e){return"content-type"===e.name.toLowerCase()}))[0]||[]).value;return r.a.createElement(T.f,{header:r.a.createElement("span",null,"Access Token Response Details",r.a.createElement("span",{className:"bold"}," (Status: ",a,")")),open:!0,variant:"workflow-details",content:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.f,{header:"Response Header",variant:"workflow-details",headerClass:"nested-workflow-details-header",bodyClass:"nested-workflow-details-body",content:function(){return r.a.createElement(Ke,{keyPrefix:"access-token-request-header-row-",nameValueList:n})}}),r.a.createElement(T.f,{header:"Access Token Response",open:!0,variant:"workflow-details",headerClass:"nested-workflow-details-header",content:function(){return r.a.createElement(Je,{contentType:i,tokenResponse:s})}}))}})}function Ke(e){return r.a.createElement(r.a.Fragment,null,e.nameValueList.map((function(t,a){return r.a.createElement(x.a,{key:e.keyPrefix+a},r.a.createElement(I.a,{sm:2},t.name),r.a.createElement(I.a,{sm:10},t.value))})))}var Je=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={errorMessages:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.parseJsonContent()}},{key:"parseJsonContent",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(this.props.contentType||"").toLowerCase().includes("application/json");try{(a={}).json=JSON.parse(this.props.tokenResponse),t||(a.errorMessages=[].concat(Object(j.a)(this.state.errorMessages),["Found invalid content-type: "+this.props.contentType+". Response is valid JSON but content-type header does not match."])),this.setState(a)}catch(n){console.error(n),t&&this.setState({errorMessages:[].concat(Object(j.a)(this.state.errorMessages),["Expected content to be JSON but could not parse it",n.message])})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"access-token-response-container"},this.state.errorMessages.length>0&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement("ul",{className:"error-list"},this.state.errorMessages.map((function(e,t){return r.a.createElement(T.g,{key:"error-message-"+t,message:e})})))),this.state.json&&Object.keys(this.state.json).map((function(t,a){return r.a.createElement(x.a,{key:"access-token-response-json-param-"+a},r.a.createElement(I.a,{sm:2},t),r.a.createElement(I.a,{sm:10}," ",e.state.json[t]," "))})),!this.state.json&&r.a.createElement(x.a,{key:"access-token-response-json-param-_"},r.a.createElement(I.a,{sm:2},"access_token"),r.a.createElement(I.a,{sm:10}," ",this.props.tokenResponse," ")))}}]),a}(r.a.Component),qe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(h.a)(n)),n.forceUpdate=n.forceUpdate.bind(Object(h.a)(n)),n.loadAuthorizationQueryParameterView=n.loadAuthorizationQueryParameterView.bind(Object(h.a)(n)),n.getAuthRequestStatus=n.getAuthRequestStatus.bind(Object(h.a)(n)),n.loadAuthorizationCodeResponseDetailsView=n.loadAuthorizationCodeResponseDetailsView.bind(Object(h.a)(n)),n.retrieveAccessTokenDetails=n.retrieveAccessTokenDetails.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}},{key:"componentDidMount",value:function(){var e=this.getAuthRequestStatus;window.open(this.props.requestDetails.authorizationCodeGrantUrl,"_blank","location=yes,height=570,width=520,scrollbars=yes,status=yes"),this.state.interval=setInterval((function(){e()}),2e3)}},{key:"getAuthRequestStatus",value:function(){var e=new N.a(Y.b,this.setState),t=Object.fromEntries(new URL(this.props.requestDetails.authorizationCodeGrantUrl).searchParams).state,a=this.state,n=this.setState;e.getResource(t).then((function(e){e.success&&e.resource.then((function(e){clearInterval(a.interval),delete a.interval,n({authorizationResponseUrl:e.authorizationResponseUrl})}))}))}},{key:"loadAuthorizationQueryParameterView",value:function(){var e=this,t=Object.fromEntries(new URL(this.props.requestDetails.authorizationCodeGrantUrl).searchParams),a=void 0===this.state.authorizationResponseUrl;return r.a.createElement("div",{className:"workflow-details"},r.a.createElement(M.a,{variant:"info",show:a},r.a.createElement(Pe.a,null)," The authorization code grant will try to open a new browser window. Make sure your popup blocker does not block this. If you closed this window before finishing the login process. Close this workflow and start again."),r.a.createElement(T.f,{header:"Authorization Request Details",variant:"workflow-details",content:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null,r.a.createElement(I.a,{sm:2,className:"url-base-value"},"authCodeUrl"),r.a.createElement(I.a,{sm:10,className:"url-base-value"},e.props.requestDetails.authorizationCodeGrantUrl)),Object.keys(t).map((function(e,a){return r.a.createElement(x.a,{key:"auth-code-request-row-"+a},r.a.createElement(I.a,{sm:2},e),r.a.createElement(I.a,{sm:10},t[e]))})))}}))}},{key:"retrieveAccessTokenDetails",value:function(e){var t=this;e.preventDefault();var a=new N.a(Y.a,this.setState),n=new URL(this.state.authorizationResponseUrl),r=Object.fromEntries(n.searchParams),s=Object.fromEntries(new URL(this.props.requestDetails.authorizationCodeGrantUrl).searchParams),i={grantType:"authorization_code",openIdClientId:parseInt(this.props.client.id),redirectUri:s.redirect_uri,authorizationCode:r.code};a.createResource(i).then((function(e){e.success&&e.resource.then((function(e){t.setState({accessTokenDetails:e})}))}))}},{key:"loadAuthorizationCodeResponseDetailsView",value:function(){var e=this;if(!this.state.authorizationResponseUrl)return null;var t=new URL(this.state.authorizationResponseUrl),a=Object.fromEntries(t.searchParams),n=this.state.errors||{};return r.a.createElement("div",{className:"workflow-details"},r.a.createElement(r.a.Fragment,null,r.a.createElement(T.f,{header:"Authorization Response Details",open:!0,variant:"workflow-details",content:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null,r.a.createElement(I.a,{sm:2,className:"url-base-value"},"authResponseUrl"),r.a.createElement(I.a,{sm:10,className:"url-base-value"},e.state.authorizationResponseUrl)),Object.keys(a).map((function(e,t){return r.a.createElement(x.a,{key:"auth-code-response-row-"+t},r.a.createElement(I.a,{sm:2},e),r.a.createElement(I.a,{sm:10},a[e]))})))}}),r.a.createElement(P.a,{type:"submit",onClick:function(t){e.setState({isLoading:!0}),e.retrieveAccessTokenDetails(t)},style:{marginTop:"15px",marginBottom:"15px"}},r.a.createElement(T.q,{show:this.state.isLoading})," Get Access Token"),this.state.accessTokenDetails&&r.a.createElement(Le,{accessTokenDetails:this.state.accessTokenDetails}),r.a.createElement(T.a,{variant:"danger",icon:r.a.createElement(J.a,null),messages:n.errorMessages||new D.a(n.detail).map((function(e){return[e]})).orElse([])})))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"grant-type-workflow"},r.a.createElement(Ge,{isLoading:void 0===this.state.authorizationResponseUrl,content:function(){return r.a.createElement(r.a.Fragment,null,e.loadAuthorizationQueryParameterView(),e.loadAuthorizationCodeResponseDetailsView())},remove:this.props.onRemove}))}}]),a}(r.a.Component);function Ge(e){var t=Object(n.useState)(!0),a=Object(Ie.a)(t,2),s=a[0],i=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:"collapse-header authorization-code-grant",variant:"dark",onClick:function(){i(!s)}},!0===s&&r.a.createElement(Te.a,null),!1===s&&r.a.createElement(De.a,null),r.a.createElement("span",null,r.a.createElement(T.q,{show:e.isLoading})," Authorization Code Grant/Flow"),void 0!==e.remove&&r.a.createElement(Ne.a,{onClick:e.remove,className:"remove-collapse"})),r.a.createElement(Me.a,{in:s},r.a.createElement(G.a,{className:"workflow-card"},r.a.createElement(G.a.Body,null,e.content()))))}var ze=function(){function e(t){Object(d.a)(this,e),this.scimClient=new N.a(Y.f,t)}return Object(m.a)(e,[{key:"updateAuthCodeSettings",value:function(e,t,a,n){var r={authCodeParameters:{redirectUri:t,queryParameters:a}};this.patchResource(e,r,n)}},{key:"updateClientCredentialsSettings",value:function(e,t,a){var n={clientCredentialsParameters:{scope:t}};this.patchResource(e,n,a)}},{key:"updateResourceOwnerPasswordCredentialsSettings",value:function(e,t,a,n,r){var s={resourceOwnerPasswordParameters:{username:t,password:a,scope:n}};this.patchResource(e,s,r)}},{key:"patchResource",value:function(e,t,a){var n={schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"],Operations:[{op:"replace",value:t}]};this.scimClient.patchResource(n,e).then((function(e){e.success&&e.resource.then((function(t){new D.a(a).ifPresent((function(a){return a(t,e.status)}))}))}))}}]),e}(),Ve=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e,r){var s;return Object(d.a)(this,a),(s=t.call(this,e,r)).authCodeGrantType="authorization_code",s.clientCredentialsGrantType="client_credentials",s.resourceOwnerGrantType="password",s.state={authenticationType:s.authCodeGrantType,workflowDetails:s.props.client[Y.g]||{},isLoading:!1,responseDetails:[]},s.formReference=Object(n.createRef)(),s.resetRedirectUri=s.resetRedirectUri.bind(Object(h.a)(s)),s.handleNestedElementChange=s.handleNestedElementChange.bind(Object(h.a)(s)),s.handleGrantTypeResponseDetails=s.handleGrantTypeResponseDetails.bind(Object(h.a)(s)),s.removeGrantTypeDetails=s.removeGrantTypeDetails.bind(Object(h.a)(s)),s}return Object(m.a)(a,[{key:"resetRedirectUri",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=this.state,ue.set(a,"workflowDetails.authCodeParameters.redirectUri",this.props.originalRedirectUri),this.setState(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleGrantTypeResponseDetails",value:function(e,t){var a=this.state.responseDetails||[];t.grantType=e,a.unshift(t);var n={};n.responseDetails=a,this.setState(n)}},{key:"handleNestedElementChange",value:function(e,t){var a=this.state.workflowDetails;ue.set(a,e,t),this.setState({workflowDetails:a})}},{key:"removeGrantTypeDetails",value:function(e){var t=this.state.responseDetails,a=t.indexOf(e);t.splice(a,1);var n={};n.responseDetails=t,this.setState(n)}},{key:"render",value:function(){var e=this,t=[{value:this.authCodeGrantType,display:"Authorization Code Grant/Flow"},{value:this.clientCredentialsGrantType,display:"Client Credentials Grant"},{value:this.resourceOwnerGrantType,display:"Resource Owner Password Credentials Grant"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"OpenID Connect Workflow"),r.a.createElement(T.i,{errors:this.state.errors}),r.a.createElement(R.a,{ref:this.formReference,onSubmit:function(e){return e.preventDefault()}},r.a.createElement(T.n,{name:"authenticationType",label:"AuthenticationType Type",displayType:"vertical",selected:this.state.authenticationType,selections:t,onChange:function(t){return e.setState({authenticationType:t.target.value})},onError:function(){}}),this.state.authenticationType===this.authCodeGrantType&&r.a.createElement(We,{formReference:this.formReference,originalRedirectUri:this.props.originalRedirectUri,workflowDetails:this.state.workflowDetails,isLoading:this.state.isLoading,handleChange:this.handleNestedElementChange,resetRedirectUri:this.resetRedirectUri,handleResponse:function(t){return e.handleGrantTypeResponseDetails(e.authCodeGrantType,t)},onError:function(){}}),this.state.authenticationType===this.clientCredentialsGrantType&&r.a.createElement(_e,{formReference:this.formReference,workflowDetails:this.state.workflowDetails,client:this.props.client,isLoading:this.state.isLoading,handleChange:this.handleNestedElementChange,handleResponse:function(t){return e.handleGrantTypeResponseDetails(e.clientCredentialsGrantType,t)},onError:function(){}}),this.state.authenticationType===this.resourceOwnerGrantType&&r.a.createElement(Qe,{client:this.props.client,workflowDetails:this.state.workflowDetails,isLoading:this.state.isLoading,handleChange:this.handleNestedElementChange,handleResponse:function(t){return e.handleGrantTypeResponseDetails(e.state.authenticationType,t)},onError:function(){}})),(this.state.responseDetails||[]).map((function(t){return r.a.createElement(He,{key:"response-details-"+t.id,responseDetails:t,client:e.props.client,removeGrantTypeDetails:e.removeGrantTypeDetails})})))}}]),a}(r.a.Component);function He(e){var t=e.responseDetails;return"authorization_code"===t.grantType?r.a.createElement(r.a.Fragment,{key:"authorization_code-"+t.id},r.a.createElement(qe,{client:e.client,requestDetails:t,onRemove:function(){return e.removeGrantTypeDetails(t)}})):"client_credentials"===t.grantType?r.a.createElement(r.a.Fragment,{key:"client_credentials-"+t.id},r.a.createElement(Ae,{header:"Client Credentials Grant",headerClass:"client-credentials-grant",accessTokenDetails:t,onRemove:function(){return e.removeGrantTypeDetails(t)}})):r.a.createElement(r.a.Fragment,{key:"password-"+t.id},r.a.createElement(Ae,{header:"Resource Owner Password Credentials Grant",headerClass:"resource-owner-password-credentials-grant",accessTokenDetails:t,onRemove:function(){return e.removeGrantTypeDetails(t)}}))}var We=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={intervals:[],requestDetails:[]},n.setState=n.setState.bind(Object(h.a)(n)),n.forceUpdate=n.forceUpdate.bind(Object(h.a)(n)),n.loadAuthorizationRequestDetails=n.loadAuthorizationRequestDetails.bind(Object(h.a)(n)),n.patchWorkflowSettings=n.patchWorkflowSettings.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this.state.requestDetails.forEach((function(e){void 0!==e.interval&&clearInterval(e.interval)}))}},{key:"loadAuthorizationRequestDetails",value:function(e){var t=this;e.preventDefault(),this.patchWorkflowSettings(),this.setState({getAuthcode:!0,errorMessage:void 0});var a=new N.a(Y.b,this.setState),n=a.getResourceFromFormReference(this.props.formReference);n[Y.g]=this.props.workflowDetails;var r=this.props.handleResponse;a.createResource(n).then((function(e){t.setState({getAuthcode:!1}),e.success?e.resource.then((function(e){r(e)})):e.resource.then((function(e){t.setState({errorMessage:e.detail})}))}))}},{key:"patchWorkflowSettings",value:function(){var e=new ze(this.setState),t=new D.a(this.props.workflowDetails).map((function(e){return e.openIdClientId})).orElse(void 0),a=new D.a(this.props.workflowDetails).map((function(e){return e.authCodeParameters})).map((function(e){return e.redirectUri})).orElse(void 0),n=new D.a(this.props.workflowDetails).map((function(e){return e.authCodeParameters})).map((function(e){return e.queryParameters})).orElse(void 0);e.updateAuthCodeSettings(t,a,n)}},{key:"render",value:function(){var e=this,t=this.props.workflowDetails.authCodeParameters||{redirectUri:this.props.originalRedirectUri};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.l,{name:"authCodeParameters.redirectUri",label:"Redirect URI",placeholder:"The redirect uri that is added to the request parameters",value:t.redirectUri,onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}},r.a.createElement("a",{href:"/#",onClick:this.props.resetRedirectUri,className:"action-link"},r.a.createElement(xe.a,null)," ",r.a.createElement("span",null,"reset redirect uri"))),r.a.createElement(T.l,{name:"authCodeParameters.queryParameters",label:"Additional URL Query",value:t.queryParameters,placeholder:"add an optional query string that is appended to the request URL",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{type:"submit",onClick:this.loadAuthorizationRequestDetails},r.a.createElement(T.q,{show:this.state.getAuthcode})," Get Authorization Code"),this.state.errorMessage&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement("small",{className:"error"},r.a.createElement(J.a,null)," ",this.state.errorMessage)))))}}]),a}(r.a.Component),_e=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(h.a)(n)),n.retrieveAccessTokenDetails=n.retrieveAccessTokenDetails.bind(Object(h.a)(n)),n.patchWorkflowSettings=n.patchWorkflowSettings.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"retrieveAccessTokenDetails",value:function(e){var t=this;e.preventDefault(),this.patchWorkflowSettings(),this.setState({accessingToken:!0});var a=new N.a(Y.a,this.setState),n=new D.a(this.props.workflowDetails).map((function(e){return e.clientCredentialsParameters})).map((function(e){return e.scope})).orElse(void 0),r={grantType:"client_credentials",openIdClientId:parseInt(this.props.client.id),scope:n},s=this.props.handleResponse;a.createResource(r).then((function(e){t.setState({accessingToken:!1}),e.success&&e.resource.then((function(e){s(e)}))}))}},{key:"patchWorkflowSettings",value:function(){var e=new ze(this.setState),t=new D.a(this.props.workflowDetails).map((function(e){return e.openIdClientId})).orElse(void 0),a=new D.a(this.props.workflowDetails).map((function(e){return e.clientCredentialsParameters})).map((function(e){return e.scope})).orElse(void 0);e.updateClientCredentialsSettings(t,a)}},{key:"render",value:function(){var e=this,t=this.props.workflowDetails.clientCredentialsParameters||{},a=this.state.errors||{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.l,{name:"clientCredentialsParameters.scope",label:"Scope",value:t.scope||"",placeholder:"The scope to access from the identity provider",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"upload",type:"submit",onClick:this.retrieveAccessTokenDetails},r.a.createElement(T.q,{show:this.state.accessingToken})," Get Access Token"),r.a.createElement(T.a,{variant:"danger",icon:r.a.createElement(J.a,null),messages:a.errorMessages||new D.a(a.detail).map((function(e){return[e]})).orElse([])}))))}}]),a}(r.a.Component),Qe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(h.a)(n)),n.retrieveAccessTokenDetails=n.retrieveAccessTokenDetails.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"retrieveAccessTokenDetails",value:function(e){var t=this;e.preventDefault(),this.patchWorkflowSettings(),this.setState({accessingToken:!0});var a=new N.a(Y.a,this.setState),n=this.props.workflowDetails.resourceOwnerPasswordParameters||{},r=n.username||"",s=n.password||"",i=n.scope||"",o={grantType:"password",openIdClientId:parseInt(this.props.client.id),username:r,password:s,scope:i},c=this.props.handleResponse;a.createResource(o).then((function(e){t.setState({accessingToken:!1}),e.success&&e.resource.then((function(e){c(e)}))}))}},{key:"patchWorkflowSettings",value:function(){var e=new ze(this.setState),t=new D.a(this.props.workflowDetails).map((function(e){return e.openIdClientId})).orElse(void 0),a=this.props.workflowDetails.resourceOwnerPasswordParameters||{},n=a.username||"",r=a.password||"",s=a.scope||"";e.updateResourceOwnerPasswordCredentialsSettings(t,n,r,s)}},{key:"render",value:function(){var e=this,t=this.props.workflowDetails.resourceOwnerPasswordParameters||{},a=t.username||"",n=t.password||"",s=t.scope||"",i=this.state.errors||{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.l,{name:"resourceOwnerPasswordParameters.username",label:"Username",value:a,placeholder:"the username to authenticate",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),r.a.createElement(T.l,{name:"resourceOwnerPasswordParameters.password",label:"Password",placeholder:"the users password",value:n,onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),r.a.createElement(T.l,{name:"resourceOwnerPasswordParameters.scope",label:"Scope",value:s,placeholder:"The scope to access from the identity provider",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),r.a.createElement(R.a.Group,{as:x.a},r.a.createElement(I.a,{sm:{span:10,offset:2}},r.a.createElement(P.a,{id:"upload",type:"submit",onClick:this.retrieveAccessTokenDetails},r.a.createElement(T.q,{show:this.state.accessingToken})," Get Access Token"),r.a.createElement(T.a,{variant:"danger",icon:r.a.createElement(J.a,null),messages:i.errorMessages||new D.a(i.detail).map((function(e){return[e]})).orElse([])}))))}}]),a}(r.a.Component),Xe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.providerId,a=this.props.match.params.clientId,"/scim/v2/OpenIdProvider",new N.a("/scim/v2/OpenIdProvider",this.setState).getResource(t).then((function(e){e.success?e.resource.then((function(e){n.setState({provider:e})})):e.resource.then((function(e){n.setState({errors:{errorMessages:[e.detail]}})}))})),"/scim/v2/OpenIdClient",new N.a("/scim/v2/OpenIdClient",this.setState).getResource(a).then((function(e){e.success?e.resource.then((function(e){n.setState({client:e})})):e.resource.then((function(e){n.setState({errors:{errorMessages:[e.detail]}})}))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=new D.a(this.state.provider),a=new D.a(this.state.client);return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/openIdProvider/"+this.props.match.params.providerId+"/openIdClients"},r.a.createElement("a",{href:"/#"},r.a.createElement("h5",{style:{height:"35px",padding:"0",paddingLeft:"10px"}},r.a.createElement(Se.a,{style:{color:"bisque"},height:"35px",size:"25px"}),r.a.createElement("span",{style:{marginLeft:"15px"}},"Back to",r.a.createElement("span",{style:{color:"lightgray"}},' "',t.map((function(e){return e.name})).orElse(""),'" '),"Overview")))),r.a.createElement("h5",null,"Client: ",r.a.createElement("span",{style:{color:"lightgray"}},a.map((function(e){return e.clientId})).orElse(""))),r.a.createElement(S.a,{defaultActiveKey:"workflow",id:"uncontrolled-tab-example"},r.a.createElement(O.a,{eventKey:"workflow",title:"OpenID Workflow"},new D.a(this.state.client).isPresent()&&r.a.createElement(ft.Consumer,null,(function(t){return r.a.createElement(Ve,{client:e.state.client,originalRedirectUri:t.authCodeRedirectUri})}))),r.a.createElement(O.a,{eventKey:"clients",title:"HTTP Settings"},new D.a(this.state.client).isPresent()&&r.a.createElement(Re,{client:this.state.client}))))}}]),a}(r.a.Component),Ye=function(){function e(){Object(d.a)(this,e),this.scimClient=new N.a(Y.m,(function(){}))}return Object(m.a)(e,[{key:"createCategory",value:function(e,t,a){var n={schemas:[Y.n],name:e};this.scimClient.createResource(n).then((function(e){e.success?e.resource.then((function(e){t(e)})):e.resource.then((function(e){a(e)}))}))}},{key:"listCategories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,a=e.filter,n=e.sortBy,r=e.sortOrder,s=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o={schemas:[Y.l],sortBy:n,sortOrder:r||"ascending",filter:a,startIndex:t};this.scimClient.listResourcesWithPost(o,s,i)}},{key:"updateCategory",value:function(e,t,a,n){var r={schemas:[Y.n],name:t};this.scimClient.updateResource(r,e).then((function(e){e.success?e.resource.then((function(e){a(e)})):e.resource.then((function(e){n(e)}))}))}},{key:"deleteCategory",value:function(e,t,a){this.scimClient.deleteResource(e.id).then((function(n){n.success?t(e):n.resource.then((function(e){a(e)}))}))}}]),e}(),Ze=a(195),$e=a(188),et=a(162),tt=a(161),at=a(187),nt=function(){function e(){Object(d.a)(this,e),this.scimClient=new N.a(Y.o,(function(){}))}return Object(m.a)(e,[{key:"createTokenStore",value:function(e,t,a,n,r){var s={schemas:[Y.p],name:e,token:t,categoryId:a};this.scimClient.createResource(s).then((function(e){e.success?e.resource.then((function(e){n(e)})):e.resource.then((function(e){r(e)}))}))}},{key:"listTokenStores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,a=e.filter,n=e.sortBy,r=e.sortOrder,s=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o={schemas:[Y.l],sortBy:n,sortOrder:r||"ascending",filter:a,startIndex:t};this.scimClient.listResourcesWithPost(o,s,i)}},{key:"updateTokenStore",value:function(e,t,a,n,r,s){var i={schemas:[Y.p],name:t,token:a,categoryId:n};this.scimClient.updateResource(i,e).then((function(e){e.success?e.resource.then((function(e){r(e)})):e.resource.then((function(e){s(e)}))}))}},{key:"deleteTokenStore",value:function(e,t,a){this.scimClient.deleteResource(e.id).then((function(n){n.success?t(e):n.resource.then((function(e){a(e)}))}))}},{key:"bulkDeleteTokenStores",value:function(e,t,a,n){function r(e){var t={schemas:[Y.d],Operations:e};fetch(Y.c,{method:"POST",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){200===e.status?e.json().then((function(e){var t=e.Operations,n=[],r=[];t.forEach((function(e){204===e.status?n.push(e.bulkId):r.push(e.bulkId)})),a(n,r)})):e.json().then((function(e){n(e)}))}))}for(var s=[],i=0;i<e.length;i++){var o=e[i];s.push({method:"DELETE",bulkId:o.id,path:"/TokenStore/"+o.id}),s.length===t&&(r(Object(j.a)(s)),s=[])}s.length>0&&r(s)}}]),e}(),rt=a(189),st=a(190),it=a(191);function ot(e){var t=Object(n.useState)({}),a=Object(Ie.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)(!1),c=Object(Ie.a)(o,2),l=c[0],u=c[1],d=Object(n.useState)(0),m=Object(Ie.a)(d,2),h=m[0],p=m[1],f=Object(n.useState)([]),v=Object(Ie.a)(f,2),E=v[0],y=v[1];function g(t){var a=Object(j.a)(E).concat(t);a.sort((function(e,t){return e.name.localeCompare(t.name)})),p(h+t.length),y(a),e.setCategoryEntires(e.category,h+t.length)}return Object(n.useEffect)((function(){u(!1),p(0),y([])}),[e.filter]),Object(n.useEffect)((function(){var t={startIndex:E.length,filter:new D.a(e.filter).map((function(e){return e.trim()})).map((function(e){return 0===e.length?void 0:e})).map((function(t){return'token co "'+t+'" and categoryId eq '+e.category.id})).orElse("categoryId eq "+e.category.id),sortBy:"name"};(0===h&&!l||E.length<h)&&(new nt).listTokenStores(t,(function(e){p(e.totalResults);var t=e.Resources||[];g(Object(j.a)(t)),u(!0)}),(function(e){i(e)}))}),[E]),r.a.createElement(r.a.Fragment,null,s&&s.length>0&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement(J.a,null)," ",s.details),r.a.createElement(ct,{category:e.category,tokenStoreList:E,addNewTokenStores:g,updateTokenStore:function(e,t){var a=Object(j.a)(E),n=a.indexOf(e);a.splice(n,1,t),a.sort((function(e,t){return e.name.localeCompare(t.name)})),y(a)},removeTokenStore:function(t){var a=Object(j.a)(E);t.forEach((function(e){var t=a.indexOf(e);a.splice(t,1)})),p(h-t.length),y(a),e.setCategoryEntires(e.category,h-t.length)},toggleSingleCeckbox:function(e,t){t.checked=e;var a=Object(j.a)(E),n=a.indexOf(t);a.splice(n,1,t),y(a)},toggleAllCheckboxes:function(e){var t=Object(j.a)(E);t.forEach((function(t){t.checked=e})),y(t)}}))}function ct(e){var t=Object(n.useState)(),a=Object(Ie.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)(!1),c=Object(Ie.a)(o,2),l=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(Ie.a)(d,2),h=m[0],p=m[1],f=Object(n.useContext)(vt);function v(t){(new nt).deleteTokenStore(t[0],(function(){e.removeTokenStore(t)}),(function(e){i(e)}))}return r.a.createElement(r.a.Fragment,null,s&&s.length>0&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement(J.a,null)," ",s.detail),r.a.createElement(ce.a,{striped:!0,bordered:!0,hover:!0,size:"sm",variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"checkbox-column"},r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.toggleAllCheckboxes(t.target.checked)}})),r.a.createElement("th",{className:"token-store-id-column"},"id"),r.a.createElement("th",{className:"token-store-name-column"},"name"),r.a.createElement("th",null,"token"),r.a.createElement("th",{className:"timestamp-column"},"timestamps"),r.a.createElement("th",{className:"icon-column"},!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(at.a,{className:"listed-icon icon",onClick:function(){return p(!0)}}),r.a.createElement($e.a,{className:"icon",onClick:function(){return u(!0)}})),l&&r.a.createElement("span",{className:"list-delete-insertion"},"sure? ",r.a.createElement(rt.a,{className:"listed-icon icon",onClick:function(){return function(){var t=e.tokenStoreList.filter((function(e){return e.checked}));(new nt).bulkDeleteTokenStores(t,f.bulk.maxOperations,(function(a,n){var r=t.filter((function(e){return a.includes(e.id)}));e.removeTokenStore(r),u(!1)}),(function(e){i(e),u(!1)}))}()}}),r.a.createElement(Ne.a,{className:"icon",onClick:function(){return u(!1)}}))))),r.a.createElement("tbody",null,h&&r.a.createElement(lt,{tokenStore:{id:0,categoryId:parseInt(e.category.id)},editMode:!0,addNewTokenStores:function(t){p(!1),e.addNewTokenStores(t)},removeTokenStore:function(){return p(!1)}}),e.tokenStoreList.map((function(t){return r.a.createElement(lt,{key:t.id,tokenStore:t,toggleSingleCeckbox:e.toggleSingleCeckbox,addNewTokenStores:e.addNewTokenStores,updateTokenStore:e.updateTokenStore,removeTokenStore:v})})))))}function lt(e){var t=Object(n.useState)(),a=Object(Ie.a)(t,2),s=(a[0],a[1]),i=Object(n.useState)(!1),o=Object(Ie.a)(i,2),c=o[0],l=o[1],u=Object(n.useState)(e.editMode),d=Object(Ie.a)(u,2),m=d[0],h=d[1],p=Object(n.useState)(!1),f=Object(Ie.a)(p,2),v=f[0],E=f[1],y=Object(n.useState)(e.tokenStore.token||""),g=Object(Ie.a)(y,2),b=g[0],w=g[1],k=Object(n.useState)(e.tokenStore.name||""),C=Object(Ie.a)(k,2),S=C[0],O=C[1];function j(e){s(e)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:e.tokenStore.checked||!1,onChange:function(t){return e.toggleSingleCeckbox(t.target.checked,e.tokenStore)}})),r.a.createElement("td",null,e.tokenStore.id),r.a.createElement("td",null,!m&&S,m&&r.a.createElement("input",{type:"text",value:S,onChange:function(e){return O(e.target.value)}})),r.a.createElement("td",{className:"overflow-column"},!m&&r.a.createElement(r.a.Fragment,null,!v&&r.a.createElement("article",{className:"token-overview-short"},b),v&&r.a.createElement("textarea",{className:"token-overview",readOnly:!0,value:b}),!v&&r.a.createElement(st.a,{className:"right-floating-icon eye-icon",onClick:function(){return E(!v)}}),v&&r.a.createElement(it.a,{className:"right-floating-icon eye-icon",onClick:function(){return E(!v)}})),m&&r.a.createElement("textarea",{value:b,onChange:function(e){return w(e.target.value)},className:"token-area",wrap:"off"})),r.a.createElement("td",null,r.a.createElement("span",null,"created: ",new D.a(e.tokenStore.meta).map((function(e){return e.created})).map((function(e){return new Date(e).toLocaleString()})).orElse(null)),r.a.createElement("br",null),r.a.createElement("span",null,"modified: ",new D.a(e.tokenStore.meta).map((function(e){return e.lastModified})).map((function(e){return new Date(e).toLocaleString()})).orElse(null))),r.a.createElement("td",null,!c&&r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement(et.a,{onClick:function(){return h(!m)},className:"listed-icon icon"}),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,{className:"listed-icon icon",onClick:function(){0===e.tokenStore.id?(s(null),(new nt).createTokenStore(S,b,e.tokenStore.categoryId,(function(t){h(!1),e.addNewTokenStores([t])}),j)):(s(null),e.tokenStore.name!==S||e.tokenStore.token!==b?(new nt).updateTokenStore(e.tokenStore.id,S,b,e.tokenStore.categoryId,(function(t){h(!1),e.updateTokenStore(e.tokenStore,t)}),j):h(!1))}}),r.a.createElement(Ne.a,{className:"listed-icon icon",onClick:function(){return O(e.tokenStore.name),w(e.tokenStore.token),void h(!1)}})),r.a.createElement($e.a,{onClick:function(){return l(!0)},className:"icon"})),c&&r.a.createElement("span",{className:"list-delete-insertion"},"sure? ",r.a.createElement(rt.a,{className:"listed-icon icon",onClick:function(){l(!1),e.removeTokenStore([e.tokenStore])}}),r.a.createElement(Ne.a,{className:"listed-icon icon",onClick:function(){return l(!1)}})))))}function ut(){var e=Object(n.useState)({}),t=Object(Ie.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),o=Object(Ie.a)(i,2),c=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(Ie.a)(u,2),m=d[0],h=d[1],p=Object(n.useState)(0),f=Object(Ie.a)(p,2),v=f[0],E=f[1],y=Object(n.useState)([]),g=Object(Ie.a)(y,2),b=g[0],w=g[1],k=Object(n.useState)([]),C=Object(Ie.a)(k,2);C[0],C[1];function S(e){var t=[].concat(Object(j.a)(b),Object(j.a)(e));t.sort((function(e,t){return e.name.localeCompare(t.name)})),w(t)}function T(e,t){var a=Object(j.a)(b),n=a.indexOf(e);a.splice(n,1,t),w(Object(j.a)(a))}function D(e){var t=Object(j.a)(b),a=t.indexOf(e);t.splice(a,1),E(v-1),w(Object(j.a)(t))}function N(e,t){e.numberOfEntries=t;var a=Object(j.a)(b);w(Object(j.a)(a))}return Object(n.useEffect)((function(){var e={startIndex:b.length,sortBy:"name"};(0===v&&!m||b.length<v)&&(new Ye).listCategories(e,(function(e){E(e.totalResults);var t=e.Resources||[];S(Object(j.a)(t)),h(!0)}),(function(e){s(e)}))}),[b]),Object(n.useEffect)((function(){}),[c]),r.a.createElement(r.a.Fragment,null,a&&a.length>0&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement(R.a.Text,null,JSON.stringify(a))),r.a.createElement(O.a.Container,{id:"list-group-tabs-example"},r.a.createElement(x.a,null,r.a.createElement(I.a,{sm:3},r.a.createElement("h5",null,"found a total of ",v," categories")),r.a.createElement(I.a,null,r.a.createElement("div",{className:"filter-block"},r.a.createElement("span",null,r.a.createElement("span",null,"search for token part: "),r.a.createElement("input",{id:"filter-input",onKeyUp:function(e){"Enter"===e.key&&l(document.getElementById("filter-input").value)}}),r.a.createElement(P.a,{onClick:function(e){return l(document.getElementById("filter-input").value)}},"search"))))),r.a.createElement(x.a,null,r.a.createElement(I.a,{sm:3},r.a.createElement(Ze.a,null,r.a.createElement(pt,{addToTokenCategoryList:function(e){E(v+1),S([e])}}),b&&b.map((function(e){return r.a.createElement(dt,{key:e.id,category:e,updateCategory:T,removeCategory:D})})))),r.a.createElement(I.a,{sm:9},r.a.createElement(O.a.Content,null,b&&b.map((function(e){return r.a.createElement(O.a.Pane,{key:e.id,eventKey:"#"+e.id},r.a.createElement(ot,{category:e,filter:c,setCategoryEntires:N}))})))))))}function dt(e){var t=Object(n.useState)({}),a=Object(Ie.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)(!1),c=Object(Ie.a)(o,2),l=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(Ie.a)(d,2),h=m[0],p=m[1],f=Object(n.useState)(e.category.name),v=Object(Ie.a)(f,2),E=v[0],y=v[1];function g(){i(null),e.category.name!==E&&(new Ye).updateCategory(e.category.id,E,(function(t){e.updateCategory(e.category,t)}),(function(e){return i(e)}))}var b=e.category.numberOfEntries||0;return r.a.createElement(Ze.a.Item,{variant:0===b?"dark":"light",action:!0,href:"#"+e.category.id,onKeyDown:function(e){return l&&e.stopPropagation()}},r.a.createElement(fe.a,{style:{margin:"0 10px 0 0"}}),!l&&r.a.createElement(r.a.Fragment,null,E," [",b,"]"),l&&r.a.createElement("input",{type:"text",className:"listed-category-header-input",value:E,onChange:function(e){return y(e.target.value)},onKeyUp:function(t){"Enter"===t.key?(g(),u(!l)):"Escape"===t.key&&(y(e.category.name),u(!1))}}),r.a.createElement($e.a,{className:"add-list-item-icon delete-icon",onClick:function(){return p(!h)}}),l&&r.a.createElement(Ne.a,{className:"add-list-item-icon abort-icon listed-icon",onClick:function(){y(e.category.name),u(!1)}}),r.a.createElement(ht,{editMode:l,classNames:"add-list-item-icon edit-icon listed-icon",onClick:function(){l&&(e.category.name=E,g()),u(!l)}}),h&&r.a.createElement(mt,{deleteMode:h,setDeleteMode:p,deleteCategory:function(){i(null),(new Ye).deleteCategory(e.category,(function(t){e.removeCategory(t)}),(function(e){return i(e)}))}}),s&&s.detail&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement(R.a.Text,null,r.a.createElement(J.a,null)," ",s.detail)))}function mt(e){return r.a.createElement("div",{className:"list-delete-insertion"},r.a.createElement("div",{className:"list-delete-text"},"delete category?"),r.a.createElement(P.a,{variant:"danger",className:"listed-icon list-button",onClick:function(){e.deleteCategory(),e.setDeleteMode(!1)}},"Yes"),r.a.createElement(P.a,{variant:"secondary",className:"listed-icon",onClick:function(){e.setDeleteMode(!1)}},"No"))}function ht(e){return r.a.createElement(r.a.Fragment,null,!e.editMode&&r.a.createElement(et.a,{className:e.classNames,onClick:e.onClick}),e.editMode&&r.a.createElement(tt.a,{className:e.classNames,onClick:e.onClick}))}function pt(e){var t=Object(n.useState)({}),a=Object(Ie.a)(t,2),s=a[0],i=a[1],o=Object(n.useState)(),c=Object(Ie.a)(o,2),l=c[0],u=c[1];function d(){(new Ye).createCategory(l,(function(t){e.addToTokenCategoryList(t),u(null),i(null)}),(function(e){i(e)}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a.Item,{variant:"warning"},"Categories ",r.a.createElement(at.a,{className:"add-list-item-icon",onClick:function(){l||u("new_category")}})),l&&r.a.createElement(Ze.a.Item,{variant:"secondary"},r.a.createElement("input",{type:"text",className:"list-item-input",value:l,onChange:function(e){return u(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&d()}}),r.a.createElement(Ne.a,{className:"add-list-item-icon delete-icon edit",onClick:function(){return u(null)}}),r.a.createElement(tt.a,{className:"add-list-item-icon save-icon listed-icon edit",onClick:function(){return d()}}),s&&s.detail&&r.a.createElement(M.a,{variant:"danger"},r.a.createElement(R.a.Text,null,r.a.createElement(J.a,null)," ",s.detail))))}var ft=r.a.createContext(null),vt=r.a.createContext(null),Et=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={serviceProviderConfig:{bulk:{maxOperations:5,maxPayloadSize:2097152},filter:{maxResults:5}}},n.setState=n.setState.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new N.a("/scim/v2/ServiceProviderConfig",this.setState)).listResources().then((function(e){e.success&&e.resource.then((function(e){a.setState({serviceProviderConfig:e})}))})),t.getResource(null,"/scim/v2/AppInfo").then((function(e){e.success&&e.resource.then((function(e){a.setState({appInfo:e})}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.BrowserRouter,null,r.a.createElement(y.a,{collapseOnSelect:!0,expand:"lg",bg:"navigation"},r.a.createElement(g.a,null,r.a.createElement(y.a.Brand,{href:"#home"},"Captain Goldfish's Rest Client"),r.a.createElement(y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(y.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(b.a,{className:"me-auto"}),r.a.createElement(b.a,null,r.a.createElement(b.a.Link,{href:"#"},r.a.createElement("img",{src:E.a,className:"react-logo",alt:"logo"})))))),r.a.createElement(y.a,{bg:"navigation-left",className:"navbar-left",expand:"md",variant:"dark"},r.a.createElement(y.a.Collapse,null,r.a.createElement(b.a,{className:"flex-column"},r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/openIdProvider"},r.a.createElement(b.a.Link,null,"OpenID")),r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/jwts"},r.a.createElement(b.a.Link,null,"JWTs")),r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/tokenCategories"},r.a.createElement(b.a.Link,null,"Storage")),r.a.createElement(C.LinkContainer,{exact:!0,to:"/views/system"},r.a.createElement(b.a.Link,null,"System"))))),r.a.createElement("div",{className:"main"},r.a.createElement(T.a,{variant:"danger",icon:r.a.createElement(J.a,null),messages:(this.state.errors||{}).errorMessages}),r.a.createElement(ft.Provider,{value:this.state.appInfo},r.a.createElement(vt.Provider,{value:this.state.serviceProviderConfig},r.a.createElement(k.g,null,r.a.createElement(k.d,{path:"/views/system"},r.a.createElement(pe,null)),r.a.createElement(k.d,{path:"/views/openIdProvider/:providerId/client/:clientId",component:Xe}),r.a.createElement(k.d,{path:"/views/openIdProvider/:id/openIdClients",render:function(t){return r.a.createElement(Oe,{match:t.match,serviceProviderConfig:e.state.serviceProviderConfig})}}),r.a.createElement(k.d,{path:"/views/openIdProvider"},r.a.createElement(Ee,{serviceProviderConfig:this.state.serviceProviderConfig})),r.a.createElement(k.d,{path:"/views/jwts"},r.a.createElement(Ce,null)),r.a.createElement(k.d,{path:"/views/tokenCategories"},r.a.createElement(ut,null)),r.a.createElement(k.d,{path:"/"},r.a.createElement(k.c,{to:"/views/jwts"}))))))))}}]),a}(r.a.Component);i.a.render(r.a.createElement(Et,null),document.getElementById("root")),o()},17:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(108),r=a(10),s=a.n(r),i=a(16),o=a(12),c=a(13),l=a(3),u=a(23),d=function(){function e(t,a){Object(o.a)(this,e),this.resourcePath=t,this.setState=a,this.resetErrors=this.resetErrors.bind(this),this.handleError=this.handleError.bind(this),this.createResource=this.createResource.bind(this),this.getErrors=this.getErrors.bind(this),this.isLoading=this.isLoading.bind(this),this.parseErrorResponse=this.parseErrorResponse.bind(this)}return Object(c.a)(e,[{key:"isLoading",value:function(e){this.setState({isLoading:e})}},{key:"resetErrors",value:function(){this.setState({errors:{}})}},{key:"handleError",value:function(e){var t=this;e.then((function(e){var a={};void 0===e.errors?(a.errorMessages=new l.a(a.errorMessages).orElse([]),void 0===e.detail?a.errorMessages.push(JSON.stringify(e)):a.errorMessages.push(e.detail)):a=e.errors,new l.a(t.setState).ifPresent((function(e){return e({errors:a})}))}))}},{key:"createResource",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),e.next=4,fetch(this.resourcePath,{method:"POST",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){if(a.isLoading(!1),201===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return a.handleError(t.resource),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getResource",value:function(){var e=Object(i.a)(s.a.mark((function e(t,a,n){var r,i,o,c=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),r=new l.a(a).orElse(this.resourcePath),i=new l.a(n).map((function(e){return"?"+new URLSearchParams(e).toString()})).orElse(""),o=r+new l.a(t).map((function(e){return"/"+encodeURIComponent(e)})).orElse("")+i,e.next=7,fetch(o,{method:"GET"}).then((function(e){if(c.isLoading(!1),200===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return c.handleError(t.resource),t}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"listResources",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.startIndex,n=t.count,r=t.filter,s=t.sortBy,i=t.sortOrder,o=t.attributes,c=t.excludedAttributes;this.isLoading(!0),this.resetErrors();var u=new l.a(a).map((function(e){return"startIndex="+e})).orElse(null),d=new l.a(n).map((function(e){return"count="+e})).orElse(null),m=new l.a(r).map((function(e){return"filter="+encodeURI(e)})).orElse(null),h=new l.a(s).map((function(e){return"sortBy="+encodeURI(e)})).orElse(null),p=new l.a(i).map((function(e){return"sortOrder="+e})).orElse(null),f=new l.a(o).map((function(e){return"attributes="+encodeURI(e)})).orElse(null),v=new l.a(c).map((function(e){return"excludedAttributes="+encodeURI(e)})).orElse(null),E=Array.of(u,d,m,h,p,f,v).filter((function(e){return null!=e})).join("&");E=new l.a(E).filter((function(e){return e.length>0})).map((function(e){return"?"+e})).orElse("");var y=this.resourcePath+E;return fetch(y,{method:"GET"}).then((function(t){if(e.isLoading(!1),200===t.status)return{success:!0,status:t.status,resource:t.json()};var a={success:!1,status:t.status,resource:t.json()};return e.handleError(a.resource),a}))}},{key:"listResourcesWithPost",value:function(e,t,a){var n=this,r=this.resourcePath+"/.search";return fetch(r,{method:"POST",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(e)}).then((function(e){200===e.status?e.json().then((function(e){t(e)})):e.text().then((function(e){a(n.parseErrorResponse(e))}))}))}},{key:"updateResource",value:function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),e.next=4,fetch(this.resourcePath+"/"+encodeURIComponent(a),{method:"PUT",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){if(n.isLoading(!1),200===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return n.handleError(t.resource),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"patchResource",value:function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),e.next=4,fetch(this.resourcePath+"/"+encodeURIComponent(a),{method:"PATCH",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){if(n.isLoading(!1),200===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return n.handleError(t.resource),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteResource",value:function(e){var t=this;return this.isLoading(!0),this.resetErrors(),fetch(this.resourcePath+"/"+encodeURIComponent(e),{method:"DELETE"}).then((function(e){return t.isLoading(!1),204===e.status?{success:!0,status:e.status}:(t.handleError(e.json()),{success:!1,status:e.status})}))}},{key:"getResourceFromFormReference",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r,o,c,d,m,h,p,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},r=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,"file"!==t.type){e.next=11;break}if(void 0===t.files||1!==t.files.length){e.next=8;break}return e.next=5,Object(l.c)(t.files[0]);case 5:r=e.sent,e.next=9;break;case 8:r=void 0;case 9:e.next=12;break;case 11:"number"===t.type?r=t.valueAsNumber:"checkbox"===t.type?r=t.checked:"radio"===t.type?r=t.checked?t.value:a[n]:(i=u.trim(t.value),u.isEmpty(i)&&(i=void 0),r=i);case 12:u.set(a,n,r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Array.from(t.current.getElementsByTagName("input")),c=Array.from(t.current.getElementsByTagName("textarea")),d=Array.from(t.current.getElementsByTagName("select")),m=o.concat(d).concat(c),h=Object(n.a)(m),e.prev=7,h.s();case 9:if((p=h.n()).done){e.next=15;break}return f=p.value,e.next=13,r(f);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),h.e(e.t0);case 20:return e.prev=20,h.f(),e.finish(20);case 23:return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,null,[[7,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getErrors",value:function(e,t){return new l.a(e).map((function(e){return e.errors})).map((function(e){return e.fieldErrors})).map((function(e){return e[t]})).orElse([])}},{key:"parseErrorResponse",value:function(e){try{return JSON.parse(e)}catch(t){return{detail:e}}}}]),e}()},21:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"g",(function(){return r})),a.d(t,"n",(function(){return s})),a.d(t,"p",(function(){return i})),a.d(t,"l",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return p})),a.d(t,"k",(function(){return f})),a.d(t,"q",(function(){return v})),a.d(t,"f",(function(){return E})),a.d(t,"m",(function(){return y})),a.d(t,"o",(function(){return g})),a.d(t,"c",(function(){return b}));var n="urn:ietf:params:scim:schemas:captaingoldfish:2.0:CertificateInfo",r="urn:ietf:params:scim:schemas:captaingoldfish:2.0:CurrentWorkflowSettings",s="urn:ietf:params:scim:schemas:captaingoldfish:2.0:TokenCategory",i="urn:ietf:params:scim:schemas:captaingoldfish:2.0:TokenStore",o="urn:ietf:params:scim:api:messages:2.0:SearchRequest",c="urn:ietf:params:scim:api:messages:2.0:BulkRequest",l="/scim/v2",u=l+"/AccessTokenRequest",d=l+"/AuthCodeGrantRequest",m=l+"/JwtBuilder",h=l+"/Keystore",p=l+"/OpenIdClient",f=l+"/OpenIdProvider",v=l+"/Truststore",E=l+"/CurrentWorkflowSettings",y=l+"/TokenCategory",g=l+"/TokenStore",b=l+"/Bulk"},3:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(12),r=a(13);function s(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e=n.result.toString().replace(/^data:(.*,)?/,"");e.length%4>0&&(e+="=".repeat(4-e.length%4)),t(e)},n.onerror=function(e){return a(e)}}))}function i(e,t,a){for(var n=window.atob(e),r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);var o=new Blob([s.buffer],{type:a}),c=document.createElement("a"),l=URL.createObjectURL(o);c.href=l,c.download=t,c.click(),setTimeout((function(){window.URL.revokeObjectURL(l)}),0)}var o=function(){function e(t){Object(n.a)(this,e),this.value=t}return Object(r.a)(e,[{key:"get",value:function(){return this.value}},{key:"isPresent",value:function(){return void 0!==this.value&&null!==this.value}},{key:"ifPresent",value:function(e){return this.isPresent()&&e(this.value),this}},{key:"ifNotPresent",value:function(e){return this.isPresent()||e(),this}},{key:"isEmpty",value:function(){return void 0===this.value||null===this.value}},{key:"filter",value:function(e){return this.isPresent()&&!e(this.value)&&(this.value=null),this}},{key:"map",value:function(e){return this.isPresent()&&(this.value=e(this.value)),this}},{key:"do",value:function(e){return this.isPresent()&&e(this.value),this}},{key:"orElse",value:function(e){return this.isPresent()?this.value:e}}]),e}()}).call(this,a(103).Buffer)},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(97),r=a(10),s=a.n(r),i=a(16),o=a(12),c=a(13),l=a(3),u=a(23),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.scimClient,n=t.formReference,r=t.getOriginalResource,s=t.getCurrentResource,i=t.setCurrentResource,c=t.setState,l=t.onCreateSuccess,u=t.onUpdateSuccess,d=t.onDeleteSuccess;Object(o.a)(this,e),this.scimClient=a,this.formReference=n,this.getOriginalResource=r,this.getCurrentResource=s,this.setCurrentResource=i,this.setState=c,this.onCreateSuccess=l,this.onUpdateSuccess=u,this.onDeleteSuccess=d,this.onSubmit=this.onSubmit.bind(this),this.createResource=this.createResource.bind(this),this.updateResource=this.updateResource.bind(this),this.deleteResource=this.deleteResource.bind(this),this.setStateValue=this.setStateValue.bind(this),this.resetEditMode=this.resetEditMode.bind(this),this.updateInput=this.updateInput.bind(this)}return Object(c.a)(e,[{key:"onSubmit",value:function(e){e.preventDefault(),new l.a(this.getCurrentResource().id).isPresent()?this.updateResource():this.createResource()}},{key:"createResource",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.getResourceFromFormReference(this.formReference);case 2:return t=e.sent,e.next=5,this.scimClient.createResource(t);case 5:a=e.sent,this.handleCreateOrUpdateResponse(a,this.onCreateSuccess);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateResource",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.getResourceFromFormReference(this.formReference);case 2:return t=e.sent,e.next=5,this.scimClient.updateResource(t,this.getOriginalResource().id);case 5:a=e.sent,this.handleCreateOrUpdateResponse(a,this.onUpdateSuccess);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCreateOrUpdateResponse",value:function(e,t){var a=this;e.success?e.resource.then((function(e){a.setCurrentResource(e),a.setState({editMode:!1,success:!0}),t(e)})):e.resource.then((function(e){a.setState({errors:{errorMessages:[e.detail]}})}))}},{key:"deleteResource",value:function(){var e=this;new l.a(this.getCurrentResource().id).ifNotPresent((function(t){e.onDeleteSuccess(void 0)})).ifPresent(function(){var t=Object(i.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scimClient.deleteResource(a);case 2:e.onDeleteSuccess(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setStateValue",value:function(e,t){var a;this.setState((a={},Object(n.a)(a,e,t),Object(n.a)(a,"success",!1),a))}},{key:"resetEditMode",value:function(){var e=JSON.parse(JSON.stringify(this.getOriginalResource()));this.setCurrentResource(e),this.setState({editMode:!1,success:!1})}},{key:"updateInput",value:function(e,t){var a=this.getCurrentResource();a=u.set(a,e,t),this.setCurrentResource(a),this.setState({success:!1})}}]),e}()},5:function(e,t,a){"use strict";a.d(t,"l",(function(){return I})),a.d(t,"j",(function(){return P})),a.d(t,"o",(function(){return T})),a.d(t,"k",(function(){return D})),a.d(t,"m",(function(){return N})),a.d(t,"n",(function(){return M})),a.d(t,"h",(function(){return A})),a.d(t,"g",(function(){return U})),a.d(t,"a",(function(){return L})),a.d(t,"q",(function(){return B})),a.d(t,"i",(function(){return F})),a.d(t,"b",(function(){return K})),a.d(t,"c",(function(){return J})),a.d(t,"r",(function(){return q})),a.d(t,"p",(function(){return G})),a.d(t,"e",(function(){return z})),a.d(t,"d",(function(){return V})),a.d(t,"f",(function(){return H}));var n=a(22),r=a(12),s=a(13),i=a(15),o=a(14),c=a(0),l=a.n(c),u=a(95),d=a.n(u),m=a(11),h=a(25),p=a(20),f=a(3),v=a(18),E=a(98),y=a(160),g=(a(24),a(96)),b=a(114),w=a(159),k=a(161),C=a(112),S=a(162),O=a(163),j=(a(113),a(164),a(165)),R=a(166),x=a(50);function I(e){var t=e.id||e.name,a=new f.a(e.label).map((function(e){return l.a.createElement(m.a.Label,{column:!0,sm:2},e)})),n=void 0===e.type?"text":e.type,r=e.name,s=void 0===e.placeholder?e.name:e.placeholder,i=e.onError(e.name),o=!0===e.disabled,c=!0===e.readOnly,u="hidden"===e.type||e.isHidden,d=new f.a(e.as).orElse("input"),v=new f.a(e.sm).orElse(a.isPresent()?10:12);return l.a.createElement(m.a.Group,{as:h.a,controlId:t,style:{display:u?"none":""}},a.get(),l.a.createElement(p.a,{sm:v},l.a.createElement(m.a.Control,{type:n,as:d,name:r,className:e.className,disabled:o,readOnly:c,placeholder:s,onChange:e.onChange,value:e.value}),e.children,l.a.createElement(A,{controlId:e.name+"-error-list",fieldErrors:i})))}var P=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=new f.a(this.props.id).orElse(this.props.name),t=new f.a(this.props.label).map((function(e){return l.a.createElement(m.a.Label,{column:!0,sm:2},e)})),a=this.props.name,n=this.props.onError(this.props.name),r="hidden"===this.props.type,s=!0===this.props.readOnly,i=new f.a(this.props.checked).orElse(!1),o=new f.a(this.props.sm).orElse(t.isPresent()?10:12);return l.a.createElement(m.a.Group,{as:h.a,style:{display:r?"none":""}},t.get(),l.a.createElement(p.a,{sm:o,style:{alignSelf:"center"}},l.a.createElement(m.a.Check,{id:e,name:a,readOnly:s,type:"switch",onChange:this.props.onChange,checked:i}),l.a.createElement(A,{controlId:this.props.name+"-error-list",fieldErrors:n})))}}]),a}(l.a.Component),T=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=void 0===this.props.label?this.props.name:this.props.label,t=this.props.onError(this.props.name),a=new f.a(this.props.options).map((function(e){return e.map((function(e){return l.a.createElement("option",{key:e},e)}))})).orElse([]);return l.a.createElement(m.a.Group,{as:h.a,controlId:this.props.name},l.a.createElement(m.a.Label,{column:!0,sm:2},e),l.a.createElement(p.a,{sm:10},l.a.createElement(m.a.Control,{as:"select",name:this.props.name},a),l.a.createElement(A,{controlId:this.props.name+"-error-list",fieldErrors:t})))}}]),a}(l.a.Component);function D(e){Object(c.useEffect)((function(){return d.a.init(),function(){d.a.destroy()}}),[]);var t=void 0===e.label?e.name:e.label,a=e.onError(e.name);return l.a.createElement(m.a.Group,{as:h.a,controlId:e.name},l.a.createElement(m.a.Label,{column:!0,sm:2},t),l.a.createElement(p.a,{sm:10},l.a.createElement(m.a.Control,{type:"file",name:e.name}),l.a.createElement(A,{controlId:e.name+"-error-list",fieldErrors:a})))}function N(e){var t=void 0===e.label?e.name:e.label,a=e.onError(e.name);return l.a.createElement(m.a.Group,{as:h.a,controlId:e.name},l.a.createElement(m.a.Label,{column:!0,sm:2},t),l.a.createElement(p.a,{sm:10},l.a.createElement(m.a.Control,{as:"select",size:"sm",type:"number",custom:!0,name:e.name,onChange:e.onChange,value:e.selected},e.selections.map((function(t,a){return l.a.createElement("option",{key:a,value:t.id,defaultValue:e.selected===t},t.value)}))),l.a.createElement(A,{controlId:e.name+"-error-list",fieldErrors:a})))}function M(e){var t=void 0===e.label?e.name:e.label,a="vertical"===new f.a(e.displayType).orElse("vertical")?"block":"inline",n=e.onError(e.name);return l.a.createElement(m.a.Group,{as:h.a,controlId:e.name},l.a.createElement(m.a.Label,{column:!0,sm:2},t),l.a.createElement(p.a,{sm:10,style:{alignSelf:"center"}},e.selections.map((function(t,n){return l.a.createElement(m.a.Check,{key:n,style:{display:a,marginRight:"45px"},type:"radio",label:t.display,value:t.value,name:e.name,checked:e.selected===t.value,onChange:e.onChange,id:e.name+"-"+t.value})})),l.a.createElement(A,{controlId:e.name+"-error-list",fieldErrors:n})))}function A(e){if(new f.a(e.fieldErrors).map((function(e){return!1})).orElse(!0))return null;var t=void 0===e.backgroundClass?"bg-danger":e.backgroundClass;return l.a.createElement("ul",{id:e.controlId,className:"error-list"},e.fieldErrors.map((function(e,a){return l.a.createElement(U,{key:"error-message-"+a,backgroundClass:t,message:e})})))}function U(e){return l.a.createElement("li",{className:"error-list-item"},l.a.createElement("small",{className:e.backgroundClass+" error"},l.a.createElement(v.a,null)," ",e.message))}function L(e){var t=e.variant||"info",a=e.icon||l.a.createElement(w.a,null);return l.a.createElement(l.a.Fragment,null,(e.messages||[]).length>0&&l.a.createElement(E.a,{variant:t},l.a.createElement("ul",{className:"error-list"},e.messages.map((function(e,n){return l.a.createElement("li",{key:"alert-"+t+"-message-"+n,className:"error-list-item"},l.a.createElement("small",{className:"error"},a," ",e))})))))}function B(e){return e.show?l.a.createElement("span",{style:{marginRight:"5px"}},l.a.createElement(y.a,{animation:"border",variant:"warning",size:"sm",role:"status"})):null}function F(e){return new f.a(e.errors).map((function(e){return e.errorMessages})).filter((function(e){return e.length>0})).isPresent()&&l.a.createElement(E.a,{id:"error-messages-alert",variant:"danger",show:void 0!==e.errors.errorMessages},l.a.createElement(A,{fieldErrors:e.errors.errorMessages,backgroundClass:""}))}function K(e){return l.a.createElement("div",{className:"card-control-icons"},e.spinner,e.editMode&&l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{title:"save",id:"save-icon-"+e.resource.id,onClick:function(){void 0===e.resource.id?e.createResource():e.updateResource(e.resource.id)},style:{marginRight:"5px"}}),void 0!==e.resource.id&&l.a.createElement(C.a,{title:"reset-edit",id:"reset-update-icon-"+e.resource.id,onClick:e.resetEditMode,style:{marginRight:"5px"}})),!e.editMode&&l.a.createElement(S.a,{title:"edit",id:"update-icon-"+e.resource.id,onClick:e.edit,style:{marginRight:"5px"}}),l.a.createElement(O.a,{title:"delete",id:"delete-icon-"+e.resource.id,onClick:e.showModal}))}function J(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("th",null,"Created"),l.a.createElement("td",{className:"card-value-cell"},new f.a(e.resource).map((function(e){return e.meta})).map((function(e){return e.created})).map((function(e){return new Date(e).toUTCString()})).orElse(null))),l.a.createElement("tr",null,l.a.createElement("th",null,"LastModified"),l.a.createElement("td",{className:"card-value-cell"},new f.a(e.resource).map((function(e){return e.meta})).map((function(e){return e.lastModified})).map((function(e){return new Date(e).toUTCString()})).orElse(null))))}function q(e){return l.a.createElement("tr",null,l.a.createElement("th",null,e.header),l.a.createElement("td",{id:"card-cell-"+e.resourceId+"-"+e.name,className:"card-value-cell"},e.editMode&&l.a.createElement(x.a,{value:new f.a(e.resourceValue).orElse(""),id:e.name+"-"+e.resourceId,type:e.type,name:e.name,placeholder:e.placeholder,onChange:e.onChange,onError:e.onError}),!e.editMode&&e.resourceValue))}function G(e){return l.a.createElement("tr",{style:{display:"none"}},l.a.createElement("td",null,l.a.createElement(x.a,{value:new f.a(e.value).orElse(""),id:e.name+"-"+e.resourceId,type:e.type,name:e.name,placeholder:e.placeholder,onChange:e.onChange,onError:e.onError})))}function z(e){var t=new f.a(e.onError).map((function(t){return t(e.name)})).orElse([]);return l.a.createElement("tr",null,l.a.createElement("th",null,e.header),l.a.createElement("td",{id:"card-cell-"+e.resourceId+"-"+e.name,className:"card-value-cell"},l.a.createElement("fieldset",null,!e.editMode&&e.selected,e.editMode&&e.selections.map((function(t,a){return l.a.createElement(m.a.Check,{key:a,type:"radio",label:t,value:t,checked:e.selected===t,onChange:e.onChange,name:e.name,id:e.name+"-"+t})}))),l.a.createElement(A,{controlId:e.name+"-error-list",fieldErrors:t})))}function V(e){var t=new f.a(e.onError).map((function(t){return t(e.name)})).orElse([]);return l.a.createElement("tr",null,l.a.createElement("th",null,e.header),l.a.createElement("td",{id:"card-cell-"+e.resourceId+"-"+e.name,className:"card-value-cell"},l.a.createElement("fieldset",null,!e.editMode&&e.selected,e.editMode&&l.a.createElement(m.a.Control,{as:"select",size:"sm",custom:!0,name:e.name,id:e.name,onChange:e.onChange,value:e.selected},e.selections.map((function(t,a){return l.a.createElement("option",{key:a,defaultValue:e.selected===t},t)})))),l.a.createElement(A,{controlId:e.name+"-error-list",fieldErrors:t})))}function H(e){var t=Object(c.useState)(e.open||!1),a=Object(n.a)(t,2),r=a[0],s=a[1],i=e.variant||"primary",o=new f.a(e.headerClass).map((function(e){return" "+e})).orElse(""),u=new f.a(e.bodyClass).map((function(e){return" "+e})).orElse("");return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{className:"collapse-header"+o,variant:i,onClick:function(){return s(!r)}},!0===r&&l.a.createElement(j.a,null),!1===r&&l.a.createElement(R.a,null),e.header,void 0!==e.remove&&l.a.createElement(C.a,{onClick:e.remove,className:"remove-collapse"})),l.a.createElement(g.a,{in:r},l.a.createElement(b.a,{className:u},l.a.createElement(b.a.Body,null,e.content()))))}},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(12),r=a(13),s=a(6),i=a(15),o=a(14),c=a(0),l=a.n(c),u=a(11),d=a(3),m=a(5),h=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).bubbleEvent=r.bubbleEvent.bind(Object(s.a)(r)),r}return Object(r.a)(a,[{key:"bubbleEvent",value:function(e){this.props.onChange(e.target.name,e.target.value)}},{key:"componentDidUpdate",value:function(e,t,a){e.value!==this.props.value&&this.props.onChange(this.props.name,this.props.value)}},{key:"render",value:function(){var e=this,t=new d.a(this.props.id).orElse(this.props.name),a=void 0===this.props.type?"text":this.props.type,n=this.props.name,r=void 0===this.props.placeholder?this.props.name:this.props.placeholder,s=new d.a(this.props.onError).map((function(t){return t(e.props.name)})).orElse([]),i=!0===this.props.disabled,o=!0===this.props.readOnly;return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a.Control,{id:t,className:"card-input-field "+new d.a(this.props.className).orElse(""),type:a,name:n,disabled:i,readOnly:o,placeholder:r,onChange:this.bubbleEvent,value:this.props.value}),l.a.createElement(m.h,{controlId:this.props.name+"-error-list",fieldErrors:s}))}}]),a}(l.a.Component)},66:function(e,t,a){e.exports=a.p+"static/media/secure-download-icon.1c809bbb.png"},92:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.6d6b0716.chunk.js.map