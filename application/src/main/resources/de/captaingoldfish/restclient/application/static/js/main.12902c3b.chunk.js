(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{110:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return E}));var n=s(11),r=s.n(n),a=s(17),i=s(13),c=s(14),o=s(7),l=s(16),u=s(15),d=s(1),h=s.n(d),j=(s(95),s(18)),p=s(37),b=s(12),f=s(6),m=s(25),O=s(4),v=s(167),x=s(26),y=s(21),g=s(89),w=s(168),C=s(166),S=s(19),k=s(22),R=s(0),E=function(t){Object(l.a)(n,t);var s=Object(u.a)(n);function n(e){var t;return Object(i.a)(this,n),(t=s.call(this,e)).state={isMounted:!1,selectedKey:"",currentJwt:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},t.setState=t.setState.bind(Object(o.a)(t)),t.scimClient=new j.a(k.h,t.setState),t.formReference=Object(d.createRef)(),t.onUpdateSuccess=t.onUpdateSuccess.bind(Object(o.a)(t)),t.handleKeySelectionSelection=t.handleKeySelectionSelection.bind(Object(o.a)(t)),t.parseJwt=t.parseJwt.bind(Object(o.a)(t)),t.prettyPrintJwtJson=t.prettyPrintJwtJson.bind(Object(o.a)(t)),t.scimComponentBasics=new p.a({scimClient:t.scimClient,formReference:t.formReference,getOriginalResource:function(){return t.state.jwtBuilder||{id:1}},getCurrentResource:function(){return t.state.jwtBuilder||{id:1}},setCurrentResource:function(e){},setState:t.setState,onUpdateSuccess:t.onUpdateSuccess}),t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"handleKeySelectionSelection",value:function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedKey:t});case 2:document.getElementById("jwt-parser-key-id").value=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onUpdateSuccess",value:function(e){var t=e;t.header=JSON.stringify(JSON.parse(e.header),void 0,4),this.setState({jwtBuilder:t})}},{key:"getJwtParts",value:function(){return!1===this.state.isMounted?null:(document.getElementById("jwt-to-parse").value||"").split(".")}},{key:"parseJwt",value:function(t){if(!1===this.state.isMounted)return null;var s={};s.parts=t;var n=function(t){return decodeURIComponent(e.from(t,"base64").toString())};if(5===t.length){var r=n(t[0]);return s.header=this.prettyPrintJwtJson(r),s.infoMessages=["JWE must be parsed at backend"],s}if(3!==t.length)return s.warnMessages=["Not a valid JSON Web Token"],s;var a=t[0],i=t[1],c=n(a),o=n(i);return s.header=this.prettyPrintJwtJson(c),s.body=this.prettyPrintJwtJson(o),s}},{key:"prettyPrintJwtJson",value:function(e){try{var t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(s){return e}}},{key:"render",value:function(){var e=this,t=this.getJwtParts(),s=this.parseJwt(t)||{},n=new O.a(t).map((function(e){return 3===e.length})).orElse(!1),r=new O.a(t).map((function(e){return 5===e.length})).orElse(!1),a=new O.a(this.state.jwtBuilder).map((function(e){return e.header})).orElse(s.header),i=new O.a(this.state.jwtBuilder).map((function(e){return e.body})).orElse(s.body),c=this.state.errors||{};return Object(R.jsxs)(h.a.Fragment,{children:[Object(R.jsx)(f.a,{variant:"danger",icon:Object(R.jsx)(S.a,{}),messages:c.errorMessages||new O.a(c.detail).map((function(e){return[e]})).orElse([])}),Object(R.jsxs)(b.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference,children:[Object(R.jsx)(f.a,{icon:Object(R.jsx)(S.a,{}),variant:"danger",messages:(this.state.errorMessages||[]).errors}),Object(R.jsx)(f.a,{icon:Object(R.jsx)(C.a,{}),variant:"warning",messages:s.warnMessages}),Object(R.jsx)(f.a,{variant:"info",messages:s.infoMessages}),Object(R.jsx)(v.a,{children:Object(R.jsxs)(x.a,{children:[Object(R.jsxs)(y.a,{sm:3,children:[Object(R.jsxs)(g.a,{children:[Object(R.jsx)(w.a,{id:"jwt-parser-aliases",title:"available keys",onSelect:this.handleKeySelectionSelection,children:new O.a(this.props.keyInfos).isPresent()&&this.props.keyInfos.map((function(e){return Object(R.jsx)(g.a.Item,{eventKey:e.alias,children:e.alias+" ("+e.keyAlgorithm+"-"+e.keyLength+"-bit)"},e.alias)}))}),Object(R.jsxs)("p",{children:["selected key:",Object(R.jsx)("span",{className:"code",style:{marginLeft:"15px",color:"lightgreen"},children:this.state.selectedKey})]})]}),(!0===r||!0===n)&&Object(R.jsxs)(m.a,{id:"parse-jwt",type:"submit",onClick:function(t){e.setState({jwtBuilder:void 0})},children:[Object(R.jsx)(f.q,{show:this.state.isLoading}),!0===n&&Object(R.jsx)("span",{children:"Verify Signature"}),!0===r&&Object(R.jsx)("span",{children:"Decrypt"})]}),this.state.jwtBuilder&&n&&Object(R.jsx)("h5",{style:{color:"lightgreen",marginTop:"50px"},children:"Signature valid"}),this.state.jwtBuilder&&r&&Object(R.jsx)("h5",{style:{color:"lightgreen",marginTop:"50px"},children:"Successfully decrypted"})]}),Object(R.jsxs)(y.a,{sm:4,className:"form-group",children:[Object(R.jsx)(b.a.Control,{id:"jwt-to-parse",name:"jwt",sm:12,as:"textarea",value:this.state.currentJwt,onChange:function(t){return e.setState({currentJwt:t.target.value,jwtBuilder:void 0})}}),Object(R.jsx)("div",{id:"jwt-input",className:"jwt-overlay",children:(s.parts||[]).map((function(e,t){return Object(R.jsxs)("span",{className:"jwt-part jwt-part-"+(t<=4?t:"over"),children:[t>0&&Object(R.jsxs)("span",{className:"jwt-dot-separator",children:[".",Object(R.jsx)("br",{})]}),e]},"jwt-part-"+t)}))})]}),Object(R.jsxs)(y.a,{sm:5,children:[Object(R.jsx)(f.l,{id:"jwt-parser-key-id",name:"keyId",readOnly:!0,type:"hidden",value:this.state.selectedKey,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(R.jsx)(f.l,{id:"jwt-parsed-header",name:"header",className:"jwt-part-0",type:"text",as:"textarea",value:a,onChange:function(){},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(R.jsx)(f.l,{id:"jwt-parsed-body",name:"body",className:"jwt-part-1",type:"text",as:"textarea",value:i,onChange:function(){},onError:function(t){return e.scimClient.getErrors(e.state,t)}})]})]})})]})]})}}]),n}(h.a.Component)}).call(this,s(104).Buffer)},118:function(e,t,s){},157:function(e,t,s){"use strict";s.r(t);var n=s(1),r=s.n(n),a=s(41),i=s.n(a),c=(s(118),s(119),s(120),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,195)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),n(e),r(e),a(e),i(e)}))}),o=s(11),l=s.n(o),u=s(17),d=s(13),h=s(14),j=s(7),p=s(16),b=s(15),f=s.p+"static/media/logo.6ce24c58.svg",m=s(192),O=s(167),v=s(109),x=s(65),y=s(29),g=s(38),w=s(193),C=s(182),S=s(20),k=s(12),R=s(26),E=s(21),I=s(25),P=s(6),T=s(4),D=s(18),N=s(100),M=s(178),A=s(176),U=s(177),L=s.p+"static/media/secure-download-icon.a0cef591.png",B=s(179),F=s(19),K=s(63),J=s(173),q=s(113),G=s(191),z=s(0),V=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return!0===this.props.show&&Object(z.jsx)("div",{id:this.props.id,role:"dialog","aria-modal":"true",tabIndex:"-1",className:"card-modal",children:Object(z.jsxs)("div",{className:"card-modal-content",children:[Object(z.jsx)("h5",{id:this.props.id+"-header",className:"card-title",children:this.props.title}),Object(z.jsx)("p",{id:this.props.id+"-text",children:this.props.message}),Object(z.jsx)(I.a,{id:this.props.id+"-button-accept",role:"accept",className:"left",variant:void 0===this.props.variant?"info":this.props.variant,type:"button",onClick:this.props.onSubmit,children:this.props.submitButtonText}),Object(z.jsx)(I.a,{id:this.props.id+"-button-cancel",role:"cancel",className:"right",variant:"secondary",type:"button",onClick:this.props.onCancel,children:this.props.cancelButtonText})]})})}}]),s}(r.a.Component),H=s(174),W=s(175),_=s(162),Q=s.p+"static/media/certificate.3484f279.png",X=s(22),Y=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={loaded:!1},n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a(n.props.scimResourcePath,n.setState),n.deleteEntry=n.deleteEntry.bind(Object(j.a)(n)),n.showModal=n.showModal.bind(Object(j.a)(n)),n.hideModal=n.hideModal.bind(Object(j.a)(n)),n.loadData=n.loadData.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"deleteEntry",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.deleteResource(this.props.alias);case 2:e.sent.success&&void 0!==this.props.onDeleteSuccess&&this.props.onDeleteSuccess(this.props.alias);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showSpinner:!0}),e.next=3,this.scimClient.getResource(this.props.alias);case 3:(t=e.sent).success&&t.resource.then((function(e){var t=e[X.e];s.setState({loaded:!0,cert:t,certInfo:t.info})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showModal",value:function(){this.setState({showModal:!0})}},{key:"hideModal",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var e=function(e){return Object(z.jsx)(J.a,Object(K.a)(Object(K.a)({id:"button-tooltip"},e),{},{children:"Certificate"}))},t=function(e){return Object(z.jsx)(J.a,Object(K.a)(Object(K.a)({id:"button-tooltip"},e),{},{children:"Private Key and Certificate"}))};return Object(z.jsxs)(q.a,{id:"alias-card-"+this.props.alias,border:"warning",bg:"dark",className:"alias-card",children:[Object(z.jsx)(V,{id:"delete-dialog-"+this.props.alias,show:this.state.showModal,variant:"danger",title:"Delete '"+this.props.alias+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.deleteEntry,cancelButtonText:"cancel",onCancel:this.hideModal}),Object(z.jsxs)(q.a.Header,{id:"alias-name-"+this.props.alias,children:[this.props.alias," ",new T.a(this.props.keyInfo).map((function(s){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("br",{}),"(",Object(z.jsxs)("span",{className:"keyInfo",children:[s.keyAlgorithm+": "+s.keyLength+"-bit ",s.hasPrivateKey&&Object(z.jsx)(G.a,{placement:"right",delay:{show:250,hide:400},overlay:t,children:Object(z.jsx)(H.a,{})}),!s.hasPrivateKey&&Object(z.jsx)(G.a,{placement:"right",delay:{show:250,hide:400},overlay:e,children:Object(z.jsx)(W.a,{})})]}),")"]})})).orElse(null),Object(z.jsxs)("div",{className:"card-control-icons",children:[Object(z.jsx)(P.q,{show:this.state.isLoading}),Object(z.jsx)(_.a,{id:"delete-icon-"+this.props.alias,onClick:this.showModal})]})]}),Object(z.jsxs)(q.a.Body,{children:[!1===this.state.loaded&&Object(z.jsx)(r.a.Fragment,{children:Object(z.jsxs)("div",{className:"load-certificate-icon-container",children:[Object(z.jsx)(A.a,{src:Q,className:"load-certificate-icon",fluid:!0})," ",Object(z.jsx)("br",{}),Object(z.jsx)(I.a,{id:"load-certificate-data-button-for-"+this.props.alias,className:"card-load-icon",type:"button",onClick:this.loadData,children:"Load Data"})]})}),!0===this.state.loaded&&Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(q.a.Subtitle,{children:"Issuer"}),Object(z.jsx)(q.a.Text,{id:"issuer-dn-"+this.props.alias,children:this.state.certInfo.issuerDn}),Object(z.jsx)(q.a.Subtitle,{children:"Subject"}),Object(z.jsx)(q.a.Text,{id:"subject-dn-"+this.props.alias,children:this.state.certInfo.subjectDn}),Object(z.jsx)(q.a.Subtitle,{children:"SHA-256 Fingerprint"}),Object(z.jsx)(q.a.Text,{id:"sha-256-"+this.props.alias,children:this.state.certInfo.sha256Fingerprint}),Object(z.jsx)(q.a.Subtitle,{children:"Valid From"}),Object(z.jsx)(q.a.Text,{id:"valid-from-"+this.props.alias,children:new Date(this.state.certInfo.validFrom).toUTCString()}),Object(z.jsx)(q.a.Subtitle,{children:"Valid Until"}),Object(z.jsx)(q.a.Text,{id:"valid-until-"+this.props.alias,children:new Date(this.state.certInfo.validTo).toUTCString()})]})]})]},this.props.alias)}}]),s}(r.a.Component);function Z(e){return Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(U.a,{id:"keystore-certificate-entries",children:void 0!==e.certificateAliases&&e.certificateAliases.map((function(t){return Object(z.jsx)(Y,{scimResourcePath:e.scimResourcePath,alias:t,onDeleteSuccess:e.onDeleteSuccess},t)}))})})}var $=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).scimResourcePath="/scim/v2/Keystore",n.state={},n.setAliasSelectionResponse=n.setAliasSelectionResponse.bind(Object(j.a)(n)),n.onAliasSelectionSuccess=n.onAliasSelectionSuccess.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"setAliasSelectionResponse",value:function(e){var t=JSON.parse(JSON.stringify(e));this.setState({aliasSelectionResponse:t})}},{key:"onAliasSelectionSuccess",value:function(e){this.setState({newKeyInfo:{value:e.keyInfos[0]}})}},{key:"render",value:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(ee,{scimResourcePath:this.scimResourcePath,setAliasSelectionResponse:this.setAliasSelectionResponse}),Object(z.jsx)(te,{scimResourcePath:this.scimResourcePath,aliasSelectionResponse:this.state.aliasSelectionResponse,onCreateSuccess:this.onAliasSelectionSuccess}),Object(z.jsx)(se,{scimResourcePath:this.scimResourcePath,newKeyInfo:this.state.newKeyInfo})]})}}]),s}(r.a.Component),ee=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={success:!1,showSpinner:!1},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.upload=r.upload.bind(Object(j.a)(r)),r.handleCreateResponse=r.handleCreateResponse.bind(Object(j.a)(r)),r}return Object(h.a)(s,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.scimClient.getResourceFromFormReference(this.formReference);case 3:return s=e.sent,e.next=6,this.scimClient.createResource(s);case 6:n=e.sent,this.handleCreateResponse(n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateResponse",value:function(e){var t=this;e.success?(e.resource.then((function(e){t.props.setAliasSelectionResponse(e)})),this.setState({success:!0})):this.setState({success:!1})}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("h2",{children:"Keystore Upload"}),Object(z.jsx)(N.a,{id:"uploadForm-alert-success",variant:"success",show:this.state.success,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Keystore was successfully uploaded"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(k.a,{id:"uploadForm",onSubmit:this.upload,ref:this.formReference,children:[Object(z.jsx)(P.k,{name:"fileUpload.keystoreFile",label:"Keystore File",placeholder:"Select a keystore file",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"fileUpload.keystorePassword",label:"Keystore Password",type:"password",placeholder:"Keystore Password",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsx)(E.a,{sm:{span:10,offset:2},children:Object(z.jsxs)(I.a,{id:"upload",type:"submit",children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Upload"]})})})]})]})}}]),s}(r.a.Component),te=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={success:!1},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a(e.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.save=r.save.bind(Object(j.a)(r)),r}return Object(h.a)(s,[{key:"save",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.scimClient.getResourceFromFormReference(this.formReference);case 3:return s=e.sent,e.next=6,this.scimClient.createResource(s);case 6:(n=e.sent).success?n.resource.then((function(e){r.props.onCreateSuccess(e),r.setState({newKeyInfo:e.keyInfos[0]})})):this.setState({newKeyInfo:void 0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=new T.a(this.props.aliasSelectionResponse).map((function(e){return e.aliasSelection})).map((function(e){return e.stateId})).orElse(0),s=new T.a(this.props.aliasSelectionResponse).map((function(e){return e.aliasSelection})).map((function(e){return e.aliases})).orElse([]),n=new T.a(this.props.aliasSelectionResponse).map((function(e){return""})).orElse("disabled");return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("h2",{children:"Alias Selection"}),Object(z.jsx)(N.a,{id:"aliasSelectionForm-alert-success",variant:"success",show:new T.a(this.state.newKeyInfo).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Entry with alias '",new T.a(this.state.newKeyInfo).map((function(e){return e.alias})).orElse(""),"' was successfully added"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(k.a,{id:"aliasSelectionForm",onSubmit:this.save,ref:this.formReference,className:n,children:[Object(z.jsx)(P.l,{name:"aliasSelection.stateId",type:"hidden",value:t,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.o,{name:"aliasSelection.aliases",label:"Alias",options:s,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"aliasSelection.aliasOverride",label:"Alias Override",type:"text",placeholder:"Store under another alias",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"aliasSelection.privateKeyPassword",label:"Private Key Password",type:"password",placeholder:"Optional if password is identical to keystore password",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsx)(E.a,{sm:{span:10,offset:2},children:Object(z.jsxs)(I.a,{id:"save",type:"Save",children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Save"]})})})]})]})}}]),s}(r.a.Component),se=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={keyInfos:[]},n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a(n.props.scimResourcePath,n.setState),n.onDeleteSuccess=n.onDeleteSuccess.bind(Object(j.a)(n)),n.downloadKeystore=n.downloadKeystore.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.listResources();case 2:(t=e.sent).success&&t.resource.then((function(e){s.setState({keyInfos:new T.a(e.Resources[0]).map((function(e){return e.keyInfos})).orElse([])})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,s){e.newKeyInfo!==this.props.newKeyInfo&&new T.a(this.props.newKeyInfo).map((function(e){return e.value})).isPresent()&&this.setState({keyInfos:[].concat(Object(S.a)(this.state.keyInfos),[this.props.newKeyInfo.value]),aliasDeleted:void 0})}},{key:"onDeleteSuccess",value:function(e){var t=this.state.keyInfos,s=function(e,t,s){for(var n=0;n<e.length;n+=1)if(e[n][t]===s)return n;return-1}(t,"alias",e);s>-1&&t.splice(s,1),this.setState({aliasDeleted:e,keyInfos:t})}},{key:"downloadKeystore",value:function(e){var t=this;e.preventDefault(),this.setState({downloading:!0}),this.scimClient.getResource("1",X.i,{attributes:"applicationKeystore"}).then((function(e){t.setState({downloading:!1}),e.success&&e.resource.then((function(e){var t=e.applicationKeystore;Object(T.b)(t,"application-keystore-pw-123456.p12","p12")}))}))}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)("h2",{id:"application-certificate-info-header",children:[Object(z.jsx)("p",{children:"Application Keystore Infos"}),Object(z.jsx)(M.a,{className:"download-keystore-icon",children:Object(z.jsxs)("a",{id:"keystore-download-link",href:"/#",onClick:this.downloadKeystore,children:[Object(z.jsx)(P.q,{show:this.state.downloading||!1}),Object(z.jsx)(A.a,{src:L,fluid:!0}),Object(z.jsx)("p",{children:"Download"})]})})]}),Object(z.jsx)(N.a,{id:"card-list-infos-alert",variant:"info",children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(B.a,{}),' Application Keystore contains "',new T.a(this.state.keyInfos).map((function(e){return e.length})).orElse(0),'" entries']})}),Object(z.jsx)(N.a,{id:"card-list-deletion-success",variant:"success",show:void 0!==this.state.aliasDeleted,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{}),' Key entry for alias "',this.state.aliasDeleted,'" was successfully deleted']})}),Object(z.jsx)(U.a,{id:"keystore-certificate-entries",children:this.state.keyInfos.map((function(t){return Object(z.jsx)(Y,{scimResourcePath:e.props.scimResourcePath,alias:t.alias,keyInfo:t,onDeleteSuccess:e.onDeleteSuccess},t.alias)}))})]})}}]),s}(r.a.Component),ne=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).scimResourcePath="/scim/v2/Truststore",n.state={},n.onMergeSuccess=n.onMergeSuccess.bind(Object(j.a)(n)),n.onUploadSuccess=n.onUploadSuccess.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"onMergeSuccess",value:function(e){this.setState({newAliases:e})}},{key:"onUploadSuccess",value:function(e){this.setState({newAliases:[e]})}},{key:"render",value:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(re,{scimResourcePath:this.scimResourcePath,onMergeSuccess:this.onMergeSuccess}),Object(z.jsx)(ae,{scimResourcePath:this.scimResourcePath,aliasSelectionResponse:this.state.aliasSelectionResponse,onUploadSuccess:this.onUploadSuccess}),Object(z.jsx)(ie,{scimResourcePath:this.scimResourcePath,newAliases:this.state.newAliases})]})}}]),s}(r.a.Component),re=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={success:!1,showSpinner:!1},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.upload=r.upload.bind(Object(j.a)(r)),r.handleCreateResponse=r.handleCreateResponse.bind(Object(j.a)(r)),r}return Object(h.a)(s,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({addedAliases:[],duplicateAliases:[],duplicateCertificates:[]}),e.next=4,this.scimClient.getResourceFromFormReference(this.formReference);case 4:return s=e.sent,e.next=7,this.scimClient.createResource(s);case 7:n=e.sent,this.handleCreateResponse(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateResponse",value:function(e){var t=this;e.success?(e.resource.then((function(e){var s,n,r,a=e.truststoreUploadResponse;new T.a(a).ifPresent((function(e){s=e.aliases,n=new T.a(e.duplicateAliases).do((function(e){return e.sort()})).orElse([]),r=new T.a(e.duplicateCertificateAliases).do((function(e){return e.sort()})).orElse([])})),t.setState({addedAliases:new T.a(s).orElse([]),duplicateAliases:new T.a(n).orElse([]),duplicateCertificates:new T.a(r).orElse([])}),t.props.onMergeSuccess(s)})),this.setState({success:!0})):this.setState({success:!1})}},{key:"render",value:function(){var e=this,t=new T.a(this.state.duplicateAliases).map((function(e){return e.length})).orElse(0),s=new T.a(this.state.duplicateCertificates).map((function(e){return e.length})).orElse(0);return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("h2",{children:"Truststore Upload"}),Object(z.jsx)(N.a,{id:"truststoreUploadForm-alert-success",variant:"success",show:this.state.success,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Truststore was successfully merged"]})}),Object(z.jsx)(N.a,{id:"upload-form-alert-duplicate-aliases",variant:"warning",show:t>0,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.a,{})," The following aliases could not be added because the alias is duplicated.",Object(z.jsx)("br",{}),"Number of not added aliases: ",t," ",Object(z.jsx)("br",{}),"[",this.state.duplicateAliases,"]"]})}),Object(z.jsx)(N.a,{id:"upoad-form-alert-duplicate-certificates",variant:"warning",show:s>0,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.a,{})," The following aliases could not be added because the certificate is already present: [",this.state.duplicateCertificates,"]"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(k.a,{id:"truststoreUploadForm",onSubmit:this.upload,ref:this.formReference,children:[Object(z.jsx)(P.k,{name:"truststoreUpload.truststoreFile",label:"Truststore File",placeholder:"Select a truststore file",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"truststoreUpload.truststorePassword",label:"Truststore Password",type:"password",placeholder:"Truststore Password",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsx)(E.a,{sm:{span:10,offset:2},children:Object(z.jsxs)(I.a,{id:"uploadTruststore",type:"submit",children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Upload"]})})})]})]})}}]),s}(r.a.Component),ae=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={success:!1},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a(e.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.upload=r.upload.bind(Object(j.a)(r)),r.handleCreateResponse=r.handleCreateResponse.bind(Object(j.a)(r)),r}return Object(h.a)(s,[{key:"upload",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({addedAlias:void 0}),e.next=4,this.scimClient.getResourceFromFormReference(this.formReference);case 4:return s=e.sent,e.next=7,this.scimClient.createResource(s);case 7:n=e.sent,this.handleCreateResponse(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateResponse",value:function(e){var t=this;e.success?(e.resource.then((function(e){var s,n=e.certificateUploadResponse;new T.a(n).ifPresent((function(e){s=e.alias})),t.setState({addedAlias:s}),t.props.onUploadSuccess(s)})),this.setState({success:!0})):this.setState({success:!1})}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("h2",{children:"Certificate Upload"}),Object(z.jsx)(N.a,{id:"certificateUploadForm-alert-success",variant:"success",show:new T.a(this.state.addedAlias).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Entry with alias '",this.state.addedAlias,"' was successfully added"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(k.a,{id:"certificateUploadForm",onSubmit:this.upload,ref:this.formReference,children:[Object(z.jsx)(P.k,{name:"certificateUpload.certificateFile",label:"Certificate File",placeholder:"Select a certificate file",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"certificateUpload.alias",label:"Alias",placeholder:"Certificate Alias",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsx)(E.a,{sm:{span:10,offset:2},children:Object(z.jsxs)(I.a,{id:"uploadCertificate",type:"Save",children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Save"]})})})]})]})}}]),s}(r.a.Component),ie=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={aliases:[]},n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a(n.props.scimResourcePath,n.setState),n.onDeleteSuccess=n.onDeleteSuccess.bind(Object(j.a)(n)),n.downloadTruststore=n.downloadTruststore.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.listResources();case 2:(t=e.sent).success&&t.resource.then((function(e){var t=new T.a(e.Resources[0]).map((function(e){return e.aliases})).orElse([]);t.sort(),s.setState({aliases:t})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t,s){if(new T.a(this.props.newAliases).isPresent()&&e.newAliases!==this.props.newAliases){var n=this.state.aliases.concat(this.props.newAliases);n.sort(),this.setState({aliases:n,aliasDeleted:void 0})}}},{key:"onDeleteSuccess",value:function(e){var t=this.state.aliases,s=t.indexOf(e);s>-1&&t.splice(s,1),this.setState({aliasDeleted:e,aliases:t})}},{key:"downloadTruststore",value:function(e){var t=this;e.preventDefault(),this.setState({downloading:!0}),this.scimClient.getResource("1",X.q,{attributes:"applicationTruststore"}).then((function(e){t.setState({downloading:!1}),e.success&&e.resource.then((function(e){var t=e.applicationTruststore;Object(T.b)(t,"application-truststore-pw-123456.jks","jks")}))}))}},{key:"render",value:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)("h2",{id:"application-certificate-info-header",children:[Object(z.jsx)("p",{children:"Application Truststore Infos"}),Object(z.jsx)(M.a,{className:"download-keystore-icon",children:Object(z.jsxs)("a",{id:"truststore-download-link",href:"/#",onClick:this.downloadTruststore,children:[Object(z.jsx)(P.q,{show:this.state.downloading||!1}),Object(z.jsx)(A.a,{src:L,fluid:!0}),Object(z.jsx)("p",{children:"Download"})]})})]}),Object(z.jsx)(N.a,{id:"card-list-infos-alert",variant:"info",children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(B.a,{}),' Application Truststore contains "',new T.a(this.state.aliases).map((function(e){return e.length})).orElse(0),'" entries']})}),Object(z.jsx)(N.a,{id:"card-list-deletion-success",variant:"success",show:void 0!==this.state.aliasDeleted,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{}),' Key entry for alias "',this.state.aliasDeleted,'" was successfully deleted']})}),Object(z.jsx)(Z,{certificateAliases:this.state.aliases,scimResourcePath:this.props.scimResourcePath,onDeleteSuccess:this.onDeleteSuccess})]})}}]),s}(r.a.Component),ce=s(181),oe=s(180),le=s(24),ue=s(37),de=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={proxyList:[],showSpinner:!1},n.scimResourcePath="/scim/v2/Proxy",n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a(n.scimResourcePath,n.setState),n.addNewProxy=n.addNewProxy.bind(Object(j.a)(n)),n.onUpdateSuccess=n.onUpdateSuccess.bind(Object(j.a)(n)),n.onCreateSuccess=n.onCreateSuccess.bind(Object(j.a)(n)),n.addProxy=n.addProxy.bind(Object(j.a)(n)),n.removeProxy=n.removeProxy.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new T.a(this.state.currentPage*window.MAX_RESULTS+1).filter((function(e){return!isNaN(e)})).orElse(1),s=window.MAX_RESULTS,e.next=4,this.scimClient.listResources({startIndex:t,count:s,sortBy:"id"}).then((function(e){e.resource.then((function(e){var t=new T.a(e.Resources).orElse([]),s=new T.a(n.state.proxyList).orElse([]),r=le.concat(s,t);n.setState({proxyList:r,errors:{},newProxy:void 0,deletedProxyId:void 0})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNewProxy",value:function(){var e=Object(S.a)(this.state.proxyList);0===e.filter((function(e){return void 0===e.id})).length?(e.unshift({}),this.setState({proxyList:e,newProxy:void 0,deletedProxyId:void 0})):this.setState({errors:{errorMessages:["There is already a new form available in the view."]},newProxy:void 0,deletedProxyId:void 0})}},{key:"onUpdateSuccess",value:function(e){var t=Object(S.a)(this.state.proxyList),s=le.find(t,(function(t){return t.id===e.id}));le.merge(s,e),this.setState({proxyList:t,newProxy:void 0,deletedProxyId:void 0})}},{key:"onCreateSuccess",value:function(e){var t=Object(S.a)(this.state.proxyList),s=le.find(t,(function(e){return void 0===e.id}));le.merge(s,e),this.setState({proxyList:t,newProxy:s,deletedProxyId:void 0})}},{key:"addProxy",value:function(e){var t=Object(S.a)(this.state.proxyList);t.unshift(e),this.setState({proxyList:t,newProxy:void 0,deletedProxyId:void 0})}},{key:"removeProxy",value:function(e){var t=Object(S.a)(this.state.proxyList).filter((function(t){return t.id!==e}));this.setState({proxyList:t,newProxy:void 0,deletedProxyId:e,errors:{}})}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("p",{className:"add-new-resource",onClick:this.addNewProxy,children:Object(z.jsxs)("span",{className:"add-new-resource",children:["Add new Proxy ",Object(z.jsx)("br",{}),Object(z.jsx)(oe.a,{})]})}),Object(z.jsx)("h2",{children:"Proxies"}),Object(z.jsx)(N.a,{id:"save-alert-success",variant:"success",show:new T.a(this.state.newProxy).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Proxy with id '",new T.a(this.state.newProxy).map((function(e){return e.id})).orElse(-1),"' was successfully created"]})}),Object(z.jsx)(N.a,{id:"card-list-deletion-success",variant:"success",show:new T.a(this.state.deletedProxyId).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{}),' Proxy with ID "',this.state.deletedProxyId,'" was successfully deleted']})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsx)(U.a,{children:this.state.proxyList.map((function(t){return Object(z.jsx)(he,{scimResourcePath:e.scimResourcePath,proxy:t,onCreateSuccess:e.onCreateSuccess,onUpdateSuccess:e.onUpdateSuccess,onDeleteSuccess:e.removeProxy},new T.a(t.id).orElse("new"))}))})]})}}]),s}(r.a.Component),he=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={showModal:!1,editMode:new T.a(e.proxy).map((function(e){return e.id})).map((function(e){return!1})).orElse(!0),proxy:JSON.parse(JSON.stringify(e.proxy))},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new ue.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.proxy},getCurrentResource:function(){return r.state.proxy},setCurrentResource:function(e){return r.setState({proxy:e})},setState:r.setState,onCreateSuccess:r.props.onCreateSuccess,onUpdateSuccess:r.props.onUpdateSuccess,onDeleteSuccess:r.props.onDeleteSuccess}),r}return Object(h.a)(s,[{key:"render",value:function(){var e=this;return Object(z.jsx)(q.a,{id:"proxy-card-"+this.state.proxy.id,border:"warning",bg:"dark",className:"resource-card provider-card",children:Object(z.jsxs)(k.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference,children:[Object(z.jsx)(V,{id:"delete-dialog-"+this.state.proxy.id,show:this.state.showModal,variant:"danger",title:"Delete Proxy with ID '"+this.state.proxy.id+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.scimComponentBasics.deleteResource,cancelButtonText:"cancel",onCancel:function(){return e.scimComponentBasics.setStateValue("showModal",!1)}}),Object(z.jsx)(N.a,{id:"save-alert-success-"+this.state.proxy.id,variant:"success",show:new T.a(this.state.success).orElse(!1),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Proxy was successfully updated"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(q.a.Header,{id:"proxy-card-header-"+this.state.proxy.id,children:[Object(z.jsx)("div",{className:"card-name-header",children:void 0!==this.state.proxy.id&&Object(z.jsxs)("h5",{children:["Proxy '",this.state.proxy.id,"'"]})}),Object(z.jsx)(P.b,{resource:this.state.proxy,spinner:Object(z.jsx)(P.q,{show:this.state.showSpinner}),editMode:this.state.editMode,createResource:this.scimComponentBasics.createResource,updateResource:this.scimComponentBasics.updateResource,resetEditMode:this.scimComponentBasics.resetEditMode,edit:function(){return e.scimComponentBasics.setStateValue("editMode",!0)},showModal:function(){return e.scimComponentBasics.setStateValue("showModal",!0)}}),Object(z.jsx)(I.a,{id:"upload",type:"submit",hidden:!0})]}),Object(z.jsx)(q.a.Body,{children:Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(ce.a,{size:"sm",variant:"dark",borderless:!0,striped:!0,children:Object(z.jsxs)("tbody",{children:[Object(z.jsx)(P.r,{header:"Hostname",name:"hostname",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.hostname,placeholder:"The URL to the OpenID Providers discovery endpoint",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.r,{header:"Port",name:"port",type:"number",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.port,placeholder:"The port number of the Proxy",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.r,{header:"Username",name:"username",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.username,placeholder:"The username to authenticate at the proxy",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.r,{header:"Password",name:"password",resourceId:this.state.proxy.id,editMode:this.state.editMode,resourceValue:this.state.proxy.password,placeholder:"The password to authenticate at the Proxy",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.c,{resource:this.state.proxy})]})})})})]})},this.state.proxy.id)}}]),s}(r.a.Component);function je(){return Object(z.jsxs)(w.a,{defaultActiveKey:"keystore",id:"uncontrolled-tab-example",children:[Object(z.jsx)(C.a,{eventKey:"keystore",title:"Application Keystore",children:Object(z.jsx)($,{})}),Object(z.jsx)(C.a,{eventKey:"truststore",title:"Application Truststore",children:Object(z.jsx)(ne,{})}),Object(z.jsx)(C.a,{eventKey:"proxies",title:"Proxies",children:Object(z.jsx)(de,{})})]})}var pe=s(183),be=s(51),fe=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={errors:{},providerList:[],currentPage:0},n.scimResourcePath="/scim/v2/OpenIdProvider",n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a(n.scimResourcePath,n.setState),n.addNewProvider=n.addNewProvider.bind(Object(j.a)(n)),n.onUpdateSuccess=n.onUpdateSuccess.bind(Object(j.a)(n)),n.onCreateSuccess=n.onCreateSuccess.bind(Object(j.a)(n)),n.removeProvider=n.removeProvider.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.currentPage*this.props.serviceProviderConfig.filter.maxResults+1,s=this.props.serviceProviderConfig.filter.maxResults,e.next=4,this.scimClient.listResources({startIndex:t,count:s,sortBy:"name"}).then((function(e){e.resource.then((function(e){var t=new T.a(e.Resources).orElse([]),s=new T.a(n.state.providerList).orElse([]),r=le.concat(s,t);n.setState({providerList:r,errors:{}})}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNewProvider",value:function(){var e=Object(S.a)(this.state.providerList);0===e.filter((function(e){return void 0===e.id})).length?(e.unshift({}),this.setState({providerList:e,newProvider:void 0,deletedProviderName:void 0})):this.setState({errors:{errorMessages:["There is already a new form available in the view."]},newProvider:void 0,deletedProviderName:void 0})}},{key:"onUpdateSuccess",value:function(e){var t=Object(S.a)(this.state.providerList),s=le.find(t,(function(t){return t.id===e.id}));le.merge(s,e),this.setState({providerList:t,newProvider:void 0,deletedProviderName:void 0})}},{key:"onCreateSuccess",value:function(e){var t=Object(S.a)(this.state.providerList),s=le.find(t,(function(e){return void 0===e.id}));le.merge(s,e),this.setState({providerList:t,newProvider:s,deletedProviderName:void 0})}},{key:"removeProvider",value:function(e){var t=Object(S.a)(this.state.providerList),s=t.filter((function(t){return t.id===e}))[0];le.remove(t,(function(t){return t.id===e})),this.setState({providerList:t,newProvider:void 0,deletedProviderName:s.name,errors:{}})}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("p",{className:"add-new-resource",onClick:this.addNewProvider,children:Object(z.jsxs)("span",{className:"add-new-resource",children:["Add new Provider ",Object(z.jsx)("br",{}),Object(z.jsx)(oe.a,{})]})}),Object(z.jsx)("h2",{children:Object(z.jsx)("span",{children:"OpenID Provider List"})}),Object(z.jsx)(N.a,{id:"save-alert-success",variant:"success",show:new T.a(this.state.newProvider).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Provider with name '",new T.a(this.state.newProvider).map((function(e){return e.name})).orElse("-"),"' was successfully created"]})}),Object(z.jsx)(N.a,{id:"card-list-deletion-success",variant:"success",show:new T.a(this.state.deletedProviderName).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{}),' OpenID Provider "',this.state.deletedProviderName,'" was successfully deleted']})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsx)(U.a,{children:this.state.providerList.map((function(t){return Object(z.jsx)(me,{scimResourcePath:e.scimResourcePath,provider:t,onCreateSuccess:e.onCreateSuccess,onUpdateSuccess:e.onUpdateSuccess,onDeleteSuccess:e.removeProvider},new T.a(t.id).orElse("new"))}))})]})}}]),s}(r.a.Component),me=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={showModal:!1,editMode:new T.a(e.provider).map((function(e){return e.id})).map((function(e){return!1})).orElse(!0),provider:JSON.parse(JSON.stringify(e.provider))},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new ue.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.provider},getCurrentResource:function(){return r.state.provider},setCurrentResource:function(e){return r.setState({provider:e})},setState:r.setState,onCreateSuccess:r.props.onCreateSuccess,onUpdateSuccess:r.props.onUpdateSuccess,onDeleteSuccess:r.props.onDeleteSuccess}),r}return Object(h.a)(s,[{key:"render",value:function(){var e=this;return Object(z.jsxs)(q.a,{id:"provider-card-"+this.state.provider.id,border:"warning",bg:"dark",className:"resource-card provider-card",children:[Object(z.jsx)(v.a,{className:"flex-column"}),Object(z.jsxs)(k.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference,children:[Object(z.jsx)(V,{id:"delete-dialog-"+this.state.provider.id,show:this.state.showModal,variant:"danger",title:"Delete OpenID Provider with name '"+this.state.provider.name+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.scimComponentBasics.deleteResource,cancelButtonText:"cancel",onCancel:function(){return e.scimComponentBasics.setStateValue("showModal",!1)}}),Object(z.jsx)(N.a,{id:"save-alert-success",variant:"success",show:new T.a(this.state.success).orElse(!1),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," OpenID Provider was successfully updated"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(q.a.Header,{id:"provider-card-header-"+this.state.provider.id,children:[Object(z.jsxs)("div",{className:"card-name-header",children:[!1===this.state.editMode&&Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/openIdProvider/"+this.props.provider.id+"/openIdClients",children:Object(z.jsx)("a",{href:"/#",children:Object(z.jsxs)("h5",{children:[Object(z.jsx)(pe.a,{style:{color:"bisque",marginRight:"15px"},size:"20px",height:"30px"}),this.state.provider.name]})})})}),!0===this.state.editMode&&Object(z.jsx)(be.a,{value:new T.a(this.state.provider.name).orElse(""),type:"text",id:"name-"+this.state.provider.id,name:"name",placeholder:"OpenID Provider identifier",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}})]}),Object(z.jsx)(P.b,{resource:this.state.provider,spinner:Object(z.jsx)(P.q,{show:this.state.showSpinner}),editMode:this.state.editMode,createResource:this.scimComponentBasics.createResource,updateResource:this.scimComponentBasics.updateResource,resetEditMode:this.scimComponentBasics.resetEditMode,edit:function(){return e.scimComponentBasics.setStateValue("editMode",!0)},showModal:function(){return e.scimComponentBasics.setStateValue("showModal",!0)}}),Object(z.jsx)(I.a,{id:"upload",type:"submit",hidden:!0})]}),Object(z.jsx)(q.a.Body,{children:Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(ce.a,{size:"sm",variant:"dark",borderless:!0,striped:!0,children:Object(z.jsxs)("tbody",{children:[Object(z.jsx)(P.r,{header:"Discovery Endpoint",name:"discoveryEndpoint",resourceId:this.state.provider.id,editMode:this.state.editMode,resourceValue:this.state.provider.discoveryEndpoint,placeholder:"The URL to the OpenID Providers discovery endpoint",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.c,{resource:this.state.provider})]})})})})]})]},this.state.provider.id)}}]),s}(r.a.Component),Oe=(s(95),s(110)),ve=s(89),xe=s(168),ye=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={jwtBuilder:{},header:{},body:{},addX5Sha256tHeader:!1},r.setState=r.setState.bind(Object(j.a)(r)),r.scimClient=new D.a("/scim/v2/JwtBuilder",r.setState),r.formReference=Object(n.createRef)(),r.onCreateSuccess=r.onCreateSuccess.bind(Object(j.a)(r)),r.handleKeySelectionSelection=r.handleKeySelectionSelection.bind(Object(j.a)(r)),r.handleSignatureAlgorithmSelection=r.handleSignatureAlgorithmSelection.bind(Object(j.a)(r)),r.handleEncryptionAlgorithmSelection=r.handleEncryptionAlgorithmSelection.bind(Object(j.a)(r)),r.handleContentEncryptionAlgorithmSelection=r.handleContentEncryptionAlgorithmSelection.bind(Object(j.a)(r)),r.handleHeaderChange=r.handleHeaderChange.bind(Object(j.a)(r)),r.handleBodyChange=r.handleBodyChange.bind(Object(j.a)(r)),r.addJwtBody=r.addJwtBody.bind(Object(j.a)(r)),r.addDefaultJwtAttributes=r.addDefaultJwtAttributes.bind(Object(j.a)(r)),r.addKeyIdToHeader=r.addKeyIdToHeader.bind(Object(j.a)(r)),r.handleAddSha256Thumbprint=r.handleAddSha256Thumbprint.bind(Object(j.a)(r)),r.scimComponentBasics=new ue.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.jwtBuilder},getCurrentResource:function(){return r.state.jwtBuilder},setCurrentResource:function(e){},setState:r.setState,onCreateSuccess:r.onCreateSuccess}),r}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.addHeader(),this.addDefaultJwtAttributes()}},{key:"componentDidUpdate",value:function(e,t,s){e.jwtInfo!==this.props.jwtInfo&&void 0!==this.props.jwtInfo&&(this.handleSignatureAlgorithmSelection(this.props.jwtInfo.signatureAlgorithms[0]),this.addHeader())}},{key:"onCreateSuccess",value:function(e){document.getElementById("jwt").value=e.jwt,this.setState({header:JSON.parse(e.header)}),this.addHeader()}},{key:"handleKeySelectionSelection",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedKey:t});case 2:document.getElementById("keyId").value=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addKeyIdToHeader",value:function(){var e=this.state.header;e.kid=this.state.selectedKey,this.setState({header:e}),this.addHeader()}},{key:"handleSignatureAlgorithmSelection",value:function(e){var t=this.state.header;t.alg=e,t.enc=void 0,this.setState({header:t}),this.addHeader()}},{key:"handleEncryptionAlgorithmSelection",value:function(e){var t=this.state.header;t.alg=e,t.enc=new T.a(this.state.header.enc).orElse(new T.a(this.state.jwtInfo).map((function(e){return e.encryptionAlgorithms[0]})).orElse("")),this.setState({header:t}),this.addHeader()}},{key:"handleContentEncryptionAlgorithmSelection",value:function(e){var t=this.state.header;t.enc=e,this.setState({header:t}),this.addHeader()}},{key:"handleHeaderChange",value:function(e){try{var t=JSON.parse(e.target.value);this.setState({header:t})}catch(s){}}},{key:"handleBodyChange",value:function(e){try{var t=JSON.parse(e.target.value);this.setState({body:t})}catch(s){}}},{key:"addHeader",value:function(){document.getElementById("jwt-builder-header").value=JSON.stringify(this.state.header,void 0,4)}},{key:"addDefaultJwtAttributes",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={iss:new T.a(this.state.body.iss).orElse(""),aud:new T.a(this.state.body.aud).orElse(""),sub:new T.a(this.state.body.sub).orElse(""),iat:(new Date).getTime(),exp:(new Date).getTime()+86400,jti:new T.a(this.state.body.jti).orElse("")},s=le.merge(this.state.body,t),e.next=4,this.setState({body:s});case 4:this.addJwtBody();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addJwtBody",value:function(){document.getElementById("jwt-builder-body").value=JSON.stringify(this.state.body,void 0,4)}},{key:"handleAddSha256Thumbprint",value:function(e){var t=e.target.checked;this.setState({addX5Sha256tHeader:t})}},{key:"render",value:function(){var e=this,t=this.state.selectedKey===this.state.header.kid;return Object(z.jsxs)(O.a,{children:[Object(z.jsx)(R.a,{children:Object(z.jsx)(E.a,{sm:12,children:((this.state.errors||{}).errorMessages||[]).length>0&&Object(z.jsx)(N.a,{variant:"danger",children:Object(z.jsx)("ul",{className:"error-list",children:this.state.errors.errorMessages.map((function(e,t){return Object(z.jsx)(P.g,{message:e},"error-message-"+t)}))})})})}),Object(z.jsxs)(R.a,{children:[Object(z.jsxs)(E.a,{children:[Object(z.jsxs)(ve.a,{children:[Object(z.jsx)(xe.a,{id:"jwt-builder-aliases",title:"available keys",onSelect:this.handleKeySelectionSelection,children:new T.a(this.props.keyInfos).isPresent()&&this.props.keyInfos.map((function(e){return Object(z.jsx)(ve.a.Item,{eventKey:e.alias,children:e.alias+" ("+e.keyAlgorithm+"-"+e.keyLength+"-bit)"},e.alias)}))}),Object(z.jsxs)("p",{children:["selected key:",Object(z.jsx)(G.a,{placement:"top",overlay:Object(z.jsx)(J.a,{children:"Add as 'kid' to JOSE-header"}),children:Object(z.jsx)("span",{className:"code",style:{marginLeft:"15px",color:t?"lightgreen":"lightcoral",cursor:"pointer"},onClick:this.addKeyIdToHeader,children:this.state.selectedKey})})]})]}),Object(z.jsx)(ve.a,{children:Object(z.jsx)(xe.a,{id:"signatureAlgorithms",title:"signature algorithms",onSelect:this.handleSignatureAlgorithmSelection,children:new T.a(this.props.jwtInfo).map((function(e){return e.signatureAlgorithms})).isPresent()&&this.props.jwtInfo.signatureAlgorithms.map((function(e){return Object(z.jsx)(ve.a.Item,{eventKey:e,children:e},e)}))})}),Object(z.jsx)(ve.a,{children:Object(z.jsx)(xe.a,{id:"keyWrapAlgorithms",title:"key wrap algorithms",onSelect:this.handleEncryptionAlgorithmSelection,children:new T.a(this.props.jwtInfo).map((function(e){return e.keyWrapAlgorithms})).isPresent()&&this.props.jwtInfo.keyWrapAlgorithms.map((function(e){return Object(z.jsx)(ve.a.Item,{eventKey:e,children:e},e)}))})}),Object(z.jsx)(ve.a,{children:Object(z.jsx)(xe.a,{id:"contentEncryptionAlgorithms",title:"content encryption algorithms",onSelect:this.handleContentEncryptionAlgorithmSelection,children:new T.a(this.props.jwtInfo).isPresent()&&this.props.jwtInfo.encryptionAlgorithms.map((function(e){return Object(z.jsx)(ve.a.Item,{eventKey:e,children:e},e)}))})}),Object(z.jsx)(I.a,{type:"button",className:"functional-button",onClick:this.addDefaultJwtAttributes,children:"extend by JWT attributes"}),Object(z.jsx)(k.a.Check,{onChange:this.handleAddSha256Thumbprint,className:"jwt sha-256-check",label:"Add SHA-256 thumbprint to header"})]}),Object(z.jsxs)(E.a,{sm:9,children:[Object(z.jsx)(O.a,{children:Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{children:Object(z.jsxs)(k.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference,children:[Object(z.jsx)(P.l,{name:"keyId",type:"hidden",value:this.state.selectedKey||"",onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.j,{name:"addX5Sha256tHeader",type:"hidden",readOnly:!0,checked:this.state.addX5Sha256tHeader,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{id:"jwt-builder-header",name:"header",type:"text",as:"textarea",onChange:this.handleHeaderChange,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{id:"jwt-builder-body",name:"body",type:"text",as:"textarea",onChange:this.handleBodyChange,onError:function(t){return e.scimClient.getErrors(e.state,t)}})]})}),Object(z.jsx)(E.a,{sm:5,children:Object(z.jsx)(k.a.Control,{id:"jwt",sm:5,as:"textarea",onChange:this.handleBodyChange})})]})}),Object(z.jsxs)(I.a,{id:"create-jwt",type:"button",onClick:this.scimComponentBasics.onSubmit,children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Create"]})]})]})]})}}]),s}(r.a.Component),ge=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a("/scim/v2/JwtBuilder",n.setState),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.scimClient.getResource(null,"/scim/v2/Keystore").then((function(t){t.success&&t.resource.then((function(t){e.setState({keyInfos:t.Resources[0].keyInfos})}))}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(pt.Consumer,{children:function(t){return t&&Object(z.jsxs)(w.a,{defaultActiveKey:"jwtparser",id:"uncontrolled-tab-example",children:[Object(z.jsx)(C.a,{eventKey:"jwtparser",title:"JWT Parser",children:Object(z.jsx)(Oe.a,{keyInfos:e.state.keyInfos,jwtInfo:t.jwtInfo})}),Object(z.jsx)(C.a,{eventKey:"jwtbuilder",title:"JWT Builder",children:Object(z.jsx)(ye,{keyInfos:e.state.keyInfos,jwtInfo:t.jwtInfo})})]})}})}}]),s}(r.a.Component),we=s(184),Ce=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={errors:{},clientList:[],aliases:[],currentPage:0,keyInfos:[],provider:{}},n.scimResourcePath=X.j,n.setState=n.setState.bind(Object(j.a)(n)),n.scimClient=new D.a(n.scimResourcePath,n.setState),n.addNewClient=n.addNewClient.bind(Object(j.a)(n)),n.onUpdateSuccess=n.onUpdateSuccess.bind(Object(j.a)(n)),n.onCreateSuccess=n.onCreateSuccess.bind(Object(j.a)(n)),n.removeClient=n.removeClient.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s,n,r,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.currentPage*this.props.serviceProviderConfig.filter.maxResults+1,s=this.props.serviceProviderConfig.filter.maxResults,n=this.props.match.params.id,r=X.k,e.next=6,this.scimClient.getResource(n,r).then((function(e){e.success?e.resource.then((function(e){a.setState({provider:e})})):e.resource.then((function(e){a.setState({errors:{errorMessages:[e.detail]}})}))}));case 6:return e.next=8,this.scimClient.listResources({startIndex:t,count:s,sortBy:"clientId",filter:"openIDProviderId eq "+n}).then((function(e){e.resource.then((function(e){var t=new T.a(e.Resources).orElse([]),s=new T.a(a.state.clientList).orElse([]),n=le.concat(s,t);a.setState({clientList:n,errors:{}})}))}));case 8:this.loadKeystoreInfos();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKeystoreInfos",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/scim/v2/Keystore",this.scimClient.getResource(void 0,"/scim/v2/Keystore").then((function(e){e.success?e.resource.then((function(e){t.setState({keyInfos:new T.a(e).map((function(e){return e.Resources})).map((function(e){return e[0]})).map((function(e){return e.keyInfos})).orElse([])})})):e.resource.then((function(e){t.setState({errors:{errorMessages:[e.detail]}})}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNewClient",value:function(){var e=Object(S.a)(this.state.clientList);0===e.filter((function(e){return void 0===e.id})).length?(e.unshift({}),this.setState({clientList:e,newClient:void 0,deletedClientId:void 0})):this.setState({errors:{errorMessages:["There is already a new form available in the view."]},newClient:void 0,deletedClientId:void 0})}},{key:"onCreateSuccess",value:function(e){var t=Object(S.a)(this.state.clientList),s=le.find(t,(function(e){return void 0===e.id}));le.merge(s,e),this.setState({providerList:t,newProvider:s,deletedClientId:void 0})}},{key:"onUpdateSuccess",value:function(e){var t=Object(S.a)(this.state.clientList),s=le.find(t,(function(t){return t.id===e.id}));le.merge(s,e),this.setState({clientList:t,newProxy:void 0,deletedClientId:void 0})}},{key:"removeClient",value:function(e){var t=Object(S.a)(this.state.clientList),s=t.filter((function(t){return t.id===e}))[0];le.remove(t,(function(t){return t.id===e})),this.setState({clientList:t,newClient:void 0,deletedClientId:s.clientId,errors:{}})}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/openIdProvider/",children:Object(z.jsx)("a",{href:"/#",children:Object(z.jsxs)("h5",{style:{height:"35px",padding:"0",paddingLeft:"10px"},children:[Object(z.jsx)(we.a,{style:{color:"bisque"},height:"35px",size:"25px"}),Object(z.jsx)("span",{style:{marginLeft:"15px"},children:"Back to Provider Overview"})]})})}),Object(z.jsxs)("h5",{children:["Provider: ",Object(z.jsx)("span",{style:{color:"lightgray"},children:this.state.provider.name})]}),Object(z.jsx)("p",{className:"add-new-resource",onClick:this.addNewClient,children:Object(z.jsxs)("span",{className:"add-new-resource",children:["Add new Client ",Object(z.jsx)("br",{}),Object(z.jsx)(oe.a,{})]})}),Object(z.jsx)("h2",{children:Object(z.jsx)("span",{children:"OpenID Client List"})}),Object(z.jsx)(N.a,{id:"save-alert-success",variant:"success",show:new T.a(this.state.newClient).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Client with clientId '",new T.a(this.state.newClient).map((function(e){return e.clientId})).orElse("-"),"' was successfully created"]})}),Object(z.jsx)(N.a,{id:"card-list-deletion-success",variant:"success",show:new T.a(this.state.deletedClientId).isPresent(),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{}),' OpenID Client "',this.state.deletedClientId,'" was successfully deleted']})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsx)(U.a,{children:this.state.clientList.map((function(t){return Object(z.jsx)(Se,{provider:e.state.provider,scimResourcePath:e.scimResourcePath,client:t,keyInfos:e.state.keyInfos,onCreateSuccess:e.onCreateSuccess,onUpdateSuccess:e.onUpdateSuccess,onDeleteSuccess:e.removeClient},new T.a(t.id).orElse("new"))}))})]})}}]),s}(r.a.Component),Se=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;return Object(d.a)(this,s),(r=t.call(this,e)).state={showModal:!1,editMode:new T.a(e.client).map((function(e){return e.id})).map((function(e){return!1})).orElse(!0),authenticationType:e.client.authenticationType,client:JSON.parse(JSON.stringify(e.client))},r.setState=r.setState.bind(Object(j.a)(r)),r.resetEditMode=r.resetEditMode.bind(Object(j.a)(r)),r.scimClient=new D.a(r.props.scimResourcePath,r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new ue.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return r.props.client},getCurrentResource:function(){return r.state.client},setCurrentResource:function(e){return r.setState({client:e})},setState:r.setState,onCreateSuccess:r.props.onCreateSuccess,onUpdateSuccess:r.props.onUpdateSuccess,onDeleteSuccess:r.props.onDeleteSuccess}),r}return Object(h.a)(s,[{key:"resetEditMode",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scimComponentBasics.resetEditMode(),t=JSON.parse(JSON.stringify(this.props.client)),e.next=4,this.setState({client:t,authenticationType:t.authenticationType});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return this.props.keyInfos.forEach((function(e){!0===e.hasPrivateKey&&t.push(e.alias)})),Object(z.jsx)(q.a,{id:"client-card-"+this.state.client.id,border:"warning",bg:"dark",className:"resource-card client-card",children:Object(z.jsxs)(k.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference,children:[Object(z.jsx)(V,{id:"delete-dialog-"+this.state.client.id,show:this.state.showModal,variant:"danger",title:"Delete OpenID Client with clientId '"+this.state.client.clientId+"'",message:"Are you sure?",submitButtonText:"delete",onSubmit:this.scimComponentBasics.deleteResource,cancelButtonText:"cancel",onCancel:function(){return e.scimComponentBasics.setStateValue("showModal",!1)}}),Object(z.jsx)(N.a,{id:"save-alert-success",variant:"success",show:new T.a(this.state.success).orElse(!1),children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," OpenID Client was successfully updated"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(q.a.Header,{id:"client-card-header-"+this.state.client.id,children:[Object(z.jsx)("div",{className:"card-name-header",children:Object(z.jsx)("div",{className:"card-name-header",children:void 0!==this.state.client.clientId&&Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/openIdProvider/"+this.props.provider.id+"/client/"+this.state.client.id,children:Object(z.jsx)("a",{href:"/#",children:Object(z.jsxs)("h5",{children:[Object(z.jsx)(pe.a,{style:{color:"bisque",marginRight:"15px"},size:"20px",height:"30px"}),"Client '",this.state.client.clientId,"'"]})})})})}),Object(z.jsx)(P.b,{resource:this.state.client,spinner:Object(z.jsx)(P.q,{show:this.state.showSpinner}),editMode:this.state.editMode,createResource:this.scimComponentBasics.createResource,updateResource:this.scimComponentBasics.updateResource,resetEditMode:this.resetEditMode,edit:function(){return e.scimComponentBasics.setStateValue("editMode",!0)},showModal:function(){return e.scimComponentBasics.setStateValue("showModal",!0)}}),Object(z.jsx)(I.a,{id:"upload",type:"submit",hidden:!0})]}),Object(z.jsx)(q.a.Body,{children:Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(ce.a,{size:"sm",variant:"dark",borderless:!0,striped:!0,children:Object(z.jsxs)("tbody",{children:[Object(z.jsx)(P.p,{name:"openIdProviderId",type:"number",value:this.props.provider.id,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.r,{header:"Client ID",name:"clientId",resourceId:this.state.client.id,editMode:this.state.editMode,resourceValue:this.state.client.clientId,placeholder:"The identifier for this client at its OpenID Provider",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.e,{header:"Authentication Type",name:"authenticationType",editMode:this.state.editMode,selections:["basic","jwt"],selected:new T.a(this.state.authenticationType).orElse("basic"),onChange:function(t){e.scimComponentBasics.updateInput(t.target.name,t.target.value),e.setState({authenticationType:t.target.value})},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),(void 0===this.state.authenticationType||"basic"===this.state.authenticationType)&&Object(z.jsx)(P.r,{header:"Client Secret",name:"clientSecret",resourceId:this.state.client.id,editMode:this.state.editMode,resourceValue:this.state.client.clientSecret,placeholder:"The password to access the OpenID Providers token endpoint",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),"jwt"===this.state.authenticationType&&Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.d,{header:"Signature Key Reference",name:"signingKeyRef",editMode:this.state.editMode,selections:[""].concat(t),selected:this.state.client.signingKeyRef,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(pt.Consumer,{children:function(t){return Object(z.jsx)(P.d,{header:"JWT Signature Algorithm",name:"signatureAlgorithm",editMode:e.state.editMode,selections:[""].concat(Object(S.a)(t.jwtInfo.signatureAlgorithms)),selected:e.state.client.signatureAlgorithm,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}})}}),Object(z.jsx)(P.r,{header:"Audience",name:"audience",resourceId:this.state.client.audience,editMode:this.state.editMode,resourceValue:this.state.client.audience,placeholder:"audience value that should match the providers issuer-value",onChange:this.scimComponentBasics.updateInput,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.d,{header:"Decryption Key Reference",name:"decryptionKeyRef",editMode:this.state.editMode,selections:[""].concat(t),selected:this.state.client.decryptionKeyRef,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)}})]}),Object(z.jsx)(P.c,{resource:this.state.client})]})})})})]})},this.state.client.id)}}]),s}(r.a.Component),ke=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var r;Object(d.a)(this,s);var a=(r=t.call(this,e)).props.client["urn:ietf:params:scim:schemas:captaingoldfish:2.0:HttpClientSettings"];r.state={success:!1,showSpinner:!1,settings:{},proxies:[],keyInfos:[],originalSetting:JSON.parse(JSON.stringify(a)),httpSettings:a,enableHostnameVerifier:a.useHostnameVerifier},r.setState=r.setState.bind(Object(j.a)(r));return r.scimClient=new D.a("/scim/v2/HttpClientSettings",r.setState),r.formReference=Object(n.createRef)(),r.scimComponentBasics=new ue.a({scimClient:r.scimClient,formReference:r.formReference,getOriginalResource:function(){return new T.a(r.state.originalSetting).orElse({})},getCurrentResource:function(){return r.state.httpSettings},setCurrentResource:function(e){return r.setState({client:e})},setState:r.setState,onCreateSuccess:function(e){return console.error("create must not be called!")},onUpdateSuccess:r.onUpdateSuccess}),r.onUpdateSuccess=r.onUpdateSuccess.bind(Object(j.a)(r)),r}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadProxies();case 2:return e.next=4,this.loadKeystoreInfos();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProxies",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/scim/v2/Proxy",e.next=3,new D.a("/scim/v2/Proxy",this.setState).listResources().then((function(e){e.success?e.resource.then((function(e){t.setState({proxies:e.Resources})})):e.resource.then((function(e){t.setState({errors:{errorMessages:[e.detail]}})}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKeystoreInfos",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/scim/v2/Keystore",this.scimClient.getResource(void 0,"/scim/v2/Keystore").then((function(e){e.success?e.resource.then((function(e){t.setState({keyInfos:new T.a(e).map((function(e){return e.Resources})).map((function(e){return e[0]})).map((function(e){return e.keyInfos})).orElse([])})})):e.resource.then((function(e){t.setState({errors:{errorMessages:[e.detail]}})}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUpdateSuccess",value:function(){}},{key:"render",value:function(){var e=this,t=[];this.state.proxies.forEach((function(e){t.push({id:e.id,value:e.hostname+":"+e.port})}));var s=[];return this.state.keyInfos.forEach((function(e){!0===e.hasPrivateKey&&s.push({id:e.alias,value:e.alias+" ("+e.keyAlgorithm+"-"+e.keyLength+")"})})),Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)("h2",{children:["Http Client Settings for ",this.props.client.clientId]}),Object(z.jsx)(N.a,{id:"uploadForm-alert-success",variant:"success",show:this.state.success,children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.b,{})," Http Client Settings were successfully saved"]})}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(k.a,{onSubmit:this.scimComponentBasics.onSubmit,ref:this.formReference,children:[Object(z.jsx)(P.l,{name:"id",isHidden:!0,type:"string",readOnly:!0,value:this.state.httpSettings.id,onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"openIdClientReference",isHidden:!0,type:"number",readOnly:!0,value:new T.a(this.props.client.id).orElse(""),onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"requestTimeout",type:"number",label:"Request Timeout",value:this.state.httpSettings.requestTimeout,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"connectionTimeout",label:"Connection Timeout",type:"number",value:this.state.httpSettings.connectionTimeout,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.l,{name:"socketTimeout",label:"Socket Timeout",type:"number",value:this.state.httpSettings.socketTimeout,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.j,{id:"useHostnameVerifier",name:"useHostnameVerifier",label:"Enable Hostname Verifier",checked:this.state.enableHostnameVerifier,onChange:function(t){return e.setState({enableHostnameVerifier:t.target.checked})},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.m,{name:"proxyReference",label:"Proxy",selections:[""].concat(t),selected:this.state.httpSettings.proxyReference,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(P.m,{name:"tlsClientAuthAliasReference",label:"TLS Client Auth Key Reference",selections:[""].concat(s),selected:this.state.httpSettings.tlsClientAuthAliasReference,onChange:function(t){return e.scimComponentBasics.updateInput(t.target.name,t.target.value)},onError:function(t){return e.scimClient.getErrors(e.state,t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsx)(E.a,{sm:{span:10,offset:2},children:Object(z.jsxs)(I.a,{id:"upload",type:"submit",children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Save"]})})})]})]})}}]),s}(r.a.Component),Re=s(185),Ee=s(23),Ie=s(158),Pe=s(164),Te=s(165),De=s(111),Ne=s(99);function Me(e){return Object(z.jsx)("div",{className:"grant-type-workflow",children:Object(z.jsx)(Ae,{header:e.header,headerClass:e.headerClass,content:function(){return Object(z.jsx)(Ue,{accessTokenDetails:e.accessTokenDetails})},remove:e.onRemove})})}function Ae(e){var t=Object(n.useState)(!0),s=Object(Ee.a)(t,2),a=s[0],i=s[1],c=new T.a(e.headerClass).map((function(e){return" "+e})).orElse("");return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)(N.a,{className:"collapse-header"+c,onClick:function(){i(!a)},children:[!0===a&&Object(z.jsx)(Pe.a,{}),!1===a&&Object(z.jsx)(Te.a,{}),e.header,void 0!==e.remove&&Object(z.jsx)(De.a,{onClick:e.remove,className:"remove-collapse"})]}),Object(z.jsx)(Ne.a,{in:a,children:Object(z.jsx)(q.a,{className:"workflow-card",children:Object(z.jsx)(q.a.Body,{children:e.content()})})})]})}function Ue(e){return Object(z.jsxs)("div",{className:"workflow-details",children:[Object(z.jsx)(Le,{accessTokenDetails:e.accessTokenDetails}),Object(z.jsx)(Be,{accessTokenDetails:e.accessTokenDetails})]})}function Le(e){return Object(z.jsx)(P.f,{header:"Access Token Request Details",variant:"workflow-details",content:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.f,{header:"Request Header",variant:"workflow-details",headerClass:"nested-workflow-details-header",bodyClass:"nested-workflow-details-body",content:function(){return Object(z.jsx)(Fe,{keyPrefix:"access-token-request-header-row-",nameValueList:(e.accessTokenDetails||{}).requestHeaders||[]})}}),Object(z.jsx)(P.f,{header:"Request Parameter",variant:"workflow-details",headerClass:"nested-workflow-details-header",bodyClass:"nested-workflow-details-body",content:function(){return Object(z.jsx)(Fe,{keyPrefix:"access-token-request-header-row-",nameValueList:(e.accessTokenDetails||{}).requestParams||[]})}})]})}})}function Be(e){var t=e.accessTokenDetails||{},s=t.statusCode,n=t.responseHeaders||[],a=t.plainResponse||"",i=(n.filter((function(e){return"content-type"===e.name.toLowerCase()}))[0]||[]).value;return Object(z.jsx)(P.f,{header:Object(z.jsxs)("span",{children:["Access Token Response Details",Object(z.jsxs)("span",{className:"bold",children:[" (Status: ",s,")"]})]}),open:!0,variant:"workflow-details",content:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.f,{header:"Response Header",variant:"workflow-details",headerClass:"nested-workflow-details-header",bodyClass:"nested-workflow-details-body",content:function(){return Object(z.jsx)(Fe,{keyPrefix:"access-token-request-header-row-",nameValueList:n})}}),Object(z.jsx)(P.f,{header:"Access Token Response",open:!0,variant:"workflow-details",headerClass:"nested-workflow-details-header",content:function(){return Object(z.jsx)(Ke,{contentType:i,tokenResponse:a})}})]})}})}function Fe(e){return Object(z.jsx)(r.a.Fragment,{children:e.nameValueList.map((function(t,s){return Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,children:t.name}),Object(z.jsx)(E.a,{sm:10,children:t.value})]},e.keyPrefix+s)}))})}var Ke=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={errorMessages:[]},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.parseJsonContent()}},{key:"parseJsonContent",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(this.props.contentType||"").toLowerCase().includes("application/json");try{(s={}).json=JSON.parse(this.props.tokenResponse),t||(s.errorMessages=[].concat(Object(S.a)(this.state.errorMessages),["Found invalid content-type: "+this.props.contentType+". Response is valid JSON but content-type header does not match."])),this.setState(s)}catch(n){console.error(n),t&&this.setState({errorMessages:[].concat(Object(S.a)(this.state.errorMessages),["Expected content to be JSON but could not parse it",n.message])})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(z.jsxs)("div",{id:"access-token-response-container",children:[this.state.errorMessages.length>0&&Object(z.jsx)(N.a,{variant:"danger",children:Object(z.jsx)("ul",{className:"error-list",children:this.state.errorMessages.map((function(e,t){return Object(z.jsx)(P.g,{message:e},"error-message-"+t)}))})}),this.state.json&&Object.keys(this.state.json).map((function(t,s){return Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,children:t}),Object(z.jsxs)(E.a,{sm:10,children:[" ",e.state.json[t]," "]})]},"access-token-response-json-param-"+s)})),!this.state.json&&Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,children:"access_token"}),Object(z.jsxs)(E.a,{sm:10,children:[" ",this.props.tokenResponse," "]})]},"access-token-response-json-param-_")]})}}]),s}(r.a.Component),Je=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(j.a)(n)),n.forceUpdate=n.forceUpdate.bind(Object(j.a)(n)),n.loadAuthorizationQueryParameterView=n.loadAuthorizationQueryParameterView.bind(Object(j.a)(n)),n.getAuthRequestStatus=n.getAuthRequestStatus.bind(Object(j.a)(n)),n.loadAuthorizationCodeResponseDetailsView=n.loadAuthorizationCodeResponseDetailsView.bind(Object(j.a)(n)),n.retrieveAccessTokenDetails=n.retrieveAccessTokenDetails.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}},{key:"componentDidMount",value:function(){var e=this.getAuthRequestStatus;window.open(this.props.requestDetails.authorizationCodeGrantUrl,"_blank","location=yes,height=570,width=520,scrollbars=yes,status=yes"),this.state.interval=setInterval((function(){e()}),2e3)}},{key:"getAuthRequestStatus",value:function(){var e=new D.a(X.b,this.setState),t=Object.fromEntries(new URL(this.props.requestDetails.authorizationCodeGrantUrl).searchParams).state,s=this.state,n=this.setState;e.getResource(t).then((function(e){e.success&&e.resource.then((function(e){clearInterval(s.interval),delete s.interval,n({authorizationResponseUrl:e.authorizationResponseUrl})}))}))}},{key:"loadAuthorizationQueryParameterView",value:function(){var e=this,t=Object.fromEntries(new URL(this.props.requestDetails.authorizationCodeGrantUrl).searchParams),s=void 0===this.state.authorizationResponseUrl;return Object(z.jsxs)("div",{className:"workflow-details",children:[Object(z.jsxs)(N.a,{variant:"info",show:s,children:[Object(z.jsx)(Ie.a,{})," The authorization code grant will try to open a new browser window. Make sure your popup blocker does not block this. If you closed this window before finishing the login process. Close this workflow and start again."]}),Object(z.jsx)(P.f,{header:"Authorization Request Details",variant:"workflow-details",content:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,className:"url-base-value",children:"authCodeUrl"}),Object(z.jsx)(E.a,{sm:10,className:"url-base-value",children:e.props.requestDetails.authorizationCodeGrantUrl})]}),Object.keys(t).map((function(e,s){return Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,children:e}),Object(z.jsx)(E.a,{sm:10,children:t[e]})]},"auth-code-request-row-"+s)}))]})}})]})}},{key:"retrieveAccessTokenDetails",value:function(e){var t=this;e.preventDefault();var s=new D.a(X.a,this.setState),n=new URL(this.state.authorizationResponseUrl),r=Object.fromEntries(n.searchParams),a=Object.fromEntries(new URL(this.props.requestDetails.authorizationCodeGrantUrl).searchParams),i={grantType:"authorization_code",openIdClientId:parseInt(this.props.client.id),redirectUri:a.redirect_uri,authorizationCode:r.code};s.createResource(i).then((function(e){e.success&&e.resource.then((function(e){t.setState({accessTokenDetails:e})}))}))}},{key:"loadAuthorizationCodeResponseDetailsView",value:function(){var e=this;if(!this.state.authorizationResponseUrl)return null;var t=new URL(this.state.authorizationResponseUrl),s=Object.fromEntries(t.searchParams),n=this.state.errors||{};return Object(z.jsx)("div",{className:"workflow-details",children:Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.f,{header:"Authorization Response Details",open:!0,variant:"workflow-details",content:function(){return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,className:"url-base-value",children:"authResponseUrl"}),Object(z.jsx)(E.a,{sm:10,className:"url-base-value",children:e.state.authorizationResponseUrl})]}),Object.keys(s).map((function(e,t){return Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:2,children:e}),Object(z.jsx)(E.a,{sm:10,children:s[e]})]},"auth-code-response-row-"+t)}))]})}}),Object(z.jsxs)(I.a,{type:"submit",onClick:function(t){e.setState({isLoading:!0}),e.retrieveAccessTokenDetails(t)},style:{marginTop:"15px",marginBottom:"15px"},children:[Object(z.jsx)(P.q,{show:this.state.isLoading})," Get Access Token"]}),this.state.accessTokenDetails&&Object(z.jsx)(Ue,{accessTokenDetails:this.state.accessTokenDetails}),Object(z.jsx)(P.a,{variant:"danger",icon:Object(z.jsx)(F.a,{}),messages:n.errorMessages||new T.a(n.detail).map((function(e){return[e]})).orElse([])})]})})}},{key:"render",value:function(){var e=this;return Object(z.jsx)("div",{className:"grant-type-workflow",children:Object(z.jsx)(qe,{isLoading:void 0===this.state.authorizationResponseUrl,content:function(){return Object(z.jsxs)(r.a.Fragment,{children:[e.loadAuthorizationQueryParameterView(),e.loadAuthorizationCodeResponseDetailsView()]})},remove:this.props.onRemove})})}}]),s}(r.a.Component);function qe(e){var t=Object(n.useState)(!0),s=Object(Ee.a)(t,2),a=s[0],i=s[1];return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)(N.a,{className:"collapse-header authorization-code-grant",variant:"dark",onClick:function(){i(!a)},children:[!0===a&&Object(z.jsx)(Pe.a,{}),!1===a&&Object(z.jsx)(Te.a,{}),Object(z.jsxs)("span",{children:[Object(z.jsx)(P.q,{show:e.isLoading})," Authorization Code Grant/Flow"]}),void 0!==e.remove&&Object(z.jsx)(De.a,{onClick:e.remove,className:"remove-collapse"})]}),Object(z.jsx)(Ne.a,{in:a,children:Object(z.jsx)(q.a,{className:"workflow-card",children:Object(z.jsx)(q.a.Body,{children:e.content()})})})]})}var Ge=function(){function e(t){Object(d.a)(this,e),this.scimClient=new D.a(X.f,t)}return Object(h.a)(e,[{key:"updateAuthCodeSettings",value:function(e,t,s,n){var r={authCodeParameters:{redirectUri:t,queryParameters:s}};this.patchResource(e,r,n)}},{key:"updateClientCredentialsSettings",value:function(e,t,s){var n={clientCredentialsParameters:{scope:t}};this.patchResource(e,n,s)}},{key:"updateResourceOwnerPasswordCredentialsSettings",value:function(e,t,s,n,r){var a={resourceOwnerPasswordParameters:{username:t,password:s,scope:n}};this.patchResource(e,a,r)}},{key:"patchResource",value:function(e,t,s){var n={schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"],Operations:[{op:"replace",value:t}]};this.scimClient.patchResource(n,e).then((function(e){e.success&&e.resource.then((function(t){new T.a(s).ifPresent((function(s){return s(t,e.status)}))}))}))}}]),e}(),ze=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e,r){var a;return Object(d.a)(this,s),(a=t.call(this,e,r)).authCodeGrantType="authorization_code",a.clientCredentialsGrantType="client_credentials",a.resourceOwnerGrantType="password",a.state={authenticationType:a.authCodeGrantType,workflowDetails:a.props.client[X.g]||{},isLoading:!1,responseDetails:[]},a.formReference=Object(n.createRef)(),a.resetRedirectUri=a.resetRedirectUri.bind(Object(j.a)(a)),a.handleNestedElementChange=a.handleNestedElementChange.bind(Object(j.a)(a)),a.handleGrantTypeResponseDetails=a.handleGrantTypeResponseDetails.bind(Object(j.a)(a)),a.removeGrantTypeDetails=a.removeGrantTypeDetails.bind(Object(j.a)(a)),a}return Object(h.a)(s,[{key:"resetRedirectUri",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s=this.state,le.set(s,"workflowDetails.authCodeParameters.redirectUri",this.props.originalRedirectUri),this.setState(s);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleGrantTypeResponseDetails",value:function(e,t){var s=this.state.responseDetails||[];t.grantType=e,s.unshift(t);var n={};n.responseDetails=s,this.setState(n)}},{key:"handleNestedElementChange",value:function(e,t){var s=this.state.workflowDetails;le.set(s,e,t),this.setState({workflowDetails:s})}},{key:"removeGrantTypeDetails",value:function(e){var t=this.state.responseDetails,s=t.indexOf(e);t.splice(s,1);var n={};n.responseDetails=t,this.setState(n)}},{key:"render",value:function(){var e=this,t=[{value:this.authCodeGrantType,display:"Authorization Code Grant/Flow"},{value:this.clientCredentialsGrantType,display:"Client Credentials Grant"},{value:this.resourceOwnerGrantType,display:"Resource Owner Password Credentials Grant"}];return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)("h2",{children:"OpenID Connect Workflow"}),Object(z.jsx)(P.i,{errors:this.state.errors}),Object(z.jsxs)(k.a,{ref:this.formReference,onSubmit:function(e){return e.preventDefault()},children:[Object(z.jsx)(P.n,{name:"authenticationType",label:"AuthenticationType Type",displayType:"vertical",selected:this.state.authenticationType,selections:t,onChange:function(t){return e.setState({authenticationType:t.target.value})},onError:function(){}}),this.state.authenticationType===this.authCodeGrantType&&Object(z.jsx)(He,{formReference:this.formReference,originalRedirectUri:this.props.originalRedirectUri,workflowDetails:this.state.workflowDetails,isLoading:this.state.isLoading,handleChange:this.handleNestedElementChange,resetRedirectUri:this.resetRedirectUri,handleResponse:function(t){return e.handleGrantTypeResponseDetails(e.authCodeGrantType,t)},onError:function(){}}),this.state.authenticationType===this.clientCredentialsGrantType&&Object(z.jsx)(We,{formReference:this.formReference,workflowDetails:this.state.workflowDetails,client:this.props.client,isLoading:this.state.isLoading,handleChange:this.handleNestedElementChange,handleResponse:function(t){return e.handleGrantTypeResponseDetails(e.clientCredentialsGrantType,t)},onError:function(){}}),this.state.authenticationType===this.resourceOwnerGrantType&&Object(z.jsx)(_e,{client:this.props.client,workflowDetails:this.state.workflowDetails,isLoading:this.state.isLoading,handleChange:this.handleNestedElementChange,handleResponse:function(t){return e.handleGrantTypeResponseDetails(e.state.authenticationType,t)},onError:function(){}})]}),(this.state.responseDetails||[]).map((function(t){return Object(z.jsx)(Ve,{responseDetails:t,client:e.props.client,removeGrantTypeDetails:e.removeGrantTypeDetails},"response-details-"+t.id)}))]})}}]),s}(r.a.Component);function Ve(e){var t="authorization_code",s="client_credentials",n=e.responseDetails;return t===n.grantType?Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(Je,{client:e.client,requestDetails:n,onRemove:function(){return e.removeGrantTypeDetails(n)}})},"authorization_code-"+n.id):s===n.grantType?Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(Me,{header:"Client Credentials Grant",headerClass:"client-credentials-grant",accessTokenDetails:n,onRemove:function(){return e.removeGrantTypeDetails(n)}})},"client_credentials-"+n.id):Object(z.jsx)(r.a.Fragment,{children:Object(z.jsx)(Me,{header:"Resource Owner Password Credentials Grant",headerClass:"resource-owner-password-credentials-grant",accessTokenDetails:n,onRemove:function(){return e.removeGrantTypeDetails(n)}})},"password-"+n.id)}var He=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={intervals:[],requestDetails:[]},n.setState=n.setState.bind(Object(j.a)(n)),n.forceUpdate=n.forceUpdate.bind(Object(j.a)(n)),n.loadAuthorizationRequestDetails=n.loadAuthorizationRequestDetails.bind(Object(j.a)(n)),n.patchWorkflowSettings=n.patchWorkflowSettings.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentWillUnmount",value:function(){this.state.requestDetails.forEach((function(e){void 0!==e.interval&&clearInterval(e.interval)}))}},{key:"loadAuthorizationRequestDetails",value:function(e){var t=this;e.preventDefault(),this.patchWorkflowSettings(),this.setState({getAuthcode:!0,errorMessage:void 0});var s=new D.a(X.b,this.setState),n=s.getResourceFromFormReference(this.props.formReference);n[X.g]=this.props.workflowDetails;var r=this.props.handleResponse;s.createResource(n).then((function(e){t.setState({getAuthcode:!1}),e.success?e.resource.then((function(e){r(e)})):e.resource.then((function(e){t.setState({errorMessage:e.detail})}))}))}},{key:"patchWorkflowSettings",value:function(){var e=new Ge(this.setState),t=new T.a(this.props.workflowDetails).map((function(e){return e.openIdClientId})).orElse(void 0),s=new T.a(this.props.workflowDetails).map((function(e){return e.authCodeParameters})).map((function(e){return e.redirectUri})).orElse(void 0),n=new T.a(this.props.workflowDetails).map((function(e){return e.authCodeParameters})).map((function(e){return e.queryParameters})).orElse(void 0);e.updateAuthCodeSettings(t,s,n)}},{key:"render",value:function(){var e=this,t=this.props.workflowDetails.authCodeParameters||{redirectUri:this.props.originalRedirectUri};return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.l,{name:"authCodeParameters.redirectUri",label:"Redirect URI",placeholder:"The redirect uri that is added to the request parameters",value:t.redirectUri,onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)},children:Object(z.jsxs)("a",{href:"/#",onClick:this.props.resetRedirectUri,className:"action-link",children:[Object(z.jsx)(Re.a,{})," ",Object(z.jsx)("span",{children:"reset redirect uri"})]})}),Object(z.jsx)(P.l,{name:"authCodeParameters.queryParameters",label:"Additional URL Query",value:t.queryParameters,placeholder:"add an optional query string that is appended to the request URL",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsxs)(E.a,{sm:{span:10,offset:2},children:[Object(z.jsxs)(I.a,{type:"submit",onClick:this.loadAuthorizationRequestDetails,children:[Object(z.jsx)(P.q,{show:this.state.getAuthcode})," Get Authorization Code"]}),this.state.errorMessage&&Object(z.jsx)(N.a,{variant:"danger",children:Object(z.jsxs)("small",{className:"error",children:[Object(z.jsx)(F.a,{})," ",this.state.errorMessage]})})]})})]})}}]),s}(r.a.Component),We=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(j.a)(n)),n.retrieveAccessTokenDetails=n.retrieveAccessTokenDetails.bind(Object(j.a)(n)),n.patchWorkflowSettings=n.patchWorkflowSettings.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"retrieveAccessTokenDetails",value:function(e){var t=this;e.preventDefault(),this.patchWorkflowSettings(),this.setState({accessingToken:!0});var s=new D.a(X.a,this.setState),n=new T.a(this.props.workflowDetails).map((function(e){return e.clientCredentialsParameters})).map((function(e){return e.scope})).orElse(void 0),r={grantType:"client_credentials",openIdClientId:parseInt(this.props.client.id),scope:n},a=this.props.handleResponse;s.createResource(r).then((function(e){t.setState({accessingToken:!1}),e.success&&e.resource.then((function(e){a(e)}))}))}},{key:"patchWorkflowSettings",value:function(){var e=new Ge(this.setState),t=new T.a(this.props.workflowDetails).map((function(e){return e.openIdClientId})).orElse(void 0),s=new T.a(this.props.workflowDetails).map((function(e){return e.clientCredentialsParameters})).map((function(e){return e.scope})).orElse(void 0);e.updateClientCredentialsSettings(t,s)}},{key:"render",value:function(){var e=this,t=this.props.workflowDetails.clientCredentialsParameters||{},s=this.state.errors||{};return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.l,{name:"clientCredentialsParameters.scope",label:"Scope",value:t.scope||"",placeholder:"The scope to access from the identity provider",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsxs)(E.a,{sm:{span:10,offset:2},children:[Object(z.jsxs)(I.a,{id:"upload",type:"submit",onClick:this.retrieveAccessTokenDetails,children:[Object(z.jsx)(P.q,{show:this.state.accessingToken})," Get Access Token"]}),Object(z.jsx)(P.a,{variant:"danger",icon:Object(z.jsx)(F.a,{}),messages:s.errorMessages||new T.a(s.detail).map((function(e){return[e]})).orElse([])})]})})]})}}]),s}(r.a.Component),_e=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(j.a)(n)),n.retrieveAccessTokenDetails=n.retrieveAccessTokenDetails.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"retrieveAccessTokenDetails",value:function(e){var t=this;e.preventDefault(),this.patchWorkflowSettings(),this.setState({accessingToken:!0});var s=new D.a(X.a,this.setState),n=this.props.workflowDetails.resourceOwnerPasswordParameters||{},r=n.username||"",a=n.password||"",i=n.scope||"",c={grantType:"password",openIdClientId:parseInt(this.props.client.id),username:r,password:a,scope:i},o=this.props.handleResponse;s.createResource(c).then((function(e){t.setState({accessingToken:!1}),e.success&&e.resource.then((function(e){o(e)}))}))}},{key:"patchWorkflowSettings",value:function(){var e=new Ge(this.setState),t=new T.a(this.props.workflowDetails).map((function(e){return e.openIdClientId})).orElse(void 0),s=this.props.workflowDetails.resourceOwnerPasswordParameters||{},n=s.username||"",r=s.password||"",a=s.scope||"";e.updateResourceOwnerPasswordCredentialsSettings(t,n,r,a)}},{key:"render",value:function(){var e=this,t=this.props.workflowDetails.resourceOwnerPasswordParameters||{},s=t.username||"",n=t.password||"",a=t.scope||"",i=this.state.errors||{};return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(P.l,{name:"resourceOwnerPasswordParameters.username",label:"Username",value:s,placeholder:"the username to authenticate",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),Object(z.jsx)(P.l,{name:"resourceOwnerPasswordParameters.password",label:"Password",placeholder:"the users password",value:n,onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),Object(z.jsx)(P.l,{name:"resourceOwnerPasswordParameters.scope",label:"Scope",value:a,placeholder:"The scope to access from the identity provider",onChange:function(t){return e.props.handleChange(t.target.name,t.target.value)},onError:function(t){return e.props.onError(t)}}),Object(z.jsx)(k.a.Group,{as:R.a,children:Object(z.jsxs)(E.a,{sm:{span:10,offset:2},children:[Object(z.jsxs)(I.a,{id:"upload",type:"submit",onClick:this.retrieveAccessTokenDetails,children:[Object(z.jsx)(P.q,{show:this.state.accessingToken})," Get Access Token"]}),Object(z.jsx)(P.a,{variant:"danger",icon:Object(z.jsx)(F.a,{}),messages:i.errorMessages||new T.a(i.detail).map((function(e){return[e]})).orElse([])})]})})]})}}]),s}(r.a.Component),Qe=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={},n.setState=n.setState.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.providerId,s=this.props.match.params.clientId,"/scim/v2/OpenIdProvider",new D.a("/scim/v2/OpenIdProvider",this.setState).getResource(t).then((function(e){e.success?e.resource.then((function(e){n.setState({provider:e})})):e.resource.then((function(e){n.setState({errors:{errorMessages:[e.detail]}})}))})),"/scim/v2/OpenIdClient",new D.a("/scim/v2/OpenIdClient",this.setState).getResource(s).then((function(e){e.success?e.resource.then((function(e){n.setState({client:e})})):e.resource.then((function(e){n.setState({errors:{errorMessages:[e.detail]}})}))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=new T.a(this.state.provider),s=new T.a(this.state.client);return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/openIdProvider/"+this.props.match.params.providerId+"/openIdClients",children:Object(z.jsx)("a",{href:"/#",children:Object(z.jsxs)("h5",{style:{height:"35px",padding:"0",paddingLeft:"10px"},children:[Object(z.jsx)(we.a,{style:{color:"bisque"},height:"35px",size:"25px"}),Object(z.jsxs)("span",{style:{marginLeft:"15px"},children:["Back to",Object(z.jsxs)("span",{style:{color:"lightgray"},children:[' "',t.map((function(e){return e.name})).orElse(""),'" ']}),"Overview"]})]})})}),Object(z.jsxs)("h5",{children:["Client: ",Object(z.jsx)("span",{style:{color:"lightgray"},children:s.map((function(e){return e.clientId})).orElse("")})]}),Object(z.jsxs)(w.a,{defaultActiveKey:"workflow",id:"uncontrolled-tab-example",children:[Object(z.jsx)(C.a,{eventKey:"workflow",title:"OpenID Workflow",children:new T.a(this.state.client).isPresent()&&Object(z.jsx)(pt.Consumer,{children:function(t){return Object(z.jsx)(ze,{client:e.state.client,originalRedirectUri:t.authCodeRedirectUri})}})}),Object(z.jsx)(C.a,{eventKey:"clients",title:"HTTP Settings",children:new T.a(this.state.client).isPresent()&&Object(z.jsx)(ke,{client:this.state.client})})]})]})}}]),s}(r.a.Component),Xe=function(){function e(){Object(d.a)(this,e),this.scimClient=new D.a(X.m,(function(){}))}return Object(h.a)(e,[{key:"createCategory",value:function(e,t,s){var n={schemas:[X.n],name:e};this.scimClient.createResource(n).then((function(e){e.success?e.resource.then((function(e){t(e)})):e.resource.then((function(e){s(e)}))}))}},{key:"listCategories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,s=e.filter,n=e.sortBy,r=e.sortOrder,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,c={schemas:[X.l],sortBy:n,sortOrder:r||"ascending",filter:s,startIndex:t};this.scimClient.listResourcesWithPost(c,a,i)}},{key:"updateCategory",value:function(e,t,s,n){var r={schemas:[X.n],name:t};this.scimClient.updateResource(r,e).then((function(e){e.success?e.resource.then((function(e){s(e)})):e.resource.then((function(e){n(e)}))}))}},{key:"deleteCategory",value:function(e,t,s){this.scimClient.deleteResource(e.id).then((function(n){n.success?t(e):n.resource.then((function(e){s(e)}))}))}}]),e}(),Ye=s(194),Ze=s(187),$e=s(161),et=s(160),tt=s(186),st=function(){function e(){Object(d.a)(this,e),this.scimClient=new D.a(X.o,(function(){}))}return Object(h.a)(e,[{key:"createTokenStore",value:function(e,t,s,n,r){var a={schemas:[X.p],name:e,token:t,categoryId:s};this.scimClient.createResource(a).then((function(e){e.success?e.resource.then((function(e){n(e)})):e.resource.then((function(e){r(e)}))}))}},{key:"listTokenStores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,s=e.filter,n=e.sortBy,r=e.sortOrder,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,c={schemas:[X.l],sortBy:n,sortOrder:r||"ascending",filter:s,startIndex:t};this.scimClient.listResourcesWithPost(c,a,i)}},{key:"updateTokenStore",value:function(e,t,s,n,r,a){var i={schemas:[X.p],name:t,token:s,categoryId:n};this.scimClient.updateResource(i,e).then((function(e){e.success?e.resource.then((function(e){r(e)})):e.resource.then((function(e){a(e)}))}))}},{key:"deleteTokenStore",value:function(e,t,s){this.scimClient.deleteResource(e.id).then((function(n){n.success?t(e):n.resource.then((function(e){s(e)}))}))}},{key:"bulkDeleteTokenStores",value:function(e,t,s,n){function r(e){var t={schemas:[X.d],Operations:e};fetch(X.c,{method:"POST",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){200===e.status?e.json().then((function(e){var t=e.Operations,n=[],r=[];t.forEach((function(e){204===e.status?n.push(e.bulkId):r.push(e.bulkId)})),s(n,r)})):e.json().then((function(e){n(e)}))}))}for(var a=[],i=0;i<e.length;i++){var c=e[i];a.push({method:"DELETE",bulkId:c.id,path:"/TokenStore/"+c.id}),a.length===t&&(r(Object(S.a)(a)),a=[])}a.length>0&&r(a)}}]),e}(),nt=s(188),rt=s(189),at=s(190);function it(e){var t=Object(n.useState)({}),s=Object(Ee.a)(t,2),a=s[0],i=s[1],c=Object(n.useState)(!1),o=Object(Ee.a)(c,2),l=o[0],u=o[1],d=Object(n.useState)(0),h=Object(Ee.a)(d,2),j=h[0],p=h[1],b=Object(n.useState)([]),f=Object(Ee.a)(b,2),m=f[0],O=f[1];function v(t){var s=Object(S.a)(m).concat(t);s.sort((function(e,t){return e.name.localeCompare(t.name)})),p(j+t.length),O(s),e.setCategoryEntires(e.category,j+t.length)}return Object(n.useEffect)((function(){u(!1),p(0),O([])}),[e.filter]),Object(n.useEffect)((function(){var t={startIndex:m.length,filter:new T.a(e.filter).map((function(e){return e.trim()})).map((function(e){return 0===e.length?void 0:e})).map((function(t){return'token co "'+t+'" and categoryId eq '+e.category.id})).orElse("categoryId eq "+e.category.id),sortBy:"name"};(0===j&&!l||m.length<j)&&(new st).listTokenStores(t,(function(e){p(e.totalResults);var t=e.Resources||[];v(Object(S.a)(t)),u(!0)}),(function(e){i(e)}))}),[m]),Object(z.jsxs)(r.a.Fragment,{children:[a&&a.length>0&&Object(z.jsxs)(N.a,{variant:"danger",children:[Object(z.jsx)(F.a,{})," ",a.details]}),Object(z.jsx)(ct,{category:e.category,tokenStoreList:m,addNewTokenStores:v,updateTokenStore:function(e,t){var s=Object(S.a)(m),n=s.indexOf(e);s.splice(n,1,t),s.sort((function(e,t){return e.name.localeCompare(t.name)})),O(s)},removeTokenStore:function(t){var s=Object(S.a)(m);t.forEach((function(e){var t=s.indexOf(e);s.splice(t,1)})),p(j-t.length),O(s),e.setCategoryEntires(e.category,j-t.length)},toggleSingleCeckbox:function(e,t){t.checked=e;var s=Object(S.a)(m),n=s.indexOf(t);s.splice(n,1,t),O(s)},toggleAllCheckboxes:function(e){var t=Object(S.a)(m);t.forEach((function(t){t.checked=e})),O(t)}})]})}function ct(e){var t=Object(n.useState)(),s=Object(Ee.a)(t,2),a=s[0],i=s[1],c=Object(n.useState)(!1),o=Object(Ee.a)(c,2),l=o[0],u=o[1],d=Object(n.useState)(!1),h=Object(Ee.a)(d,2),j=h[0],p=h[1],b=Object(n.useContext)(bt);function f(t){(new st).deleteTokenStore(t[0],(function(){e.removeTokenStore(t)}),(function(e){i(e)}))}return Object(z.jsxs)(r.a.Fragment,{children:[a&&a.length>0&&Object(z.jsxs)(N.a,{variant:"danger",children:[Object(z.jsx)(F.a,{})," ",a.detail]}),Object(z.jsxs)(ce.a,{striped:!0,bordered:!0,hover:!0,size:"sm",variant:"dark",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"checkbox-column",children:Object(z.jsx)("input",{type:"checkbox",onChange:function(t){return e.toggleAllCheckboxes(t.target.checked)}})}),Object(z.jsx)("th",{className:"token-store-id-column",children:"id"}),Object(z.jsx)("th",{className:"token-store-name-column",children:"name"}),Object(z.jsx)("th",{children:"token"}),Object(z.jsx)("th",{className:"timestamp-column",children:"timestamps"}),Object(z.jsxs)("th",{className:"icon-column",children:[!l&&Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(tt.a,{className:"listed-icon icon",onClick:function(){return p(!0)}}),Object(z.jsx)(Ze.a,{className:"icon",onClick:function(){return u(!0)}})]}),l&&Object(z.jsxs)("span",{className:"list-delete-insertion",children:["sure? ",Object(z.jsx)(nt.a,{className:"listed-icon icon",onClick:function(){return function(){var t=e.tokenStoreList.filter((function(e){return e.checked}));(new st).bulkDeleteTokenStores(t,b.bulk.maxOperations,(function(s,n){var r=t.filter((function(e){return s.includes(e.id)}));e.removeTokenStore(r),u(!1)}),(function(e){i(e),u(!1)}))}()}}),Object(z.jsx)(De.a,{className:"icon",onClick:function(){return u(!1)}})]})]})]})}),Object(z.jsxs)("tbody",{children:[j&&Object(z.jsx)(ot,{tokenStore:{id:0,categoryId:parseInt(e.category.id)},editMode:!0,addNewTokenStores:function(t){p(!1),e.addNewTokenStores(t)},removeTokenStore:function(){return p(!1)}}),e.tokenStoreList.map((function(t){return Object(z.jsx)(ot,{tokenStore:t,toggleSingleCeckbox:e.toggleSingleCeckbox,addNewTokenStores:e.addNewTokenStores,updateTokenStore:e.updateTokenStore,removeTokenStore:f},t.id)}))]})]})]})}function ot(e){var t=Object(n.useState)(),s=Object(Ee.a)(t,2),a=(s[0],s[1]),i=Object(n.useState)(!1),c=Object(Ee.a)(i,2),o=c[0],l=c[1],u=Object(n.useState)(e.editMode),d=Object(Ee.a)(u,2),h=d[0],j=d[1],p=Object(n.useState)(!1),b=Object(Ee.a)(p,2),f=b[0],m=b[1],O=Object(n.useState)(e.tokenStore.token||""),v=Object(Ee.a)(O,2),x=v[0],y=v[1],g=Object(n.useState)(e.tokenStore.name||""),w=Object(Ee.a)(g,2),C=w[0],S=w[1];function k(e){a(e)}return Object(z.jsx)(r.a.Fragment,{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("input",{type:"checkbox",checked:e.tokenStore.checked||!1,onChange:function(t){return e.toggleSingleCeckbox(t.target.checked,e.tokenStore)}})}),Object(z.jsx)("td",{children:e.tokenStore.id}),Object(z.jsxs)("td",{children:[!h&&C,h&&Object(z.jsx)("input",{type:"text",value:C,onChange:function(e){return S(e.target.value)}})]}),Object(z.jsxs)("td",{className:"overflow-column",children:[!h&&Object(z.jsxs)(r.a.Fragment,{children:[!f&&Object(z.jsx)("article",{className:"token-overview-short",children:x}),f&&Object(z.jsx)("textarea",{className:"token-overview",readOnly:!0,value:x}),!f&&Object(z.jsx)(rt.a,{className:"right-floating-icon eye-icon",onClick:function(){return m(!f)}}),f&&Object(z.jsx)(at.a,{className:"right-floating-icon eye-icon",onClick:function(){return m(!f)}})]}),h&&Object(z.jsx)("textarea",{value:x,onChange:function(e){return y(e.target.value)},className:"token-area",wrap:"off"})]}),Object(z.jsxs)("td",{children:[Object(z.jsxs)("span",{children:["created: ",new T.a(e.tokenStore.meta).map((function(e){return e.created})).map((function(e){return new Date(e).toLocaleString()})).orElse(null)]}),Object(z.jsx)("br",{}),Object(z.jsxs)("span",{children:["modified: ",new T.a(e.tokenStore.meta).map((function(e){return e.lastModified})).map((function(e){return new Date(e).toLocaleString()})).orElse(null)]})]}),Object(z.jsxs)("td",{children:[!o&&Object(z.jsxs)(r.a.Fragment,{children:[!h&&Object(z.jsx)($e.a,{onClick:function(){return j(!h)},className:"listed-icon icon"}),h&&Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsx)(et.a,{className:"listed-icon icon",onClick:function(){0===e.tokenStore.id?(a(null),(new st).createTokenStore(C,x,e.tokenStore.categoryId,(function(t){j(!1),e.addNewTokenStores([t])}),k)):(a(null),e.tokenStore.name!==C||e.tokenStore.token!==x?(new st).updateTokenStore(e.tokenStore.id,C,x,e.tokenStore.categoryId,(function(t){j(!1),e.updateTokenStore(e.tokenStore,t)}),k):j(!1))}}),Object(z.jsx)(De.a,{className:"listed-icon icon",onClick:function(){return S(e.tokenStore.name),y(e.tokenStore.token),void j(!1)}})]}),Object(z.jsx)(Ze.a,{onClick:function(){return l(!0)},className:"icon"})]}),o&&Object(z.jsxs)("span",{className:"list-delete-insertion",children:["sure? ",Object(z.jsx)(nt.a,{className:"listed-icon icon",onClick:function(){l(!1),e.removeTokenStore([e.tokenStore])}}),Object(z.jsx)(De.a,{className:"listed-icon icon",onClick:function(){return l(!1)}})]})]})]})})}function lt(){var e=Object(n.useState)({}),t=Object(Ee.a)(e,2),s=t[0],a=t[1],i=Object(n.useState)(""),c=Object(Ee.a)(i,2),o=c[0],l=c[1],u=Object(n.useState)(!1),d=Object(Ee.a)(u,2),h=d[0],j=d[1],p=Object(n.useState)(0),b=Object(Ee.a)(p,2),f=b[0],m=b[1],O=Object(n.useState)([]),v=Object(Ee.a)(O,2),x=v[0],y=v[1],g=Object(n.useState)([]),w=Object(Ee.a)(g,2);w[0],w[1];function P(e){var t=[].concat(Object(S.a)(x),Object(S.a)(e));t.sort((function(e,t){return e.name.localeCompare(t.name)})),y(t)}function T(e,t){var s=Object(S.a)(x),n=s.indexOf(e);s.splice(n,1,t),y(Object(S.a)(s))}function D(e){var t=Object(S.a)(x),s=t.indexOf(e);t.splice(s,1),m(f-1),y(Object(S.a)(t))}function M(e,t){e.numberOfEntries=t;var s=Object(S.a)(x);y(Object(S.a)(s))}return Object(n.useEffect)((function(){var e={startIndex:x.length,sortBy:"name"};(0===f&&!h||x.length<f)&&(new Xe).listCategories(e,(function(e){m(e.totalResults);var t=e.Resources||[];P(Object(S.a)(t)),j(!0)}),(function(e){a(e)}))}),[x]),Object(n.useEffect)((function(){}),[o]),Object(z.jsxs)(r.a.Fragment,{children:[s&&s.length>0&&Object(z.jsx)(N.a,{variant:"danger",children:Object(z.jsx)(k.a.Text,{children:JSON.stringify(s)})}),Object(z.jsxs)(C.a.Container,{id:"list-group-tabs-example",children:[Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:3,children:Object(z.jsxs)("h5",{children:["found a total of ",f," categories"]})}),Object(z.jsx)(E.a,{children:Object(z.jsx)("div",{className:"filter-block",children:Object(z.jsxs)("span",{children:[Object(z.jsx)("span",{children:"search for token part: "}),Object(z.jsx)("input",{id:"filter-input",onKeyUp:function(e){"Enter"===e.key&&l(document.getElementById("filter-input").value)}}),Object(z.jsx)(I.a,{onClick:function(e){return l(document.getElementById("filter-input").value)},children:"search"})]})})})]}),Object(z.jsxs)(R.a,{children:[Object(z.jsx)(E.a,{sm:3,children:Object(z.jsxs)(Ye.a,{children:[Object(z.jsx)(jt,{addToTokenCategoryList:function(e){m(f+1),P([e])}}),x&&x.map((function(e){return Object(z.jsx)(ut,{category:e,updateCategory:T,removeCategory:D},e.id)}))]})}),Object(z.jsx)(E.a,{sm:9,children:Object(z.jsx)(C.a.Content,{children:x&&x.map((function(e){return Object(z.jsx)(C.a.Pane,{eventKey:"#"+e.id,children:Object(z.jsx)(it,{category:e,filter:o,setCategoryEntires:M})},e.id)}))})})]})]})]})}function ut(e){var t=Object(n.useState)({}),s=Object(Ee.a)(t,2),a=s[0],i=s[1],c=Object(n.useState)(!1),o=Object(Ee.a)(c,2),l=o[0],u=o[1],d=Object(n.useState)(!1),h=Object(Ee.a)(d,2),j=h[0],p=h[1],b=Object(n.useState)(e.category.name),f=Object(Ee.a)(b,2),m=f[0],O=f[1];function v(){i(null),e.category.name!==m&&(new Xe).updateCategory(e.category.id,m,(function(t){e.updateCategory(e.category,t)}),(function(e){return i(e)}))}var x=e.category.numberOfEntries||0;return Object(z.jsxs)(Ye.a.Item,{variant:0===x?"dark":"light",action:!0,href:"#"+e.category.id,onKeyDown:function(e){return l&&e.stopPropagation()},children:[Object(z.jsx)(pe.a,{style:{margin:"0 10px 0 0"}}),!l&&Object(z.jsxs)(r.a.Fragment,{children:[m," [",x,"]"]}),l&&Object(z.jsx)("input",{type:"text",className:"listed-category-header-input",value:m,onChange:function(e){return O(e.target.value)},onKeyUp:function(t){"Enter"===t.key?(v(),u(!l)):"Escape"===t.key&&(O(e.category.name),u(!1))}}),Object(z.jsx)(Ze.a,{className:"add-list-item-icon delete-icon",onClick:function(){return p(!j)}}),l&&Object(z.jsx)(De.a,{className:"add-list-item-icon abort-icon listed-icon",onClick:function(){O(e.category.name),u(!1)}}),Object(z.jsx)(ht,{editMode:l,classNames:"add-list-item-icon edit-icon listed-icon",onClick:function(){l&&(e.category.name=m,v()),u(!l)}}),j&&Object(z.jsx)(dt,{deleteMode:j,setDeleteMode:p,deleteCategory:function(){i(null),(new Xe).deleteCategory(e.category,(function(t){e.removeCategory(t)}),(function(e){return i(e)}))}}),a&&a.detail&&Object(z.jsx)(N.a,{variant:"danger",children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.a,{})," ",a.detail]})})]})}function dt(e){return Object(z.jsxs)("div",{className:"list-delete-insertion",children:[Object(z.jsx)("div",{className:"list-delete-text",children:"delete category?"}),Object(z.jsx)(I.a,{variant:"danger",className:"listed-icon list-button",onClick:function(){e.deleteCategory(),e.setDeleteMode(!1)},children:"Yes"}),Object(z.jsx)(I.a,{variant:"secondary",className:"listed-icon",onClick:function(){e.setDeleteMode(!1)},children:"No"})]})}function ht(e){return Object(z.jsxs)(r.a.Fragment,{children:[!e.editMode&&Object(z.jsx)($e.a,{className:e.classNames,onClick:e.onClick}),e.editMode&&Object(z.jsx)(et.a,{className:e.classNames,onClick:e.onClick})]})}function jt(e){var t=Object(n.useState)({}),s=Object(Ee.a)(t,2),a=s[0],i=s[1],c=Object(n.useState)(),o=Object(Ee.a)(c,2),l=o[0],u=o[1];function d(){(new Xe).createCategory(l,(function(t){e.addToTokenCategoryList(t),u(null),i(null)}),(function(e){i(e)}))}return Object(z.jsxs)(r.a.Fragment,{children:[Object(z.jsxs)(Ye.a.Item,{variant:"warning",children:["Categories ",Object(z.jsx)(tt.a,{className:"add-list-item-icon",onClick:function(){l||u("new_category")}})]}),l&&Object(z.jsxs)(Ye.a.Item,{variant:"secondary",children:[Object(z.jsx)("input",{type:"text",className:"list-item-input",value:l,onChange:function(e){return u(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&d()}}),Object(z.jsx)(De.a,{className:"add-list-item-icon delete-icon edit",onClick:function(){return u(null)}}),Object(z.jsx)(et.a,{className:"add-list-item-icon save-icon listed-icon edit",onClick:function(){return d()}}),a&&a.detail&&Object(z.jsx)(N.a,{variant:"danger",children:Object(z.jsxs)(k.a.Text,{children:[Object(z.jsx)(F.a,{})," ",a.detail]})})]})]})}var pt=r.a.createContext(null),bt=r.a.createContext(null),ft=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={serviceProviderConfig:{bulk:{maxOperations:5,maxPayloadSize:2097152},filter:{maxResults:5}}},n.setState=n.setState.bind(Object(j.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new D.a("/scim/v2/ServiceProviderConfig",this.setState)).listResources().then((function(e){e.success&&e.resource.then((function(e){s.setState({serviceProviderConfig:e})}))})),t.getResource(null,"/scim/v2/AppInfo").then((function(e){e.success&&e.resource.then((function(e){s.setState({appInfo:e})}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(z.jsx)(r.a.Fragment,{children:Object(z.jsxs)(x.BrowserRouter,{children:[Object(z.jsx)(m.a,{collapseOnSelect:!0,expand:"lg",bg:"navigation",children:Object(z.jsxs)(O.a,{children:[Object(z.jsx)(m.a.Brand,{href:"#home",children:"Captain Goldfish's Rest Client"}),Object(z.jsx)(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(z.jsxs)(m.a.Collapse,{id:"responsive-navbar-nav",children:[Object(z.jsx)(v.a,{className:"me-auto"}),Object(z.jsx)(v.a,{children:Object(z.jsx)(v.a.Link,{href:"#",children:Object(z.jsx)("img",{src:f,className:"react-logo",alt:"logo"})})})]})]})}),Object(z.jsx)(m.a,{bg:"navigation-left",className:"navbar-left",expand:"md",variant:"dark",children:Object(z.jsx)(m.a.Collapse,{children:Object(z.jsxs)(v.a,{className:"flex-column",children:[Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/openIdProvider",children:Object(z.jsx)(v.a.Link,{children:"OpenID"})}),Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/jwts",children:Object(z.jsx)(v.a.Link,{children:"JWTs"})}),Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/tokenCategories",children:Object(z.jsx)(v.a.Link,{children:"Storage"})}),Object(z.jsx)(g.LinkContainer,{exact:!0,to:"/views/system",children:Object(z.jsx)(v.a.Link,{children:"System"})})]})})}),Object(z.jsxs)("div",{className:"main",children:[Object(z.jsx)(P.a,{variant:"danger",icon:Object(z.jsx)(F.a,{}),messages:(this.state.errors||{}).errorMessages}),Object(z.jsx)(pt.Provider,{value:this.state.appInfo,children:Object(z.jsx)(bt.Provider,{value:this.state.serviceProviderConfig,children:Object(z.jsxs)(y.g,{children:[Object(z.jsx)(y.d,{path:"/views/system",children:Object(z.jsx)(je,{})}),Object(z.jsx)(y.d,{path:"/views/openIdProvider/:providerId/client/:clientId",component:Qe}),Object(z.jsx)(y.d,{path:"/views/openIdProvider/:id/openIdClients",render:function(t){return Object(z.jsx)(Ce,{match:t.match,serviceProviderConfig:e.state.serviceProviderConfig})}}),Object(z.jsx)(y.d,{path:"/views/openIdProvider",children:Object(z.jsx)(fe,{serviceProviderConfig:this.state.serviceProviderConfig})}),Object(z.jsx)(y.d,{path:"/views/jwts",children:Object(z.jsx)(ge,{})}),Object(z.jsx)(y.d,{path:"/views/tokenCategories",children:Object(z.jsx)(lt,{})}),Object(z.jsx)(y.d,{path:"/",children:Object(z.jsx)(y.c,{to:"/views/jwts"})})]})})})]})]})})}}]),s}(r.a.Component);i.a.render(Object(z.jsx)(ft,{}),document.getElementById("root")),c()},18:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(108),r=s(11),a=s.n(r),i=s(17),c=s(13),o=s(14),l=s(4),u=s(24),d=function(){function e(t,s){Object(c.a)(this,e),this.resourcePath=t,this.setState=s,this.resetErrors=this.resetErrors.bind(this),this.handleError=this.handleError.bind(this),this.createResource=this.createResource.bind(this),this.getErrors=this.getErrors.bind(this),this.isLoading=this.isLoading.bind(this),this.parseErrorResponse=this.parseErrorResponse.bind(this)}return Object(o.a)(e,[{key:"isLoading",value:function(e){this.setState({isLoading:e})}},{key:"resetErrors",value:function(){this.setState({errors:{}})}},{key:"handleError",value:function(e){var t=this;e.then((function(e){var s={};void 0===e.errors?(s.errorMessages=new l.a(s.errorMessages).orElse([]),void 0===e.detail?s.errorMessages.push(JSON.stringify(e)):s.errorMessages.push(e.detail)):s=e.errors,new l.a(t.setState).ifPresent((function(e){return e({errors:s})}))}))}},{key:"createResource",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),e.next=4,fetch(this.resourcePath,{method:"POST",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){if(s.isLoading(!1),201===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return s.handleError(t.resource),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getResource",value:function(){var e=Object(i.a)(a.a.mark((function e(t,s,n){var r,i,c,o=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),r=new l.a(s).orElse(this.resourcePath),i=new l.a(n).map((function(e){return"?"+new URLSearchParams(e).toString()})).orElse(""),c=r+new l.a(t).map((function(e){return"/"+encodeURIComponent(e)})).orElse("")+i,e.next=7,fetch(c,{method:"GET"}).then((function(e){if(o.isLoading(!1),200===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return o.handleError(t.resource),t}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,s,n){return e.apply(this,arguments)}}()},{key:"listResources",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.startIndex,n=t.count,r=t.filter,a=t.sortBy,i=t.sortOrder,c=t.attributes,o=t.excludedAttributes;this.isLoading(!0),this.resetErrors();var u=new l.a(s).map((function(e){return"startIndex="+e})).orElse(null),d=new l.a(n).map((function(e){return"count="+e})).orElse(null),h=new l.a(r).map((function(e){return"filter="+encodeURI(e)})).orElse(null),j=new l.a(a).map((function(e){return"sortBy="+encodeURI(e)})).orElse(null),p=new l.a(i).map((function(e){return"sortOrder="+e})).orElse(null),b=new l.a(c).map((function(e){return"attributes="+encodeURI(e)})).orElse(null),f=new l.a(o).map((function(e){return"excludedAttributes="+encodeURI(e)})).orElse(null),m=Array.of(u,d,h,j,p,b,f).filter((function(e){return null!=e})).join("&");m=new l.a(m).filter((function(e){return e.length>0})).map((function(e){return"?"+e})).orElse("");var O=this.resourcePath+m;return fetch(O,{method:"GET"}).then((function(t){if(e.isLoading(!1),200===t.status)return{success:!0,status:t.status,resource:t.json()};var s={success:!1,status:t.status,resource:t.json()};return e.handleError(s.resource),s}))}},{key:"listResourcesWithPost",value:function(e,t,s){var n=this,r=this.resourcePath+"/.search";return fetch(r,{method:"POST",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(e)}).then((function(e){200===e.status?e.json().then((function(e){t(e)})):e.text().then((function(e){s(n.parseErrorResponse(e))}))}))}},{key:"updateResource",value:function(){var e=Object(i.a)(a.a.mark((function e(t,s){var n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),e.next=4,fetch(this.resourcePath+"/"+encodeURIComponent(s),{method:"PUT",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){if(n.isLoading(!1),200===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return n.handleError(t.resource),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"patchResource",value:function(){var e=Object(i.a)(a.a.mark((function e(t,s){var n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading(!0),this.resetErrors(),e.next=4,fetch(this.resourcePath+"/"+encodeURIComponent(s),{method:"PATCH",headers:{"Content-Type":"application/scim+json"},body:JSON.stringify(t)}).then((function(e){if(n.isLoading(!1),200===e.status)return{success:!0,status:e.status,resource:e.json()};var t={success:!1,status:e.status,resource:e.json()};return n.handleError(t.resource),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"deleteResource",value:function(e){var t=this;return this.isLoading(!0),this.resetErrors(),fetch(this.resourcePath+"/"+encodeURIComponent(e),{method:"DELETE"}).then((function(e){return t.isLoading(!1),204===e.status?{success:!0,status:e.status}:(t.handleError(e.json()),{success:!1,status:e.status})}))}},{key:"getResourceFromFormReference",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var s,r,c,o,d,h,j,p,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={},r=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,"file"!==t.type){e.next=11;break}if(void 0===t.files||1!==t.files.length){e.next=8;break}return e.next=5,Object(l.c)(t.files[0]);case 5:r=e.sent,e.next=9;break;case 8:r=void 0;case 9:e.next=12;break;case 11:"number"===t.type?r=t.valueAsNumber:"checkbox"===t.type?r=t.checked:"radio"===t.type?r=t.checked?t.value:s[n]:(i=u.trim(t.value),u.isEmpty(i)&&(i=void 0),r=i);case 12:u.set(s,n,r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Array.from(t.current.getElementsByTagName("input")),o=Array.from(t.current.getElementsByTagName("textarea")),d=Array.from(t.current.getElementsByTagName("select")),h=c.concat(d).concat(o),j=Object(n.a)(h),e.prev=7,j.s();case 9:if((p=j.n()).done){e.next=15;break}return b=p.value,e.next=13,r(b);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),j.e(e.t0);case 20:return e.prev=20,j.f(),e.finish(20);case 23:return e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[7,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getErrors",value:function(e,t){return new l.a(e).map((function(e){return e.errors})).map((function(e){return e.fieldErrors})).map((function(e){return e[t]})).orElse([])}},{key:"parseErrorResponse",value:function(e){try{return JSON.parse(e)}catch(t){return{detail:e}}}}]),e}()},22:function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"g",(function(){return r})),s.d(t,"n",(function(){return a})),s.d(t,"p",(function(){return i})),s.d(t,"l",(function(){return c})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u})),s.d(t,"h",(function(){return d})),s.d(t,"i",(function(){return h})),s.d(t,"j",(function(){return j})),s.d(t,"k",(function(){return p})),s.d(t,"q",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"m",(function(){return m})),s.d(t,"o",(function(){return O})),s.d(t,"c",(function(){return v}));var n="urn:ietf:params:scim:schemas:captaingoldfish:2.0:CertificateInfo",r="urn:ietf:params:scim:schemas:captaingoldfish:2.0:CurrentWorkflowSettings",a="urn:ietf:params:scim:schemas:captaingoldfish:2.0:TokenCategory",i="urn:ietf:params:scim:schemas:captaingoldfish:2.0:TokenStore",c="urn:ietf:params:scim:api:messages:2.0:SearchRequest",o="urn:ietf:params:scim:api:messages:2.0:BulkRequest",l="/scim/v2/AccessTokenRequest",u="/scim/v2/AuthCodeGrantRequest",d="/scim/v2/JwtBuilder",h="/scim/v2/Keystore",j="/scim/v2/OpenIdClient",p="/scim/v2/OpenIdProvider",b="/scim/v2/Truststore",f="/scim/v2/CurrentWorkflowSettings",m="/scim/v2/TokenCategory",O="/scim/v2/TokenStore",v="/scim/v2/Bulk"},37:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(59),r=s(11),a=s.n(r),i=s(17),c=s(13),o=s(14),l=s(4),u=s(24),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.scimClient,n=t.formReference,r=t.getOriginalResource,a=t.getCurrentResource,i=t.setCurrentResource,o=t.setState,l=t.onCreateSuccess,u=t.onUpdateSuccess,d=t.onDeleteSuccess;Object(c.a)(this,e),this.scimClient=s,this.formReference=n,this.getOriginalResource=r,this.getCurrentResource=a,this.setCurrentResource=i,this.setState=o,this.onCreateSuccess=l,this.onUpdateSuccess=u,this.onDeleteSuccess=d,this.onSubmit=this.onSubmit.bind(this),this.createResource=this.createResource.bind(this),this.updateResource=this.updateResource.bind(this),this.deleteResource=this.deleteResource.bind(this),this.setStateValue=this.setStateValue.bind(this),this.resetEditMode=this.resetEditMode.bind(this),this.updateInput=this.updateInput.bind(this)}return Object(o.a)(e,[{key:"onSubmit",value:function(e){e.preventDefault(),new l.a(this.getCurrentResource().id).isPresent()?this.updateResource():this.createResource()}},{key:"createResource",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.getResourceFromFormReference(this.formReference);case 2:return t=e.sent,e.next=5,this.scimClient.createResource(t);case 5:s=e.sent,this.handleCreateOrUpdateResponse(s,this.onCreateSuccess);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateResource",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scimClient.getResourceFromFormReference(this.formReference);case 2:return t=e.sent,e.next=5,this.scimClient.updateResource(t,this.getOriginalResource().id);case 5:s=e.sent,this.handleCreateOrUpdateResponse(s,this.onUpdateSuccess);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCreateOrUpdateResponse",value:function(e,t){var s=this;e.success?e.resource.then((function(e){s.setCurrentResource(e),s.setState({editMode:!1,success:!0}),t(e)})):e.resource.then((function(e){s.setState({errors:{errorMessages:[e.detail]}})}))}},{key:"deleteResource",value:function(){var e=this;new l.a(this.getCurrentResource().id).ifNotPresent((function(t){e.onDeleteSuccess(void 0)})).ifPresent(function(){var t=Object(i.a)(a.a.mark((function t(s){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scimClient.deleteResource(s);case 2:e.onDeleteSuccess(s);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setStateValue",value:function(e,t){var s;this.setState((s={},Object(n.a)(s,e,t),Object(n.a)(s,"success",!1),s))}},{key:"resetEditMode",value:function(){var e=JSON.parse(JSON.stringify(this.getOriginalResource()));this.setCurrentResource(e),this.setState({editMode:!1,success:!1})}},{key:"updateInput",value:function(e,t){var s=this.getCurrentResource();s=u.set(s,e,t),this.setCurrentResource(s),this.setState({success:!1})}}]),e}()},4:function(e,t,s){"use strict";(function(e){s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return c}));var n=s(13),r=s(14);function a(e){return new Promise((function(t,s){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e=n.result.toString().replace(/^data:(.*,)?/,"");e.length%4>0&&(e+="=".repeat(4-e.length%4)),t(e)},n.onerror=function(e){return s(e)}}))}function i(e,t,s){for(var n=window.atob(e),r=n.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=n.charCodeAt(i);var c=new Blob([a.buffer],{type:s}),o=document.createElement("a"),l=URL.createObjectURL(c);o.href=l,o.download=t,o.click(),setTimeout((function(){window.URL.revokeObjectURL(l)}),0)}var c=function(){function e(t){Object(n.a)(this,e),this.value=t}return Object(r.a)(e,[{key:"get",value:function(){return this.value}},{key:"isPresent",value:function(){return void 0!==this.value&&null!==this.value}},{key:"ifPresent",value:function(e){return this.isPresent()&&e(this.value),this}},{key:"ifNotPresent",value:function(e){return this.isPresent()||e(),this}},{key:"isEmpty",value:function(){return void 0===this.value||null===this.value}},{key:"filter",value:function(e){return this.isPresent()&&!e(this.value)&&(this.value=null),this}},{key:"map",value:function(e){return this.isPresent()&&(this.value=e(this.value)),this}},{key:"do",value:function(e){return this.isPresent()&&e(this.value),this}},{key:"orElse",value:function(e){return this.isPresent()?this.value:e}}]),e}()}).call(this,s(104).Buffer)},51:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s(13),r=s(14),a=s(7),i=s(16),c=s(15),o=s(1),l=s.n(o),u=s(12),d=s(4),h=s(6),j=s(0),p=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).bubbleEvent=r.bubbleEvent.bind(Object(a.a)(r)),r}return Object(r.a)(s,[{key:"bubbleEvent",value:function(e){this.props.onChange(e.target.name,e.target.value)}},{key:"componentDidUpdate",value:function(e,t,s){e.value!==this.props.value&&this.props.onChange(this.props.name,this.props.value)}},{key:"render",value:function(){var e=this,t=new d.a(this.props.id).orElse(this.props.name),s=void 0===this.props.type?"text":this.props.type,n=this.props.name,r=void 0===this.props.placeholder?this.props.name:this.props.placeholder,a=new d.a(this.props.onError).map((function(t){return t(e.props.name)})).orElse([]),i=!0===this.props.disabled,c=!0===this.props.readOnly;return Object(j.jsxs)(l.a.Fragment,{children:[Object(j.jsx)(u.a.Control,{id:t,className:"card-input-field "+new d.a(this.props.className).orElse(""),type:s,name:n,disabled:i,readOnly:c,placeholder:r,onChange:this.bubbleEvent,value:this.props.value}),Object(j.jsx)(h.h,{controlId:this.props.name+"-error-list",fieldErrors:a})]})}}]),s}(l.a.Component)},6:function(e,t,s){"use strict";s.d(t,"l",(function(){return P})),s.d(t,"j",(function(){return T})),s.d(t,"o",(function(){return D})),s.d(t,"k",(function(){return N})),s.d(t,"m",(function(){return M})),s.d(t,"n",(function(){return A})),s.d(t,"h",(function(){return U})),s.d(t,"g",(function(){return L})),s.d(t,"a",(function(){return B})),s.d(t,"q",(function(){return F})),s.d(t,"i",(function(){return K})),s.d(t,"b",(function(){return J})),s.d(t,"c",(function(){return q})),s.d(t,"r",(function(){return G})),s.d(t,"p",(function(){return z})),s.d(t,"e",(function(){return V})),s.d(t,"d",(function(){return H})),s.d(t,"f",(function(){return W}));var n=s(23),r=s(13),a=s(14),i=s(16),c=s(15),o=s(1),l=s.n(o),u=s(98),d=s.n(u),h=s(12),j=s(26),p=s(21),b=s(4),f=s(19),m=s(100),O=s(159),v=(s(25),s(99)),x=s(113),y=s(158),g=s(160),w=s(111),C=s(161),S=s(162),k=(s(112),s(163),s(164)),R=s(165),E=s(51),I=s(0);function P(e){var t=e.id||e.name,s=new b.a(e.label).map((function(e){return Object(I.jsx)(h.a.Label,{column:!0,sm:2,children:e})})),n=void 0===e.type?"text":e.type,r=e.name,a=void 0===e.placeholder?e.name:e.placeholder,i=e.onError(e.name),c=!0===e.disabled,o=!0===e.readOnly,l="hidden"===e.type||e.isHidden,u=new b.a(e.as).orElse("input"),d=new b.a(e.sm).orElse(s.isPresent()?10:12);return Object(I.jsxs)(h.a.Group,{as:j.a,controlId:t,style:{display:l?"none":""},children:[s.get(),Object(I.jsxs)(p.a,{sm:d,children:[Object(I.jsx)(h.a.Control,{type:n,as:u,name:r,className:e.className,disabled:c,readOnly:o,placeholder:a,onChange:e.onChange,value:e.value}),e.children,Object(I.jsx)(U,{controlId:e.name+"-error-list",fieldErrors:i})]})]})}var T=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){var e=new b.a(this.props.id).orElse(this.props.name),t=new b.a(this.props.label).map((function(e){return Object(I.jsx)(h.a.Label,{column:!0,sm:2,children:e})})),s=this.props.name,n=this.props.onError(this.props.name),r="hidden"===this.props.type,a=!0===this.props.readOnly,i=new b.a(this.props.checked).orElse(!1),c=new b.a(this.props.sm).orElse(t.isPresent()?10:12);return Object(I.jsxs)(h.a.Group,{as:j.a,style:{display:r?"none":""},children:[t.get(),Object(I.jsxs)(p.a,{sm:c,style:{alignSelf:"center"},children:[Object(I.jsx)(h.a.Check,{id:e,name:s,readOnly:a,type:"switch",onChange:this.props.onChange,checked:i}),Object(I.jsx)(U,{controlId:this.props.name+"-error-list",fieldErrors:n})]})]})}}]),s}(l.a.Component),D=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){var e=void 0===this.props.label?this.props.name:this.props.label,t=this.props.onError(this.props.name),s=new b.a(this.props.options).map((function(e){return e.map((function(e){return Object(I.jsx)("option",{children:e},e)}))})).orElse([]);return Object(I.jsxs)(h.a.Group,{as:j.a,controlId:this.props.name,children:[Object(I.jsx)(h.a.Label,{column:!0,sm:2,children:e}),Object(I.jsxs)(p.a,{sm:10,children:[Object(I.jsx)(h.a.Control,{as:"select",name:this.props.name,children:s}),Object(I.jsx)(U,{controlId:this.props.name+"-error-list",fieldErrors:t})]})]})}}]),s}(l.a.Component);function N(e){Object(o.useEffect)((function(){return d.a.init(),function(){d.a.destroy()}}),[]);var t=void 0===e.label?e.name:e.label,s=e.onError(e.name);return Object(I.jsxs)(h.a.Group,{as:j.a,controlId:e.name,children:[Object(I.jsx)(h.a.Label,{column:!0,sm:2,children:t}),Object(I.jsxs)(p.a,{sm:10,children:[Object(I.jsx)(h.a.Control,{type:"file",name:e.name}),Object(I.jsx)(U,{controlId:e.name+"-error-list",fieldErrors:s})]})]})}function M(e){var t=void 0===e.label?e.name:e.label,s=e.onError(e.name);return Object(I.jsxs)(h.a.Group,{as:j.a,controlId:e.name,children:[Object(I.jsx)(h.a.Label,{column:!0,sm:2,children:t}),Object(I.jsxs)(p.a,{sm:10,children:[Object(I.jsx)(h.a.Control,{as:"select",size:"sm",type:"number",custom:!0,name:e.name,onChange:e.onChange,value:e.selected,children:e.selections.map((function(t,s){return Object(I.jsx)("option",{value:t.id,defaultValue:e.selected===t,children:t.value},s)}))}),Object(I.jsx)(U,{controlId:e.name+"-error-list",fieldErrors:s})]})]})}function A(e){var t=void 0===e.label?e.name:e.label,s="vertical"===new b.a(e.displayType).orElse("vertical")?"block":"inline",n=e.onError(e.name);return Object(I.jsxs)(h.a.Group,{as:j.a,controlId:e.name,children:[Object(I.jsx)(h.a.Label,{column:!0,sm:2,children:t}),Object(I.jsxs)(p.a,{sm:10,style:{alignSelf:"center"},children:[e.selections.map((function(t,n){return Object(I.jsx)(h.a.Check,{style:{display:s,marginRight:"45px"},type:"radio",label:t.display,value:t.value,name:e.name,checked:e.selected===t.value,onChange:e.onChange,id:e.name+"-"+t.value},n)})),Object(I.jsx)(U,{controlId:e.name+"-error-list",fieldErrors:n})]})]})}function U(e){if(new b.a(e.fieldErrors).map((function(e){return!1})).orElse(!0))return null;var t=void 0===e.backgroundClass?"bg-danger":e.backgroundClass;return Object(I.jsx)("ul",{id:e.controlId,className:"error-list",children:e.fieldErrors.map((function(e,s){return Object(I.jsx)(L,{backgroundClass:t,message:e},"error-message-"+s)}))})}function L(e){return Object(I.jsx)("li",{className:"error-list-item",children:Object(I.jsxs)("small",{className:e.backgroundClass+" error",children:[Object(I.jsx)(f.a,{})," ",e.message]})})}function B(e){var t=e.variant||"info",s=e.icon||Object(I.jsx)(y.a,{});return Object(I.jsx)(l.a.Fragment,{children:(e.messages||[]).length>0&&Object(I.jsx)(m.a,{variant:t,children:Object(I.jsx)("ul",{className:"error-list",children:e.messages.map((function(e,n){return Object(I.jsx)("li",{className:"error-list-item",children:Object(I.jsxs)("small",{className:"error",children:[s," ",e]})},"alert-"+t+"-message-"+n)}))})})})}function F(e){return e.show?Object(I.jsx)("span",{style:{marginRight:"5px"},children:Object(I.jsx)(O.a,{animation:"border",variant:"warning",size:"sm",role:"status"})}):null}function K(e){return new b.a(e.errors).map((function(e){return e.errorMessages})).filter((function(e){return e.length>0})).isPresent()&&Object(I.jsx)(m.a,{id:"error-messages-alert",variant:"danger",show:void 0!==e.errors.errorMessages,children:Object(I.jsx)(U,{fieldErrors:e.errors.errorMessages,backgroundClass:""})})}function J(e){return Object(I.jsxs)("div",{className:"card-control-icons",children:[e.spinner,e.editMode&&Object(I.jsxs)(l.a.Fragment,{children:[Object(I.jsx)(g.a,{title:"save",id:"save-icon-"+e.resource.id,onClick:function(){void 0===e.resource.id?e.createResource():e.updateResource(e.resource.id)},style:{marginRight:"5px"}}),void 0!==e.resource.id&&Object(I.jsx)(w.a,{title:"reset-edit",id:"reset-update-icon-"+e.resource.id,onClick:e.resetEditMode,style:{marginRight:"5px"}})]}),!e.editMode&&Object(I.jsx)(C.a,{title:"edit",id:"update-icon-"+e.resource.id,onClick:e.edit,style:{marginRight:"5px"}}),Object(I.jsx)(S.a,{title:"delete",id:"delete-icon-"+e.resource.id,onClick:e.showModal})]})}function q(e){return Object(I.jsxs)(l.a.Fragment,{children:[Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:"Created"}),Object(I.jsx)("td",{className:"card-value-cell",children:new b.a(e.resource).map((function(e){return e.meta})).map((function(e){return e.created})).map((function(e){return new Date(e).toUTCString()})).orElse(null)})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:"LastModified"}),Object(I.jsx)("td",{className:"card-value-cell",children:new b.a(e.resource).map((function(e){return e.meta})).map((function(e){return e.lastModified})).map((function(e){return new Date(e).toUTCString()})).orElse(null)})]})]})}function G(e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:e.header}),Object(I.jsxs)("td",{id:"card-cell-"+e.resourceId+"-"+e.name,className:"card-value-cell",children:[e.editMode&&Object(I.jsx)(E.a,{value:new b.a(e.resourceValue).orElse(""),id:e.name+"-"+e.resourceId,type:e.type,name:e.name,placeholder:e.placeholder,onChange:e.onChange,onError:e.onError}),!e.editMode&&e.resourceValue]})]})}function z(e){return Object(I.jsx)("tr",{style:{display:"none"},children:Object(I.jsx)("td",{children:Object(I.jsx)(E.a,{value:new b.a(e.value).orElse(""),id:e.name+"-"+e.resourceId,type:e.type,name:e.name,placeholder:e.placeholder,onChange:e.onChange,onError:e.onError})})})}function V(e){var t=new b.a(e.onError).map((function(t){return t(e.name)})).orElse([]);return Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:e.header}),Object(I.jsxs)("td",{id:"card-cell-"+e.resourceId+"-"+e.name,className:"card-value-cell",children:[Object(I.jsxs)("fieldset",{children:[!e.editMode&&e.selected,e.editMode&&e.selections.map((function(t,s){return Object(I.jsx)(h.a.Check,{type:"radio",label:t,value:t,checked:e.selected===t,onChange:e.onChange,name:e.name,id:e.name+"-"+t},s)}))]}),Object(I.jsx)(U,{controlId:e.name+"-error-list",fieldErrors:t})]})]})}function H(e){var t=new b.a(e.onError).map((function(t){return t(e.name)})).orElse([]);return Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:e.header}),Object(I.jsxs)("td",{id:"card-cell-"+e.resourceId+"-"+e.name,className:"card-value-cell",children:[Object(I.jsxs)("fieldset",{children:[!e.editMode&&e.selected,e.editMode&&Object(I.jsx)(h.a.Control,{as:"select",size:"sm",custom:!0,name:e.name,id:e.name,onChange:e.onChange,value:e.selected,children:e.selections.map((function(t,s){return Object(I.jsx)("option",{defaultValue:e.selected===t,children:t},s)}))})]}),Object(I.jsx)(U,{controlId:e.name+"-error-list",fieldErrors:t})]})]})}function W(e){var t=Object(o.useState)(e.open||!1),s=Object(n.a)(t,2),r=s[0],a=s[1],i=e.variant||"primary",c=new b.a(e.headerClass).map((function(e){return" "+e})).orElse(""),u=new b.a(e.bodyClass).map((function(e){return" "+e})).orElse("");return Object(I.jsxs)(l.a.Fragment,{children:[Object(I.jsxs)(m.a,{className:"collapse-header"+c,variant:i,onClick:function(){return a(!r)},children:[!0===r&&Object(I.jsx)(k.a,{}),!1===r&&Object(I.jsx)(R.a,{}),e.header,void 0!==e.remove&&Object(I.jsx)(w.a,{onClick:e.remove,className:"remove-collapse"})]}),Object(I.jsx)(v.a,{in:r,children:Object(I.jsx)(x.a,{className:u,children:Object(I.jsx)(x.a.Body,{children:e.content()})})})]})}},95:function(e,t,s){}},[[157,1,2]]]);
//# sourceMappingURL=main.12902c3b.chunk.js.map